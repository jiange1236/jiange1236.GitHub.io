import{_ as t}from"./plugin-vue_export-helper-DlAUqK2U.js";import{r,o,c as l,b as s,d as a,e,a as p}from"./app-BfYe3lCy.js";const i={},_=s("h1",{id:"使用-cloudflare-workers-反代节点-misakano-の-小破站",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#使用-cloudflare-workers-反代节点-misakano-の-小破站","aria-hidden":"true"},"#"),a(" 使用 CloudFlare Workers 反代节点 | MisakaNo の 小破站")],-1),c=s("blockquote",null,[s("h2",{id:"excerpt",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#excerpt","aria-hidden":"true"},"#"),a(" Excerpt")]),s("p",null,"在我们使用一些VPS或者容器云的节点的时候，我们或多或少会出现IP/域名被墙的一种情况。但是有些提供商特别鸡贼不能够自定义域名。这时候我们可以使用CloudFlare的Workers来反代节点IP/域名，一起复活被墙的节点。 准备材料 一枚域名（因为默认的wkr域名被墙了） 一个CloudFlare账号 部署步骤 注册并登录CloudFlare账号 打开CF的控制台，转到“W")],-1),d=s("hr",null,null,-1),h=s("p",null,"在我们使用一些VPS或者容器云的节点的时候，我们或多或少会出现IP/域名被墙的一种情况。但是有些提供商特别鸡贼不能够自定义域名。这时候我们可以使用CloudFlare的Workers来反代节点IP/域名，一起复活被墙的节点。",-1),u={id:"准备材料",tabindex:"-1"},b=s("a",{class:"header-anchor",href:"#准备材料","aria-hidden":"true"},"#",-1),g={href:"https://blog.misaka.rest/2023/01/22/cf-wkrs-node/?highlight=%E5%8F%8D%E4%BB%A3#%E5%87%86%E5%A4%87%E6%9D%90%E6%96%99",title:"准备材料",target:"_blank",rel:"noopener noreferrer"},k=s("ul",null,[s("li",null,"一枚域名（因为默认的wkr域名被墙了）"),s("li",null,"一个CloudFlare账号")],-1),m={id:"部署步骤",tabindex:"-1"},f=s("a",{class:"header-anchor",href:"#部署步骤","aria-hidden":"true"},"#",-1),C={href:"https://blog.misaka.rest/2023/01/22/cf-wkrs-node/?highlight=%E5%8F%8D%E4%BB%A3#%E9%83%A8%E7%BD%B2%E6%AD%A5%E9%AA%A4",title:"部署步骤",target:"_blank",rel:"noopener noreferrer"},E=s("ol",null,[s("li",null,"注册并登录CloudFlare账号"),s("li",null,"打开CF的控制台，转到“Workers & Pages”页面，点击“Create Application”按钮")],-1),z={href:"https://imgs.misaka.cloudns.biz/20230526085011.png",target:"_blank",rel:"noopener noreferrer"},F=s("img",{src:"https://imgs.misaka.cloudns.biz/20230526085011.png",alt:""},null,-1),x=s("ol",{start:"3"},[s("li",null,"点击“Create Worker”按钮")],-1),w={href:"https://imgs.misaka.cloudns.biz/20230526085110.png",target:"_blank",rel:"noopener noreferrer"},A=s("img",{src:"https://imgs.misaka.cloudns.biz/20230526085110.png",alt:""},null,-1),q=s("ol",{start:"4"},[s("li",null,"设置workers的名称，点击“Deploy”按钮")],-1),v={href:"https://imgs.misaka.cloudns.biz/20230526085144.png",target:"_blank",rel:"noopener noreferrer"},B=s("img",{src:"https://imgs.misaka.cloudns.biz/20230526085144.png",alt:""},null,-1),P=s("ol",{start:"5"},[s("li",null,"点击“Configure Worker”按钮")],-1),W={href:"https://imgs.misaka.cloudns.biz/20230526085249.png",target:"_blank",rel:"noopener noreferrer"},I=s("img",{src:"https://imgs.misaka.cloudns.biz/20230526085249.png",alt:""},null,-1),N=s("ol",{start:"6"},[s("li",null,"点击“Quick Edit”按钮，修改代码")],-1),D={href:"https://imgs.misaka.cloudns.biz/20230526085331.png",target:"_blank",rel:"noopener noreferrer"},V=s("img",{src:"https://imgs.misaka.cloudns.biz/20230526085331.png",alt:""},null,-1),y=p('<ol start="7"><li>复制粘贴以下代码（记得将示例域名切换成自己的IP/域名），然后点击“保存并部署”</li></ol><table><tbody><tr><td><pre><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br></pre></td><td><pre><span><span>addEventListener</span>(</span><br><span>  <span>&quot;fetch&quot;</span>,<span><span>event</span> =&gt;</span> {</span><br><span>     <span>let</span> url=<span>new</span> <span>URL</span>(event.<span>request</span>.<span>url</span>);</span><br><span>     url.<span>hostname</span>=<span>&quot;abc.def.xyz&quot;</span>; </span><br><span>     url.<span>protocol</span>=<span>&#39;https&#39;</span>; </span><br><span>     <span>let</span> request=<span>new</span> <span>Request</span>(url,event.<span>request</span>);</span><br><span>     event. <span>respondWith</span>(</span><br><span>       <span>fetch</span>(request)</span><br><span>     )</span><br><span>  }</span><br><span>)</span><br></pre></td></tr></tbody></table>',2),L={href:"https://imgs.misaka.cloudns.biz/20230122132347.png",target:"_blank",rel:"noopener noreferrer"},S=s("img",{src:"https://imgs.misaka.cloudns.biz/20230122132347.png",alt:""},null,-1),T=s("ol",{start:"8"},[s("li",null,"转到“触发器”，点击“添加自定义域”")],-1),M={href:"https://imgs.misaka.cloudns.biz/20230122132504.png",target:"_blank",rel:"noopener noreferrer"},R=s("img",{src:"https://imgs.misaka.cloudns.biz/20230122132504.png",alt:""},null,-1),H=s("ol",{start:"9"},[s("li",null,"输入你想要绑定的二级域名（备注：一级域名需要在CloudFlare账号里面）")],-1),Q={href:"https://imgs.misaka.cloudns.biz/20230122132539.png",target:"_blank",rel:"noopener noreferrer"},U=s("img",{src:"https://imgs.misaka.cloudns.biz/20230122132539.png",alt:""},null,-1),Y=s("ol",{start:"10"},[s("li",null,"替换被墙的IP/域名为workers的自定义域名，如使用workers.dev二级域名的话可以关闭TLS，再使用CF的HTTP端口")],-1),j={href:"https://creativecommons.org/licenses/by-nc-sa/4.0/",target:"_blank",rel:"noopener noreferrer"},G={href:"https://blog.misaka.rest/",target:"_blank",rel:"noopener noreferrer"},J=s("hr",null,null,-1);function K(O,X){const n=r("ExternalLinkIcon");return o(),l("div",null,[_,c,d,h,s("h2",u,[b,a(),s("a",g,[e(n)]),a("准备材料")]),k,s("h2",m,[f,a(),s("a",C,[e(n)]),a("部署步骤")]),E,s("p",null,[s("a",z,[F,e(n)])]),x,s("p",null,[s("a",w,[A,e(n)])]),q,s("p",null,[s("a",v,[B,e(n)])]),P,s("p",null,[s("a",W,[I,e(n)])]),N,s("p",null,[s("a",D,[V,e(n)])]),y,s("p",null,[s("a",L,[S,e(n)])]),T,s("p",null,[s("a",M,[R,e(n)])]),H,s("p",null,[s("a",Q,[U,e(n)])]),Y,s("p",null,[a("版权声明: 本博客所有文章除特别声明外，均采用 "),s("a",j,[a("CC BY-NC-SA 4.0"),e(n)]),a(" 许可协议。转载请注明来自 "),s("a",G,[a("MisakaNo の 小破站"),e(n)]),a("！")]),J])}const ss=t(i,[["render",K],["__file","使用 CloudFlare Workers 反代节点.html.vue"]]);export{ss as default};
