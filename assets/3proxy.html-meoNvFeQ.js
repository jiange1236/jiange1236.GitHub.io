import{_ as n}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as a,a as e,o as i}from"./app-C1xKb8CS.js";const l={};function p(t,s){return i(),a("div",null,[...s[0]||(s[0]=[e(`<h2 id="_3proxy-cfg" tabindex="-1"><a class="header-anchor" href="#_3proxy-cfg"><span>3proxy.cfg</span></a></h2><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>#代理如果需要服务器解析，那么使用该dns解析并代理，我看官方的解释，默认是使用第一个的，如果第一个挂了才会使用第二个。如果不配置dns，则会使用服务器配置的dns地址，所以这里不是必须的，你可以注释掉</span></span>
<span class="line"><span>#nserver 8.8.4.4</span></span>
<span class="line"><span>#nserver 8.8.8.8</span></span>
<span class="line"><span>#域名解析最大的缓存条目 默认即可，也可以注释掉</span></span>
<span class="line"><span>#nscache 65536</span></span>
<span class="line"><span></span></span>
<span class="line"><span>#各项连接选项的超时时间</span></span>
<span class="line"><span>timeouts 1 5 30 60 180 1800 10 60     </span></span>
<span class="line"><span>#timeouts &lt;BYTE_SHORT&gt; &lt;BYTE_LONG&gt; &lt;STRING_SHORT&gt; &lt;STRING_LONG&gt; &lt;CONNECTION_SHORT&gt; &lt;CONNECTION_LONG&gt; &lt;DNS&gt; &lt;CHAIN&gt;  </span></span>
<span class="line"><span></span></span>
<span class="line"><span></span></span>
<span class="line"><span>#windows 用service ,  linux 用 deamon，这一项是必须的</span></span>
<span class="line"><span>service</span></span>
<span class="line"><span></span></span>
<span class="line"><span></span></span>
<span class="line"><span>#日志路径 参数D 是每天记录单独的日志文件  </span></span>
<span class="line"><span>#log c:/service/3proxy/logs/3proxy.log D</span></span>
<span class="line"><span>#日志内容格式</span></span>
<span class="line"><span>#logformat &quot;L%d %H:%M %N-%p %C:%c %R:%r %O %I %h %T err:%E&quot;</span></span>
<span class="line"><span>#保存最新的10个日志文件</span></span>
<span class="line"><span>#rotate 10</span></span>
<span class="line"><span></span></span>
<span class="line"><span></span></span>
<span class="line"><span>## 代理认证的用户名和密码，这里定义了两个用户，zdw的密码是777，user的密码是pass，CL代表明文密码，多条之间空格分隔</span></span>
<span class="line"><span>#users zdw:CL:777 user:CL:pass</span></span>
<span class="line"><span>## CL：代表明文密码</span></span>
<span class="line"><span>## CR：密码使用密文加密</span></span>
<span class="line"><span>## NT：密文加密</span></span>
<span class="line"><span></span></span>
<span class="line"><span></span></span>
<span class="line"><span>#代理认证类型</span></span>
<span class="line"><span>auth none</span></span>
<span class="line"><span>## none：不需要认证（默认类型）</span></span>
<span class="line"><span>## iponly：根据源IP地址进行ACL控制</span></span>
<span class="line"><span>## username：只验证用户名，用于Socks4代理</span></span>
<span class="line"><span>## nbname：认证基于NetBIOS （Windows系统）</span></span>
<span class="line"><span>## strong：基于弹窗用户名/密码认证，支持HTTP/POP3/FTP/SOCKSv5的代理类型</span></span>
<span class="line"><span>## cache：认证缓存，依赖authcache选项</span></span>
<span class="line"><span>######  auth strong / auth iponly atrong  可以同时开启多项认证方式</span></span>
<span class="line"><span></span></span>
<span class="line"><span></span></span>
<span class="line"><span>#allow选项，允许这两个用户通过认证，用英文的逗号分隔</span></span>
<span class="line"><span>allow *</span></span>
<span class="line"><span></span></span>
<span class="line"><span>## allow &lt;userlist&gt; &lt;sourcelist&gt; &lt;targetlist&gt; &lt;targetportlist&gt; operationlist&gt; &lt;weekdayslist&gt; &lt;timeperiodslist&gt;  allow选项的参数，选项支持 *匹配</span></span>
<span class="line"><span>## deny &lt;userlist&gt; &lt;sourcelist&gt; &lt;targetlist&gt; &lt;targetportlist&gt; &lt;operationlist&gt; &lt;weekdayslist&gt; &lt;timeperiodslist&gt;    deny选项的参数，选项支持 *匹配</span></span>
<span class="line"><span>#Operation is one of:  代理连接方式支持以下方式</span></span>
<span class="line"><span>##        CONNECT - establish outgoing TCP connection</span></span>
<span class="line"><span>##        BIND - bind TCP port for listening</span></span>
<span class="line"><span>##        UDPASSOC - make UDP association</span></span>
<span class="line"><span>##        ICMPASSOC - make ICMP association (for future use)</span></span>
<span class="line"><span>##        HTTP_GET - HTTP GET request</span></span>
<span class="line"><span>##        HTTP_PUT - HTTP PUT request</span></span>
<span class="line"><span>##        HTTP_POST - HTTP POST request</span></span>
<span class="line"><span>##        HTTP_HEAD - HTTP HEAD request</span></span>
<span class="line"><span>##        HTTP_CONNECT - HTTP CONNECT request</span></span>
<span class="line"><span>##        HTTP_OTHER - over HTTP request</span></span>
<span class="line"><span>##        HTTP - matches any HTTP request except HTTP_CONNECT</span></span>
<span class="line"><span>##        HTTPS - same as HTTP_CONNECT</span></span>
<span class="line"><span>##        FTP_GET - FTP get request</span></span>
<span class="line"><span>##        FTP_PUT - FTP put request</span></span>
<span class="line"><span>##        FTP_LIST - FTP list request</span></span>
<span class="line"><span>##        FTP_DATA - FTP data connection. Note: FTP_DATA requires access to dynamic</span></span>
<span class="line"><span>##        non-ptivileged (1024-65535) ports on remote side.</span></span>
<span class="line"><span>##        FTP - matches any FTP/FTP Data request</span></span>
<span class="line"><span>##        ADMIN - access to administration interface</span></span>
<span class="line"><span></span></span>
<span class="line"><span></span></span>
<span class="line"><span>#开启一个HTTP代理 端口是20001  -n：关闭windows NTML验证（使用上面定义的账号密码认证）</span></span>
<span class="line"><span>proxy -n -p20001</span></span>
<span class="line"><span>#开启一个socks代理 端口是20002</span></span>
<span class="line"><span>#socks -n -p20002</span></span>
<span class="line"><span></span></span>
<span class="line"><span>#某一项代理方式可以设置无需记录日志</span></span>
<span class="line"><span>nolog</span></span>
<span class="line"><span></span></span>
<span class="line"><span>#速度限制段</span></span>
<span class="line"><span>#首先，不限制zdw的速度</span></span>
<span class="line"><span>#nobandlimin zdw</span></span>
<span class="line"><span>#然后，其他用户整体限制到5m</span></span>
<span class="line"><span>#bandlimin 5120000 *</span></span>
<span class="line"><span></span></span>
<span class="line"><span>#bandlimin &lt;rate&gt; &lt;userlist&gt; &lt;sourcelist&gt; &lt;targetlist&gt; &lt;targetportlist&gt; &lt;operationlist&gt;   入相带宽限制</span></span>
<span class="line"><span>#bandlimout  &lt;rate&gt;  &lt;userlist&gt; &lt;sourcelist&gt; &lt;targetlist&gt; &lt;targetportlist&gt; &lt;operationlist&gt;  出向带宽限制</span></span>
<span class="line"><span>#nobandlimin   &lt;userlist&gt;  &lt;sourcelist&gt;  &lt;targetlist&gt;  &lt;targetportlist&gt;  &lt;operationlist&gt;  入带宽不限制</span></span>
<span class="line"><span>#nobandlimout &lt;userlist&gt; &lt;sourcelist&gt; &lt;targetlist&gt; &lt;targetportlist&gt; &lt;operationlist&gt;  出带宽不限制</span></span>
<span class="line"><span></span></span>
<span class="line"><span></span></span>
<span class="line"><span>#用来划分各代理区域的配置参数，比如你可以在配置文件中配置两个代理 一个HTTP代理 一个Socks5代理  那么到第二段Socks5代理的时候，由于配置文件语法格式的限制，所以需要隔离上一个代理选项的配置参数，这里就需要 flash选项来刷新下端即将出现的参数，用来覆盖上端重复的参数。</span></span>
<span class="line"><span>flush</span></span>
<span class="line"><span></span></span>
<span class="line"><span>#下面这两行不是必须的，你可以看着办</span></span>
<span class="line"><span>#代理服务器向外转发的时候绑定的IP地址</span></span>
<span class="line"><span>#external 10.0.0.14</span></span>
<span class="line"><span>#代理本地监听的IP地址</span></span>
<span class="line"><span>#internal 0.0.0.0</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="powershell" tabindex="-1"><a class="header-anchor" href="#powershell"><span>Powershell</span></a></h2><p><strong>运行</strong></p><p>打开控制台cmd/powershell**（管理员模式）<strong>切换到解压目录</strong>，**运行如下命令：</p><div class="language-text line-numbers-mode" data-highlighter="shiki" data-ext="text" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-text"><span class="line"><span>.\\3proxy.exe .\\3proxy.cfg</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>如果没有报错、没有任何输出，则证明运行成功，可以在客户端安装支持sock5的代理程序验证是否可用</p><p><strong>注册为系统服务</strong></p><p>在保证上面步骤成功的情况下运行如下命令</p><div class="language-text line-numbers-mode" data-highlighter="shiki" data-ext="text" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-text"><span class="line"><span>// 注册为服务并运行，默认使用3proxy.exe同路径下的3proxy.cfg配置文件</span></span>
<span class="line"><span>.\\3proxy.exe --install</span></span>
<span class="line"><span></span></span>
<span class="line"><span>// 删除服务，删除服务前要停止服务，如下图所示</span></span>
<span class="line"><span>.\\3proxy.exe --remove</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,10)])])}const d=n(l,[["render",p]]),v=JSON.parse('{"path":"/tech/3proxy.html","title":"","lang":"zh-CN","frontmatter":{"date":"2025-01-23T00:00:00.000Z","description":"3proxy.cfg Powershell 运行 打开控制台cmd/powershell**（管理员模式）切换到解压目录，**运行如下命令： 如果没有报错、没有任何输出，则证明运行成功，可以在客户端安装支持sock5的代理程序验证是否可用 注册为系统服务 在保证上面步骤成功的情况下运行如下命令","head":[["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"\\",\\"image\\":[\\"\\"],\\"datePublished\\":\\"2025-01-23T00:00:00.000Z\\",\\"dateModified\\":\\"2025-03-16T12:40:42.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"Zine⁶\\",\\"url\\":\\"https://zecdn.top\\"}]}"],["meta",{"property":"og:url","content":"https://jiange1236.github.io/tech/3proxy.html"}],["meta",{"property":"og:site_name","content":"Zeblog"}],["meta",{"property":"og:description","content":"3proxy.cfg Powershell 运行 打开控制台cmd/powershell**（管理员模式）切换到解压目录，**运行如下命令： 如果没有报错、没有任何输出，则证明运行成功，可以在客户端安装支持sock5的代理程序验证是否可用 注册为系统服务 在保证上面步骤成功的情况下运行如下命令"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2025-03-16T12:40:42.000Z"}],["meta",{"property":"article:published_time","content":"2025-01-23T00:00:00.000Z"}],["meta",{"property":"article:modified_time","content":"2025-03-16T12:40:42.000Z"}],["link",{"rel":"alternate","type":"application/atom+xml","href":"https://jiange1236.github.io/atom.xml","title":"Zeblog Atom Feed"}],["link",{"rel":"alternate","type":"application/json","href":"https://jiange1236.github.io/feed.json","title":"Zeblog JSON Feed"}],["link",{"rel":"alternate","type":"application/rss+xml","href":"https://jiange1236.github.io/rss.xml","title":"Zeblog RSS Feed"}]]},"git":{"createdTime":1737622768000,"updatedTime":1742128842000,"contributors":[{"name":"jiange1236","username":"jiange1236","email":"1384621+jiange1236@users.noreply.github.com","commits":3,"url":"https://github.com/jiange1236"}]},"readingTime":{"minutes":3.44,"words":1032},"filePathRelative":"tech/3proxy.md","excerpt":"","autoDesc":true}');export{d as comp,v as data};
