import{F as xe}from"./chunk-PWCSEZZ4-Bq1ao2K_.js";import{s as He}from"./chunk-VSLJSFIP-BH5Px0Zd.js";import{c as Ve}from"./chunk-4KE642ED-BPUB8--H.js";import{p as Be}from"./gitGraph-YCYPL57B-MEVJTYR7-BMCwZE1F.js";import{m as T,M as We,F as je,B as $e,w as qe,A as Ze,L as Je,aT as Ke,b5 as Qe,v as tr,J as Me,bb as ve,Q as le,bm as fe,f as er,au as rr,q as ir,aS as me,bn as nr,bo as or}from"./mermaid.esm.min-oacF67P0.js";import"./chunk-5ZJXQJOJ-vrNBiNR7.js";import"./app-DZHFx0BS.js";var _e=me((w,H)=>{T(function(C,F){typeof w=="object"&&typeof H=="object"?H.exports=F():typeof define=="function"&&define.amd?define([],F):typeof w=="object"?w.layoutBase=F():C.layoutBase=F()},"webpackUniversalModuleDefinition")(w,function(){return function(C){var F={};function A(g){if(F[g])return F[g].exports;var s=F[g]={i:g,l:!1,exports:{}};return C[g].call(s.exports,s,s.exports,A),s.l=!0,s.exports}return T(A,"__webpack_require__"),A.m=C,A.c=F,A.i=function(g){return g},A.d=function(g,s,i){A.o(g,s)||Object.defineProperty(g,s,{configurable:!1,enumerable:!0,get:i})},A.n=function(g){var s=g&&g.__esModule?T(function(){return g.default},"getDefault"):T(function(){return g},"getModuleExports");return A.d(s,"a",s),s},A.o=function(g,s){return Object.prototype.hasOwnProperty.call(g,s)},A.p="",A(A.s=28)}([function(C,F,A){function g(){}T(g,"LayoutConstants"),g.QUALITY=1,g.DEFAULT_CREATE_BENDS_AS_NEEDED=!1,g.DEFAULT_INCREMENTAL=!1,g.DEFAULT_ANIMATION_ON_LAYOUT=!0,g.DEFAULT_ANIMATION_DURING_LAYOUT=!1,g.DEFAULT_ANIMATION_PERIOD=50,g.DEFAULT_UNIFORM_LEAF_NODE_SIZES=!1,g.DEFAULT_GRAPH_MARGIN=15,g.NODE_DIMENSIONS_INCLUDE_LABELS=!1,g.SIMPLE_NODE_SIZE=40,g.SIMPLE_NODE_HALF_SIZE=g.SIMPLE_NODE_SIZE/2,g.EMPTY_COMPOUND_NODE_SIZE=40,g.MIN_EDGE_LENGTH=1,g.WORLD_BOUNDARY=1e6,g.INITIAL_WORLD_BOUNDARY=g.WORLD_BOUNDARY/1e3,g.WORLD_CENTER_X=1200,g.WORLD_CENTER_Y=900,C.exports=g},function(C,F,A){var g=A(2),s=A(8),i=A(9);function r(h,n,p){g.call(this,p),this.isOverlapingSourceAndTarget=!1,this.vGraphObject=p,this.bendpoints=[],this.source=h,this.target=n}T(r,"LEdge"),r.prototype=Object.create(g.prototype);for(var t in g)r[t]=g[t];r.prototype.getSource=function(){return this.source},r.prototype.getTarget=function(){return this.target},r.prototype.isInterGraph=function(){return this.isInterGraph},r.prototype.getLength=function(){return this.length},r.prototype.isOverlapingSourceAndTarget=function(){return this.isOverlapingSourceAndTarget},r.prototype.getBendpoints=function(){return this.bendpoints},r.prototype.getLca=function(){return this.lca},r.prototype.getSourceInLca=function(){return this.sourceInLca},r.prototype.getTargetInLca=function(){return this.targetInLca},r.prototype.getOtherEnd=function(h){if(this.source===h)return this.target;if(this.target===h)return this.source;throw"Node is not incident with this edge"},r.prototype.getOtherEndInGraph=function(h,n){for(var p=this.getOtherEnd(h),o=n.getGraphManager().getRoot();;){if(p.getOwner()==n)return p;if(p.getOwner()==o)break;p=p.getOwner().getParent()}return null},r.prototype.updateLength=function(){var h=new Array(4);this.isOverlapingSourceAndTarget=s.getIntersection(this.target.getRect(),this.source.getRect(),h),this.isOverlapingSourceAndTarget||(this.lengthX=h[0]-h[2],this.lengthY=h[1]-h[3],Math.abs(this.lengthX)<1&&(this.lengthX=i.sign(this.lengthX)),Math.abs(this.lengthY)<1&&(this.lengthY=i.sign(this.lengthY)),this.length=Math.sqrt(this.lengthX*this.lengthX+this.lengthY*this.lengthY))},r.prototype.updateLengthSimple=function(){this.lengthX=this.target.getCenterX()-this.source.getCenterX(),this.lengthY=this.target.getCenterY()-this.source.getCenterY(),Math.abs(this.lengthX)<1&&(this.lengthX=i.sign(this.lengthX)),Math.abs(this.lengthY)<1&&(this.lengthY=i.sign(this.lengthY)),this.length=Math.sqrt(this.lengthX*this.lengthX+this.lengthY*this.lengthY)},C.exports=r},function(C,F,A){function g(s){this.vGraphObject=s}T(g,"LGraphObject"),C.exports=g},function(C,F,A){var g=A(2),s=A(10),i=A(13),r=A(0),t=A(16),h=A(5);function n(o,e,d,u){d==null&&u==null&&(u=e),g.call(this,u),o.graphManager!=null&&(o=o.graphManager),this.estimatedSize=s.MIN_VALUE,this.inclusionTreeDepth=s.MAX_VALUE,this.vGraphObject=u,this.edges=[],this.graphManager=o,d!=null&&e!=null?this.rect=new i(e.x,e.y,d.width,d.height):this.rect=new i}T(n,"LNode"),n.prototype=Object.create(g.prototype);for(var p in g)n[p]=g[p];n.prototype.getEdges=function(){return this.edges},n.prototype.getChild=function(){return this.child},n.prototype.getOwner=function(){return this.owner},n.prototype.getWidth=function(){return this.rect.width},n.prototype.setWidth=function(o){this.rect.width=o},n.prototype.getHeight=function(){return this.rect.height},n.prototype.setHeight=function(o){this.rect.height=o},n.prototype.getCenterX=function(){return this.rect.x+this.rect.width/2},n.prototype.getCenterY=function(){return this.rect.y+this.rect.height/2},n.prototype.getCenter=function(){return new h(this.rect.x+this.rect.width/2,this.rect.y+this.rect.height/2)},n.prototype.getLocation=function(){return new h(this.rect.x,this.rect.y)},n.prototype.getRect=function(){return this.rect},n.prototype.getDiagonal=function(){return Math.sqrt(this.rect.width*this.rect.width+this.rect.height*this.rect.height)},n.prototype.getHalfTheDiagonal=function(){return Math.sqrt(this.rect.height*this.rect.height+this.rect.width*this.rect.width)/2},n.prototype.setRect=function(o,e){this.rect.x=o.x,this.rect.y=o.y,this.rect.width=e.width,this.rect.height=e.height},n.prototype.setCenter=function(o,e){this.rect.x=o-this.rect.width/2,this.rect.y=e-this.rect.height/2},n.prototype.setLocation=function(o,e){this.rect.x=o,this.rect.y=e},n.prototype.moveBy=function(o,e){this.rect.x+=o,this.rect.y+=e},n.prototype.getEdgeListToNode=function(o){var e=[],d=this;return d.edges.forEach(function(u){if(u.target==o){if(u.source!=d)throw"Incorrect edge source!";e.push(u)}}),e},n.prototype.getEdgesBetween=function(o){var e=[],d=this;return d.edges.forEach(function(u){if(!(u.source==d||u.target==d))throw"Incorrect edge source and/or target";(u.target==o||u.source==o)&&e.push(u)}),e},n.prototype.getNeighborsList=function(){var o=new Set,e=this;return e.edges.forEach(function(d){if(d.source==e)o.add(d.target);else{if(d.target!=e)throw"Incorrect incidency!";o.add(d.source)}}),o},n.prototype.withChildren=function(){var o=new Set,e,d;if(o.add(this),this.child!=null)for(var u=this.child.getNodes(),l=0;l<u.length;l++)e=u[l],d=e.withChildren(),d.forEach(function(N){o.add(N)});return o},n.prototype.getNoOfChildren=function(){var o=0,e;if(this.child==null)o=1;else for(var d=this.child.getNodes(),u=0;u<d.length;u++)e=d[u],o+=e.getNoOfChildren();return o==0&&(o=1),o},n.prototype.getEstimatedSize=function(){if(this.estimatedSize==s.MIN_VALUE)throw"assert failed";return this.estimatedSize},n.prototype.calcEstimatedSize=function(){return this.child==null?this.estimatedSize=(this.rect.width+this.rect.height)/2:(this.estimatedSize=this.child.calcEstimatedSize(),this.rect.width=this.estimatedSize,this.rect.height=this.estimatedSize,this.estimatedSize)},n.prototype.scatter=function(){var o,e,d=-r.INITIAL_WORLD_BOUNDARY,u=r.INITIAL_WORLD_BOUNDARY;o=r.WORLD_CENTER_X+t.nextDouble()*(u-d)+d;var l=-r.INITIAL_WORLD_BOUNDARY,N=r.INITIAL_WORLD_BOUNDARY;e=r.WORLD_CENTER_Y+t.nextDouble()*(N-l)+l,this.rect.x=o,this.rect.y=e},n.prototype.updateBounds=function(){if(this.getChild()==null)throw"assert failed";if(this.getChild().getNodes().length!=0){var o=this.getChild();if(o.updateBounds(!0),this.rect.x=o.getLeft(),this.rect.y=o.getTop(),this.setWidth(o.getRight()-o.getLeft()),this.setHeight(o.getBottom()-o.getTop()),r.NODE_DIMENSIONS_INCLUDE_LABELS){var e=o.getRight()-o.getLeft(),d=o.getBottom()-o.getTop();this.labelWidth&&(this.labelPosHorizontal=="left"?(this.rect.x-=this.labelWidth,this.setWidth(e+this.labelWidth)):this.labelPosHorizontal=="center"&&this.labelWidth>e?(this.rect.x-=(this.labelWidth-e)/2,this.setWidth(this.labelWidth)):this.labelPosHorizontal=="right"&&this.setWidth(e+this.labelWidth)),this.labelHeight&&(this.labelPosVertical=="top"?(this.rect.y-=this.labelHeight,this.setHeight(d+this.labelHeight)):this.labelPosVertical=="center"&&this.labelHeight>d?(this.rect.y-=(this.labelHeight-d)/2,this.setHeight(this.labelHeight)):this.labelPosVertical=="bottom"&&this.setHeight(d+this.labelHeight))}}},n.prototype.getInclusionTreeDepth=function(){if(this.inclusionTreeDepth==s.MAX_VALUE)throw"assert failed";return this.inclusionTreeDepth},n.prototype.transform=function(o){var e=this.rect.x;e>r.WORLD_BOUNDARY?e=r.WORLD_BOUNDARY:e<-r.WORLD_BOUNDARY&&(e=-r.WORLD_BOUNDARY);var d=this.rect.y;d>r.WORLD_BOUNDARY?d=r.WORLD_BOUNDARY:d<-r.WORLD_BOUNDARY&&(d=-r.WORLD_BOUNDARY);var u=new h(e,d),l=o.inverseTransformPoint(u);this.setLocation(l.x,l.y)},n.prototype.getLeft=function(){return this.rect.x},n.prototype.getRight=function(){return this.rect.x+this.rect.width},n.prototype.getTop=function(){return this.rect.y},n.prototype.getBottom=function(){return this.rect.y+this.rect.height},n.prototype.getParent=function(){return this.owner==null?null:this.owner.getParent()},C.exports=n},function(C,F,A){var g=A(0);function s(){}T(s,"FDLayoutConstants");for(var i in g)s[i]=g[i];s.MAX_ITERATIONS=2500,s.DEFAULT_EDGE_LENGTH=50,s.DEFAULT_SPRING_STRENGTH=.45,s.DEFAULT_REPULSION_STRENGTH=4500,s.DEFAULT_GRAVITY_STRENGTH=.4,s.DEFAULT_COMPOUND_GRAVITY_STRENGTH=1,s.DEFAULT_GRAVITY_RANGE_FACTOR=3.8,s.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR=1.5,s.DEFAULT_USE_SMART_IDEAL_EDGE_LENGTH_CALCULATION=!0,s.DEFAULT_USE_SMART_REPULSION_RANGE_CALCULATION=!0,s.DEFAULT_COOLING_FACTOR_INCREMENTAL=.3,s.COOLING_ADAPTATION_FACTOR=.33,s.ADAPTATION_LOWER_NODE_LIMIT=1e3,s.ADAPTATION_UPPER_NODE_LIMIT=5e3,s.MAX_NODE_DISPLACEMENT_INCREMENTAL=100,s.MAX_NODE_DISPLACEMENT=s.MAX_NODE_DISPLACEMENT_INCREMENTAL*3,s.MIN_REPULSION_DIST=s.DEFAULT_EDGE_LENGTH/10,s.CONVERGENCE_CHECK_PERIOD=100,s.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR=.1,s.MIN_EDGE_LENGTH=1,s.GRID_CALCULATION_CHECK_PERIOD=10,C.exports=s},function(C,F,A){function g(s,i){s==null&&i==null?(this.x=0,this.y=0):(this.x=s,this.y=i)}T(g,"PointD"),g.prototype.getX=function(){return this.x},g.prototype.getY=function(){return this.y},g.prototype.setX=function(s){this.x=s},g.prototype.setY=function(s){this.y=s},g.prototype.getDifference=function(s){return new DimensionD(this.x-s.x,this.y-s.y)},g.prototype.getCopy=function(){return new g(this.x,this.y)},g.prototype.translate=function(s){return this.x+=s.width,this.y+=s.height,this},C.exports=g},function(C,F,A){var g=A(2),s=A(10),i=A(0),r=A(7),t=A(3),h=A(1),n=A(13),p=A(12),o=A(11);function e(u,l,N){g.call(this,N),this.estimatedSize=s.MIN_VALUE,this.margin=i.DEFAULT_GRAPH_MARGIN,this.edges=[],this.nodes=[],this.isConnected=!1,this.parent=u,l!=null&&l instanceof r?this.graphManager=l:l!=null&&l instanceof Layout&&(this.graphManager=l.graphManager)}T(e,"LGraph"),e.prototype=Object.create(g.prototype);for(var d in g)e[d]=g[d];e.prototype.getNodes=function(){return this.nodes},e.prototype.getEdges=function(){return this.edges},e.prototype.getGraphManager=function(){return this.graphManager},e.prototype.getParent=function(){return this.parent},e.prototype.getLeft=function(){return this.left},e.prototype.getRight=function(){return this.right},e.prototype.getTop=function(){return this.top},e.prototype.getBottom=function(){return this.bottom},e.prototype.isConnected=function(){return this.isConnected},e.prototype.add=function(u,l,N){if(l==null&&N==null){var c=u;if(this.graphManager==null)throw"Graph has no graph mgr!";if(this.getNodes().indexOf(c)>-1)throw"Node already in graph!";return c.owner=this,this.getNodes().push(c),c}else{var E=u;if(!(this.getNodes().indexOf(l)>-1&&this.getNodes().indexOf(N)>-1))throw"Source or target not in graph!";if(!(l.owner==N.owner&&l.owner==this))throw"Both owners must be this graph!";return l.owner!=N.owner?null:(E.source=l,E.target=N,E.isInterGraph=!1,this.getEdges().push(E),l.edges.push(E),N!=l&&N.edges.push(E),E)}},e.prototype.remove=function(u){var l=u;if(u instanceof t){if(l==null)throw"Node is null!";if(!(l.owner!=null&&l.owner==this))throw"Owner graph is invalid!";if(this.graphManager==null)throw"Owner graph manager is invalid!";for(var N=l.edges.slice(),c,E=N.length,_=0;_<E;_++)c=N[_],c.isInterGraph?this.graphManager.remove(c):c.source.owner.remove(c);var L=this.nodes.indexOf(l);if(L==-1)throw"Node not in owner node list!";this.nodes.splice(L,1)}else if(u instanceof h){var c=u;if(c==null)throw"Edge is null!";if(!(c.source!=null&&c.target!=null))throw"Source and/or target is null!";if(!(c.source.owner!=null&&c.target.owner!=null&&c.source.owner==this&&c.target.owner==this))throw"Source and/or target owner is invalid!";var P=c.source.edges.indexOf(c),z=c.target.edges.indexOf(c);if(!(P>-1&&z>-1))throw"Source and/or target doesn't know this edge!";c.source.edges.splice(P,1),c.target!=c.source&&c.target.edges.splice(z,1);var L=c.source.owner.getEdges().indexOf(c);if(L==-1)throw"Not in owner's edge list!";c.source.owner.getEdges().splice(L,1)}},e.prototype.updateLeftTop=function(){for(var u=s.MAX_VALUE,l=s.MAX_VALUE,N,c,E,_=this.getNodes(),L=_.length,P=0;P<L;P++){var z=_[P];N=z.getTop(),c=z.getLeft(),u>N&&(u=N),l>c&&(l=c)}return u==s.MAX_VALUE?null:(_[0].getParent().paddingLeft!=null?E=_[0].getParent().paddingLeft:E=this.margin,this.left=l-E,this.top=u-E,new p(this.left,this.top))},e.prototype.updateBounds=function(u){for(var l=s.MAX_VALUE,N=-s.MAX_VALUE,c=s.MAX_VALUE,E=-s.MAX_VALUE,_,L,P,z,V,B=this.nodes,q=B.length,x=0;x<q;x++){var st=B[x];u&&st.child!=null&&st.updateBounds(),_=st.getLeft(),L=st.getRight(),P=st.getTop(),z=st.getBottom(),l>_&&(l=_),N<L&&(N=L),c>P&&(c=P),E<z&&(E=z)}var a=new n(l,c,N-l,E-c);l==s.MAX_VALUE&&(this.left=this.parent.getLeft(),this.right=this.parent.getRight(),this.top=this.parent.getTop(),this.bottom=this.parent.getBottom()),B[0].getParent().paddingLeft!=null?V=B[0].getParent().paddingLeft:V=this.margin,this.left=a.x-V,this.right=a.x+a.width+V,this.top=a.y-V,this.bottom=a.y+a.height+V},e.calculateBounds=function(u){for(var l=s.MAX_VALUE,N=-s.MAX_VALUE,c=s.MAX_VALUE,E=-s.MAX_VALUE,_,L,P,z,V=u.length,B=0;B<V;B++){var q=u[B];_=q.getLeft(),L=q.getRight(),P=q.getTop(),z=q.getBottom(),l>_&&(l=_),N<L&&(N=L),c>P&&(c=P),E<z&&(E=z)}var x=new n(l,c,N-l,E-c);return x},e.prototype.getInclusionTreeDepth=function(){return this==this.graphManager.getRoot()?1:this.parent.getInclusionTreeDepth()},e.prototype.getEstimatedSize=function(){if(this.estimatedSize==s.MIN_VALUE)throw"assert failed";return this.estimatedSize},e.prototype.calcEstimatedSize=function(){for(var u=0,l=this.nodes,N=l.length,c=0;c<N;c++){var E=l[c];u+=E.calcEstimatedSize()}return u==0?this.estimatedSize=i.EMPTY_COMPOUND_NODE_SIZE:this.estimatedSize=u/Math.sqrt(this.nodes.length),this.estimatedSize},e.prototype.updateConnected=function(){var u=this;if(this.nodes.length==0){this.isConnected=!0;return}var l=new o,N=new Set,c=this.nodes[0],E,_,L=c.withChildren();for(L.forEach(function(x){l.push(x),N.add(x)});l.length!==0;){c=l.shift(),E=c.getEdges();for(var P=E.length,z=0;z<P;z++){var V=E[z];if(_=V.getOtherEndInGraph(c,this),_!=null&&!N.has(_)){var B=_.withChildren();B.forEach(function(x){l.push(x),N.add(x)})}}}if(this.isConnected=!1,N.size>=this.nodes.length){var q=0;N.forEach(function(x){x.owner==u&&q++}),q==this.nodes.length&&(this.isConnected=!0)}},C.exports=e},function(C,F,A){var g,s=A(1);function i(r){g=A(6),this.layout=r,this.graphs=[],this.edges=[]}T(i,"LGraphManager"),i.prototype.addRoot=function(){var r=this.layout.newGraph(),t=this.layout.newNode(null),h=this.add(r,t);return this.setRootGraph(h),this.rootGraph},i.prototype.add=function(r,t,h,n,p){if(h==null&&n==null&&p==null){if(r==null)throw"Graph is null!";if(t==null)throw"Parent node is null!";if(this.graphs.indexOf(r)>-1)throw"Graph already in this graph mgr!";if(this.graphs.push(r),r.parent!=null)throw"Already has a parent!";if(t.child!=null)throw"Already has a child!";return r.parent=t,t.child=r,r}else{p=h,n=t,h=r;var o=n.getOwner(),e=p.getOwner();if(!(o!=null&&o.getGraphManager()==this))throw"Source not in this graph mgr!";if(!(e!=null&&e.getGraphManager()==this))throw"Target not in this graph mgr!";if(o==e)return h.isInterGraph=!1,o.add(h,n,p);if(h.isInterGraph=!0,h.source=n,h.target=p,this.edges.indexOf(h)>-1)throw"Edge already in inter-graph edge list!";if(this.edges.push(h),!(h.source!=null&&h.target!=null))throw"Edge source and/or target is null!";if(!(h.source.edges.indexOf(h)==-1&&h.target.edges.indexOf(h)==-1))throw"Edge already in source and/or target incidency list!";return h.source.edges.push(h),h.target.edges.push(h),h}},i.prototype.remove=function(r){if(r instanceof g){var t=r;if(t.getGraphManager()!=this)throw"Graph not in this graph mgr";if(!(t==this.rootGraph||t.parent!=null&&t.parent.graphManager==this))throw"Invalid parent node!";var h=[];h=h.concat(t.getEdges());for(var n,p=h.length,o=0;o<p;o++)n=h[o],t.remove(n);var e=[];e=e.concat(t.getNodes());var d;p=e.length;for(var o=0;o<p;o++)d=e[o],t.remove(d);t==this.rootGraph&&this.setRootGraph(null);var u=this.graphs.indexOf(t);this.graphs.splice(u,1),t.parent=null}else if(r instanceof s){if(n=r,n==null)throw"Edge is null!";if(!n.isInterGraph)throw"Not an inter-graph edge!";if(!(n.source!=null&&n.target!=null))throw"Source and/or target is null!";if(!(n.source.edges.indexOf(n)!=-1&&n.target.edges.indexOf(n)!=-1))throw"Source and/or target doesn't know this edge!";var u=n.source.edges.indexOf(n);if(n.source.edges.splice(u,1),u=n.target.edges.indexOf(n),n.target.edges.splice(u,1),!(n.source.owner!=null&&n.source.owner.getGraphManager()!=null))throw"Edge owner graph or owner graph manager is null!";if(n.source.owner.getGraphManager().edges.indexOf(n)==-1)throw"Not in owner graph manager's edge list!";var u=n.source.owner.getGraphManager().edges.indexOf(n);n.source.owner.getGraphManager().edges.splice(u,1)}},i.prototype.updateBounds=function(){this.rootGraph.updateBounds(!0)},i.prototype.getGraphs=function(){return this.graphs},i.prototype.getAllNodes=function(){if(this.allNodes==null){for(var r=[],t=this.getGraphs(),h=t.length,n=0;n<h;n++)r=r.concat(t[n].getNodes());this.allNodes=r}return this.allNodes},i.prototype.resetAllNodes=function(){this.allNodes=null},i.prototype.resetAllEdges=function(){this.allEdges=null},i.prototype.resetAllNodesToApplyGravitation=function(){this.allNodesToApplyGravitation=null},i.prototype.getAllEdges=function(){if(this.allEdges==null){for(var r=[],t=this.getGraphs(),h=t.length,n=0;n<t.length;n++)r=r.concat(t[n].getEdges());r=r.concat(this.edges),this.allEdges=r}return this.allEdges},i.prototype.getAllNodesToApplyGravitation=function(){return this.allNodesToApplyGravitation},i.prototype.setAllNodesToApplyGravitation=function(r){if(this.allNodesToApplyGravitation!=null)throw"assert failed";this.allNodesToApplyGravitation=r},i.prototype.getRoot=function(){return this.rootGraph},i.prototype.setRootGraph=function(r){if(r.getGraphManager()!=this)throw"Root not in this graph mgr!";this.rootGraph=r,r.parent==null&&(r.parent=this.layout.newNode("Root node"))},i.prototype.getLayout=function(){return this.layout},i.prototype.isOneAncestorOfOther=function(r,t){if(!(r!=null&&t!=null))throw"assert failed";if(r==t)return!0;var h=r.getOwner(),n;do{if(n=h.getParent(),n==null)break;if(n==t)return!0;if(h=n.getOwner(),h==null)break}while(!0);h=t.getOwner();do{if(n=h.getParent(),n==null)break;if(n==r)return!0;if(h=n.getOwner(),h==null)break}while(!0);return!1},i.prototype.calcLowestCommonAncestors=function(){for(var r,t,h,n,p,o=this.getAllEdges(),e=o.length,d=0;d<e;d++){if(r=o[d],t=r.source,h=r.target,r.lca=null,r.sourceInLca=t,r.targetInLca=h,t==h){r.lca=t.getOwner();continue}for(n=t.getOwner();r.lca==null;){for(r.targetInLca=h,p=h.getOwner();r.lca==null;){if(p==n){r.lca=p;break}if(p==this.rootGraph)break;if(r.lca!=null)throw"assert failed";r.targetInLca=p.getParent(),p=r.targetInLca.getOwner()}if(n==this.rootGraph)break;r.lca==null&&(r.sourceInLca=n.getParent(),n=r.sourceInLca.getOwner())}if(r.lca==null)throw"assert failed"}},i.prototype.calcLowestCommonAncestor=function(r,t){if(r==t)return r.getOwner();var h=r.getOwner();do{if(h==null)break;var n=t.getOwner();do{if(n==null)break;if(n==h)return n;n=n.getParent().getOwner()}while(!0);h=h.getParent().getOwner()}while(!0);return h},i.prototype.calcInclusionTreeDepths=function(r,t){r==null&&t==null&&(r=this.rootGraph,t=1);for(var h,n=r.getNodes(),p=n.length,o=0;o<p;o++)h=n[o],h.inclusionTreeDepth=t,h.child!=null&&this.calcInclusionTreeDepths(h.child,t+1)},i.prototype.includesInvalidEdge=function(){for(var r,t=[],h=this.edges.length,n=0;n<h;n++)r=this.edges[n],this.isOneAncestorOfOther(r.source,r.target)&&t.push(r);for(var n=0;n<t.length;n++)this.remove(t[n]);return!1},C.exports=i},function(C,F,A){var g=A(12);function s(){}T(s,"IGeometry"),s.calcSeparationAmount=function(i,r,t,h){if(!i.intersects(r))throw"assert failed";var n=new Array(2);this.decideDirectionsForOverlappingNodes(i,r,n),t[0]=Math.min(i.getRight(),r.getRight())-Math.max(i.x,r.x),t[1]=Math.min(i.getBottom(),r.getBottom())-Math.max(i.y,r.y),i.getX()<=r.getX()&&i.getRight()>=r.getRight()?t[0]+=Math.min(r.getX()-i.getX(),i.getRight()-r.getRight()):r.getX()<=i.getX()&&r.getRight()>=i.getRight()&&(t[0]+=Math.min(i.getX()-r.getX(),r.getRight()-i.getRight())),i.getY()<=r.getY()&&i.getBottom()>=r.getBottom()?t[1]+=Math.min(r.getY()-i.getY(),i.getBottom()-r.getBottom()):r.getY()<=i.getY()&&r.getBottom()>=i.getBottom()&&(t[1]+=Math.min(i.getY()-r.getY(),r.getBottom()-i.getBottom()));var p=Math.abs((r.getCenterY()-i.getCenterY())/(r.getCenterX()-i.getCenterX()));r.getCenterY()===i.getCenterY()&&r.getCenterX()===i.getCenterX()&&(p=1);var o=p*t[0],e=t[1]/p;t[0]<e?e=t[0]:o=t[1],t[0]=-1*n[0]*(e/2+h),t[1]=-1*n[1]*(o/2+h)},s.decideDirectionsForOverlappingNodes=function(i,r,t){i.getCenterX()<r.getCenterX()?t[0]=-1:t[0]=1,i.getCenterY()<r.getCenterY()?t[1]=-1:t[1]=1},s.getIntersection2=function(i,r,t){var h=i.getCenterX(),n=i.getCenterY(),p=r.getCenterX(),o=r.getCenterY();if(i.intersects(r))return t[0]=h,t[1]=n,t[2]=p,t[3]=o,!0;var e=i.getX(),d=i.getY(),u=i.getRight(),l=i.getX(),N=i.getBottom(),c=i.getRight(),E=i.getWidthHalf(),_=i.getHeightHalf(),L=r.getX(),P=r.getY(),z=r.getRight(),V=r.getX(),B=r.getBottom(),q=r.getRight(),x=r.getWidthHalf(),st=r.getHeightHalf(),a=!1,y=!1;if(h===p){if(n>o)return t[0]=h,t[1]=d,t[2]=p,t[3]=B,!1;if(n<o)return t[0]=h,t[1]=N,t[2]=p,t[3]=P,!1}else if(n===o){if(h>p)return t[0]=e,t[1]=n,t[2]=z,t[3]=o,!1;if(h<p)return t[0]=u,t[1]=n,t[2]=L,t[3]=o,!1}else{var v=i.height/i.width,m=r.height/r.width,f=(o-n)/(p-h),D=void 0,O=void 0,M=void 0,U=void 0,X=void 0,W=void 0;if(-v===f?h>p?(t[0]=l,t[1]=N,a=!0):(t[0]=u,t[1]=d,a=!0):v===f&&(h>p?(t[0]=e,t[1]=d,a=!0):(t[0]=c,t[1]=N,a=!0)),-m===f?p>h?(t[2]=V,t[3]=B,y=!0):(t[2]=z,t[3]=P,y=!0):m===f&&(p>h?(t[2]=L,t[3]=P,y=!0):(t[2]=q,t[3]=B,y=!0)),a&&y)return!1;if(h>p?n>o?(D=this.getCardinalDirection(v,f,4),O=this.getCardinalDirection(m,f,2)):(D=this.getCardinalDirection(-v,f,3),O=this.getCardinalDirection(-m,f,1)):n>o?(D=this.getCardinalDirection(-v,f,1),O=this.getCardinalDirection(-m,f,3)):(D=this.getCardinalDirection(v,f,2),O=this.getCardinalDirection(m,f,4)),!a)switch(D){case 1:U=d,M=h+-_/f,t[0]=M,t[1]=U;break;case 2:M=c,U=n+E*f,t[0]=M,t[1]=U;break;case 3:U=N,M=h+_/f,t[0]=M,t[1]=U;break;case 4:M=l,U=n+-E*f,t[0]=M,t[1]=U;break}if(!y)switch(O){case 1:W=P,X=p+-st/f,t[2]=X,t[3]=W;break;case 2:X=q,W=o+x*f,t[2]=X,t[3]=W;break;case 3:W=B,X=p+st/f,t[2]=X,t[3]=W;break;case 4:X=V,W=o+-x*f,t[2]=X,t[3]=W;break}}return!1},s.getCardinalDirection=function(i,r,t){return i>r?t:1+t%4},s.getIntersection=function(i,r,t,h){if(h==null)return this.getIntersection2(i,r,t);var n=i.x,p=i.y,o=r.x,e=r.y,d=t.x,u=t.y,l=h.x,N=h.y,c=void 0,E=void 0,_=void 0,L=void 0,P=void 0,z=void 0,V=void 0,B=void 0,q=void 0;return _=e-p,P=n-o,V=o*p-n*e,L=N-u,z=d-l,B=l*u-d*N,q=_*z-L*P,q===0?null:(c=(P*B-z*V)/q,E=(L*V-_*B)/q,new g(c,E))},s.angleOfVector=function(i,r,t,h){var n=void 0;return i!==t?(n=Math.atan((h-r)/(t-i)),t<i?n+=Math.PI:h<r&&(n+=this.TWO_PI)):h<r?n=this.ONE_AND_HALF_PI:n=this.HALF_PI,n},s.doIntersect=function(i,r,t,h){var n=i.x,p=i.y,o=r.x,e=r.y,d=t.x,u=t.y,l=h.x,N=h.y,c=(o-n)*(N-u)-(l-d)*(e-p);if(c===0)return!1;var E=((N-u)*(l-n)+(d-l)*(N-p))/c,_=((p-e)*(l-n)+(o-n)*(N-p))/c;return 0<E&&E<1&&0<_&&_<1},s.findCircleLineIntersections=function(i,r,t,h,n,p,o){var e=(t-i)*(t-i)+(h-r)*(h-r),d=2*((i-n)*(t-i)+(r-p)*(h-r)),u=(i-n)*(i-n)+(r-p)*(r-p)-o*o,l=d*d-4*e*u;if(l>=0){var N=(-d+Math.sqrt(d*d-4*e*u))/(2*e),c=(-d-Math.sqrt(d*d-4*e*u))/(2*e),E=null;return N>=0&&N<=1?[N]:c>=0&&c<=1?[c]:E}else return null},s.HALF_PI=.5*Math.PI,s.ONE_AND_HALF_PI=1.5*Math.PI,s.TWO_PI=2*Math.PI,s.THREE_PI=3*Math.PI,C.exports=s},function(C,F,A){function g(){}T(g,"IMath"),g.sign=function(s){return s>0?1:s<0?-1:0},g.floor=function(s){return s<0?Math.ceil(s):Math.floor(s)},g.ceil=function(s){return s<0?Math.floor(s):Math.ceil(s)},C.exports=g},function(C,F,A){function g(){}T(g,"Integer"),g.MAX_VALUE=2147483647,g.MIN_VALUE=-2147483648,C.exports=g},function(C,F,A){var g=function(){function n(p,o){for(var e=0;e<o.length;e++){var d=o[e];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(p,d.key,d)}}return T(n,"defineProperties"),function(p,o,e){return o&&n(p.prototype,o),e&&n(p,e),p}}();function s(n,p){if(!(n instanceof p))throw new TypeError("Cannot call a class as a function")}T(s,"_classCallCheck");var i=T(function(n){return{value:n,next:null,prev:null}},"nodeFrom"),r=T(function(n,p,o,e){return n!==null?n.next=p:e.head=p,o!==null?o.prev=p:e.tail=p,p.prev=n,p.next=o,e.length++,p},"add"),t=T(function(n,p){var o=n.prev,e=n.next;return o!==null?o.next=e:p.head=e,e!==null?e.prev=o:p.tail=o,n.prev=n.next=null,p.length--,n},"_remove"),h=function(){function n(p){var o=this;s(this,n),this.length=0,this.head=null,this.tail=null,p?.forEach(function(e){return o.push(e)})}return T(n,"LinkedList"),g(n,[{key:"size",value:T(function(){return this.length},"size")},{key:"insertBefore",value:T(function(p,o){return r(o.prev,i(p),o,this)},"insertBefore")},{key:"insertAfter",value:T(function(p,o){return r(o,i(p),o.next,this)},"insertAfter")},{key:"insertNodeBefore",value:T(function(p,o){return r(o.prev,p,o,this)},"insertNodeBefore")},{key:"insertNodeAfter",value:T(function(p,o){return r(o,p,o.next,this)},"insertNodeAfter")},{key:"push",value:T(function(p){return r(this.tail,i(p),null,this)},"push")},{key:"unshift",value:T(function(p){return r(null,i(p),this.head,this)},"unshift")},{key:"remove",value:T(function(p){return t(p,this)},"remove")},{key:"pop",value:T(function(){return t(this.tail,this).value},"pop")},{key:"popNode",value:T(function(){return t(this.tail,this)},"popNode")},{key:"shift",value:T(function(){return t(this.head,this).value},"shift")},{key:"shiftNode",value:T(function(){return t(this.head,this)},"shiftNode")},{key:"get_object_at",value:T(function(p){if(p<=this.length()){for(var o=1,e=this.head;o<p;)e=e.next,o++;return e.value}},"get_object_at")},{key:"set_object_at",value:T(function(p,o){if(p<=this.length()){for(var e=1,d=this.head;e<p;)d=d.next,e++;d.value=o}},"set_object_at")}]),n}();C.exports=h},function(C,F,A){function g(s,i,r){this.x=null,this.y=null,s==null&&i==null&&r==null?(this.x=0,this.y=0):typeof s=="number"&&typeof i=="number"&&r==null?(this.x=s,this.y=i):s.constructor.name=="Point"&&i==null&&r==null&&(r=s,this.x=r.x,this.y=r.y)}T(g,"Point"),g.prototype.getX=function(){return this.x},g.prototype.getY=function(){return this.y},g.prototype.getLocation=function(){return new g(this.x,this.y)},g.prototype.setLocation=function(s,i,r){s.constructor.name=="Point"&&i==null&&r==null?(r=s,this.setLocation(r.x,r.y)):typeof s=="number"&&typeof i=="number"&&r==null&&(parseInt(s)==s&&parseInt(i)==i?this.move(s,i):(this.x=Math.floor(s+.5),this.y=Math.floor(i+.5)))},g.prototype.move=function(s,i){this.x=s,this.y=i},g.prototype.translate=function(s,i){this.x+=s,this.y+=i},g.prototype.equals=function(s){if(s.constructor.name=="Point"){var i=s;return this.x==i.x&&this.y==i.y}return this==s},g.prototype.toString=function(){return new g().constructor.name+"[x="+this.x+",y="+this.y+"]"},C.exports=g},function(C,F,A){function g(s,i,r,t){this.x=0,this.y=0,this.width=0,this.height=0,s!=null&&i!=null&&r!=null&&t!=null&&(this.x=s,this.y=i,this.width=r,this.height=t)}T(g,"RectangleD"),g.prototype.getX=function(){return this.x},g.prototype.setX=function(s){this.x=s},g.prototype.getY=function(){return this.y},g.prototype.setY=function(s){this.y=s},g.prototype.getWidth=function(){return this.width},g.prototype.setWidth=function(s){this.width=s},g.prototype.getHeight=function(){return this.height},g.prototype.setHeight=function(s){this.height=s},g.prototype.getRight=function(){return this.x+this.width},g.prototype.getBottom=function(){return this.y+this.height},g.prototype.intersects=function(s){return!(this.getRight()<s.x||this.getBottom()<s.y||s.getRight()<this.x||s.getBottom()<this.y)},g.prototype.getCenterX=function(){return this.x+this.width/2},g.prototype.getMinX=function(){return this.getX()},g.prototype.getMaxX=function(){return this.getX()+this.width},g.prototype.getCenterY=function(){return this.y+this.height/2},g.prototype.getMinY=function(){return this.getY()},g.prototype.getMaxY=function(){return this.getY()+this.height},g.prototype.getWidthHalf=function(){return this.width/2},g.prototype.getHeightHalf=function(){return this.height/2},C.exports=g},function(C,F,A){var g=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i};function s(){}T(s,"UniqueIDGeneretor"),s.lastID=0,s.createID=function(i){return s.isPrimitive(i)?i:(i.uniqueID!=null||(i.uniqueID=s.getString(),s.lastID++),i.uniqueID)},s.getString=function(i){return i==null&&(i=s.lastID),"Object#"+i},s.isPrimitive=function(i){var r=typeof i>"u"?"undefined":g(i);return i==null||r!="object"&&r!="function"},C.exports=s},function(C,F,A){function g(d){if(Array.isArray(d)){for(var u=0,l=Array(d.length);u<d.length;u++)l[u]=d[u];return l}else return Array.from(d)}T(g,"_toConsumableArray");var s=A(0),i=A(7),r=A(3),t=A(1),h=A(6),n=A(5),p=A(17),o=A(29);function e(d){o.call(this),this.layoutQuality=s.QUALITY,this.createBendsAsNeeded=s.DEFAULT_CREATE_BENDS_AS_NEEDED,this.incremental=s.DEFAULT_INCREMENTAL,this.animationOnLayout=s.DEFAULT_ANIMATION_ON_LAYOUT,this.animationDuringLayout=s.DEFAULT_ANIMATION_DURING_LAYOUT,this.animationPeriod=s.DEFAULT_ANIMATION_PERIOD,this.uniformLeafNodeSizes=s.DEFAULT_UNIFORM_LEAF_NODE_SIZES,this.edgeToDummyNodes=new Map,this.graphManager=new i(this),this.isLayoutFinished=!1,this.isSubLayout=!1,this.isRemoteUse=!1,d!=null&&(this.isRemoteUse=d)}T(e,"Layout"),e.RANDOM_SEED=1,e.prototype=Object.create(o.prototype),e.prototype.getGraphManager=function(){return this.graphManager},e.prototype.getAllNodes=function(){return this.graphManager.getAllNodes()},e.prototype.getAllEdges=function(){return this.graphManager.getAllEdges()},e.prototype.getAllNodesToApplyGravitation=function(){return this.graphManager.getAllNodesToApplyGravitation()},e.prototype.newGraphManager=function(){var d=new i(this);return this.graphManager=d,d},e.prototype.newGraph=function(d){return new h(null,this.graphManager,d)},e.prototype.newNode=function(d){return new r(this.graphManager,d)},e.prototype.newEdge=function(d){return new t(null,null,d)},e.prototype.checkLayoutSuccess=function(){return this.graphManager.getRoot()==null||this.graphManager.getRoot().getNodes().length==0||this.graphManager.includesInvalidEdge()},e.prototype.runLayout=function(){this.isLayoutFinished=!1,this.tilingPreLayout&&this.tilingPreLayout(),this.initParameters();var d;return this.checkLayoutSuccess()?d=!1:d=this.layout(),s.ANIMATE==="during"?!1:(d&&(this.isSubLayout||this.doPostLayout()),this.tilingPostLayout&&this.tilingPostLayout(),this.isLayoutFinished=!0,d)},e.prototype.doPostLayout=function(){this.incremental||this.transform(),this.update()},e.prototype.update2=function(){if(this.createBendsAsNeeded&&(this.createBendpointsFromDummyNodes(),this.graphManager.resetAllEdges()),!this.isRemoteUse){for(var d,u=this.graphManager.getAllEdges(),l=0;l<u.length;l++)d=u[l];for(var N,c=this.graphManager.getRoot().getNodes(),l=0;l<c.length;l++)N=c[l];this.update(this.graphManager.getRoot())}},e.prototype.update=function(d){if(d==null)this.update2();else if(d instanceof r){var u=d;if(u.getChild()!=null)for(var l=u.getChild().getNodes(),N=0;N<l.length;N++)update(l[N]);if(u.vGraphObject!=null){var c=u.vGraphObject;c.update(u)}}else if(d instanceof t){var E=d;if(E.vGraphObject!=null){var _=E.vGraphObject;_.update(E)}}else if(d instanceof h){var L=d;if(L.vGraphObject!=null){var P=L.vGraphObject;P.update(L)}}},e.prototype.initParameters=function(){this.isSubLayout||(this.layoutQuality=s.QUALITY,this.animationDuringLayout=s.DEFAULT_ANIMATION_DURING_LAYOUT,this.animationPeriod=s.DEFAULT_ANIMATION_PERIOD,this.animationOnLayout=s.DEFAULT_ANIMATION_ON_LAYOUT,this.incremental=s.DEFAULT_INCREMENTAL,this.createBendsAsNeeded=s.DEFAULT_CREATE_BENDS_AS_NEEDED,this.uniformLeafNodeSizes=s.DEFAULT_UNIFORM_LEAF_NODE_SIZES),this.animationDuringLayout&&(this.animationOnLayout=!1)},e.prototype.transform=function(d){if(d==null)this.transform(new n(0,0));else{var u=new p,l=this.graphManager.getRoot().updateLeftTop();if(l!=null){u.setWorldOrgX(d.x),u.setWorldOrgY(d.y),u.setDeviceOrgX(l.x),u.setDeviceOrgY(l.y);for(var N=this.getAllNodes(),c,E=0;E<N.length;E++)c=N[E],c.transform(u)}}},e.prototype.positionNodesRandomly=function(d){if(d==null)this.positionNodesRandomly(this.getGraphManager().getRoot()),this.getGraphManager().getRoot().updateBounds(!0);else for(var u,l,N=d.getNodes(),c=0;c<N.length;c++)u=N[c],l=u.getChild(),l==null||l.getNodes().length==0?u.scatter():(this.positionNodesRandomly(l),u.updateBounds())},e.prototype.getFlatForest=function(){for(var d=[],u=!0,l=this.graphManager.getRoot().getNodes(),N=!0,c=0;c<l.length;c++)l[c].getChild()!=null&&(N=!1);if(!N)return d;var E=new Set,_=[],L=new Map,P=[];for(P=P.concat(l);P.length>0&&u;){for(_.push(P[0]);_.length>0&&u;){var z=_[0];_.splice(0,1),E.add(z);for(var V=z.getEdges(),c=0;c<V.length;c++){var B=V[c].getOtherEnd(z);if(L.get(z)!=B)if(!E.has(B))_.push(B),L.set(B,z);else{u=!1;break}}}if(!u)d=[];else{var q=[].concat(g(E));d.push(q);for(var c=0;c<q.length;c++){var x=q[c],st=P.indexOf(x);st>-1&&P.splice(st,1)}E=new Set,L=new Map}}return d},e.prototype.createDummyNodesForBendpoints=function(d){for(var u=[],l=d.source,N=this.graphManager.calcLowestCommonAncestor(d.source,d.target),c=0;c<d.bendpoints.length;c++){var E=this.newNode(null);E.setRect(new Point(0,0),new Dimension(1,1)),N.add(E);var _=this.newEdge(null);this.graphManager.add(_,l,E),u.add(E),l=E}var _=this.newEdge(null);return this.graphManager.add(_,l,d.target),this.edgeToDummyNodes.set(d,u),d.isInterGraph()?this.graphManager.remove(d):N.remove(d),u},e.prototype.createBendpointsFromDummyNodes=function(){var d=[];d=d.concat(this.graphManager.getAllEdges()),d=[].concat(g(this.edgeToDummyNodes.keys())).concat(d);for(var u=0;u<d.length;u++){var l=d[u];if(l.bendpoints.length>0){for(var N=this.edgeToDummyNodes.get(l),c=0;c<N.length;c++){var E=N[c],_=new n(E.getCenterX(),E.getCenterY()),L=l.bendpoints.get(c);L.x=_.x,L.y=_.y,E.getOwner().remove(E)}this.graphManager.add(l,l.source,l.target)}}},e.transform=function(d,u,l,N){if(l!=null&&N!=null){var c=u;if(d<=50){var E=u/l;c-=(u-E)/50*(50-d)}else{var _=u*N;c+=(_-u)/50*(d-50)}return c}else{var L,P;return d<=50?(L=9*u/500,P=u/10):(L=9*u/50,P=-8*u),L*d+P}},e.findCenterOfTree=function(d){var u=[];u=u.concat(d);var l=[],N=new Map,c=!1,E=null;(u.length==1||u.length==2)&&(c=!0,E=u[0]);for(var _=0;_<u.length;_++){var L=u[_],P=L.getNeighborsList().size;N.set(L,L.getNeighborsList().size),P==1&&l.push(L)}var z=[];for(z=z.concat(l);!c;){var V=[];V=V.concat(z),z=[];for(var _=0;_<u.length;_++){var L=u[_],B=u.indexOf(L);B>=0&&u.splice(B,1);var q=L.getNeighborsList();q.forEach(function(a){if(l.indexOf(a)<0){var y=N.get(a),v=y-1;v==1&&z.push(a),N.set(a,v)}})}l=l.concat(z),(u.length==1||u.length==2)&&(c=!0,E=u[0])}return E},e.prototype.setGraphManager=function(d){this.graphManager=d},C.exports=e},function(C,F,A){function g(){}T(g,"RandomSeed"),g.seed=1,g.x=0,g.nextDouble=function(){return g.x=Math.sin(g.seed++)*1e4,g.x-Math.floor(g.x)},C.exports=g},function(C,F,A){var g=A(5);function s(i,r){this.lworldOrgX=0,this.lworldOrgY=0,this.ldeviceOrgX=0,this.ldeviceOrgY=0,this.lworldExtX=1,this.lworldExtY=1,this.ldeviceExtX=1,this.ldeviceExtY=1}T(s,"Transform"),s.prototype.getWorldOrgX=function(){return this.lworldOrgX},s.prototype.setWorldOrgX=function(i){this.lworldOrgX=i},s.prototype.getWorldOrgY=function(){return this.lworldOrgY},s.prototype.setWorldOrgY=function(i){this.lworldOrgY=i},s.prototype.getWorldExtX=function(){return this.lworldExtX},s.prototype.setWorldExtX=function(i){this.lworldExtX=i},s.prototype.getWorldExtY=function(){return this.lworldExtY},s.prototype.setWorldExtY=function(i){this.lworldExtY=i},s.prototype.getDeviceOrgX=function(){return this.ldeviceOrgX},s.prototype.setDeviceOrgX=function(i){this.ldeviceOrgX=i},s.prototype.getDeviceOrgY=function(){return this.ldeviceOrgY},s.prototype.setDeviceOrgY=function(i){this.ldeviceOrgY=i},s.prototype.getDeviceExtX=function(){return this.ldeviceExtX},s.prototype.setDeviceExtX=function(i){this.ldeviceExtX=i},s.prototype.getDeviceExtY=function(){return this.ldeviceExtY},s.prototype.setDeviceExtY=function(i){this.ldeviceExtY=i},s.prototype.transformX=function(i){var r=0,t=this.lworldExtX;return t!=0&&(r=this.ldeviceOrgX+(i-this.lworldOrgX)*this.ldeviceExtX/t),r},s.prototype.transformY=function(i){var r=0,t=this.lworldExtY;return t!=0&&(r=this.ldeviceOrgY+(i-this.lworldOrgY)*this.ldeviceExtY/t),r},s.prototype.inverseTransformX=function(i){var r=0,t=this.ldeviceExtX;return t!=0&&(r=this.lworldOrgX+(i-this.ldeviceOrgX)*this.lworldExtX/t),r},s.prototype.inverseTransformY=function(i){var r=0,t=this.ldeviceExtY;return t!=0&&(r=this.lworldOrgY+(i-this.ldeviceOrgY)*this.lworldExtY/t),r},s.prototype.inverseTransformPoint=function(i){var r=new g(this.inverseTransformX(i.x),this.inverseTransformY(i.y));return r},C.exports=s},function(C,F,A){function g(o){if(Array.isArray(o)){for(var e=0,d=Array(o.length);e<o.length;e++)d[e]=o[e];return d}else return Array.from(o)}T(g,"_toConsumableArray");var s=A(15),i=A(4),r=A(0),t=A(8),h=A(9);function n(){s.call(this),this.useSmartIdealEdgeLengthCalculation=i.DEFAULT_USE_SMART_IDEAL_EDGE_LENGTH_CALCULATION,this.gravityConstant=i.DEFAULT_GRAVITY_STRENGTH,this.compoundGravityConstant=i.DEFAULT_COMPOUND_GRAVITY_STRENGTH,this.gravityRangeFactor=i.DEFAULT_GRAVITY_RANGE_FACTOR,this.compoundGravityRangeFactor=i.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR,this.displacementThresholdPerNode=3*i.DEFAULT_EDGE_LENGTH/100,this.coolingFactor=i.DEFAULT_COOLING_FACTOR_INCREMENTAL,this.initialCoolingFactor=i.DEFAULT_COOLING_FACTOR_INCREMENTAL,this.totalDisplacement=0,this.oldTotalDisplacement=0,this.maxIterations=i.MAX_ITERATIONS}T(n,"FDLayout"),n.prototype=Object.create(s.prototype);for(var p in s)n[p]=s[p];n.prototype.initParameters=function(){s.prototype.initParameters.call(this,arguments),this.totalIterations=0,this.notAnimatedIterations=0,this.useFRGridVariant=i.DEFAULT_USE_SMART_REPULSION_RANGE_CALCULATION,this.grid=[]},n.prototype.calcIdealEdgeLengths=function(){for(var o,e,d,u,l,N,c,E=this.getGraphManager().getAllEdges(),_=0;_<E.length;_++)o=E[_],e=o.idealLength,o.isInterGraph&&(u=o.getSource(),l=o.getTarget(),N=o.getSourceInLca().getEstimatedSize(),c=o.getTargetInLca().getEstimatedSize(),this.useSmartIdealEdgeLengthCalculation&&(o.idealLength+=N+c-2*r.SIMPLE_NODE_SIZE),d=o.getLca().getInclusionTreeDepth(),o.idealLength+=e*i.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR*(u.getInclusionTreeDepth()+l.getInclusionTreeDepth()-2*d))},n.prototype.initSpringEmbedder=function(){var o=this.getAllNodes().length;this.incremental?(o>i.ADAPTATION_LOWER_NODE_LIMIT&&(this.coolingFactor=Math.max(this.coolingFactor*i.COOLING_ADAPTATION_FACTOR,this.coolingFactor-(o-i.ADAPTATION_LOWER_NODE_LIMIT)/(i.ADAPTATION_UPPER_NODE_LIMIT-i.ADAPTATION_LOWER_NODE_LIMIT)*this.coolingFactor*(1-i.COOLING_ADAPTATION_FACTOR))),this.maxNodeDisplacement=i.MAX_NODE_DISPLACEMENT_INCREMENTAL):(o>i.ADAPTATION_LOWER_NODE_LIMIT?this.coolingFactor=Math.max(i.COOLING_ADAPTATION_FACTOR,1-(o-i.ADAPTATION_LOWER_NODE_LIMIT)/(i.ADAPTATION_UPPER_NODE_LIMIT-i.ADAPTATION_LOWER_NODE_LIMIT)*(1-i.COOLING_ADAPTATION_FACTOR)):this.coolingFactor=1,this.initialCoolingFactor=this.coolingFactor,this.maxNodeDisplacement=i.MAX_NODE_DISPLACEMENT),this.maxIterations=Math.max(this.getAllNodes().length*5,this.maxIterations),this.displacementThresholdPerNode=3*i.DEFAULT_EDGE_LENGTH/100,this.totalDisplacementThreshold=this.displacementThresholdPerNode*this.getAllNodes().length,this.repulsionRange=this.calcRepulsionRange()},n.prototype.calcSpringForces=function(){for(var o=this.getAllEdges(),e,d=0;d<o.length;d++)e=o[d],this.calcSpringForce(e,e.idealLength)},n.prototype.calcRepulsionForces=function(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,d,u,l,N,c=this.getAllNodes(),E;if(this.useFRGridVariant)for(this.totalIterations%i.GRID_CALCULATION_CHECK_PERIOD==1&&o&&this.updateGrid(),E=new Set,d=0;d<c.length;d++)l=c[d],this.calculateRepulsionForceOfANode(l,E,o,e),E.add(l);else for(d=0;d<c.length;d++)for(l=c[d],u=d+1;u<c.length;u++)N=c[u],l.getOwner()==N.getOwner()&&this.calcRepulsionForce(l,N)},n.prototype.calcGravitationalForces=function(){for(var o,e=this.getAllNodesToApplyGravitation(),d=0;d<e.length;d++)o=e[d],this.calcGravitationalForce(o)},n.prototype.moveNodes=function(){for(var o=this.getAllNodes(),e,d=0;d<o.length;d++)e=o[d],e.move()},n.prototype.calcSpringForce=function(o,e){var d=o.getSource(),u=o.getTarget(),l,N,c,E;if(this.uniformLeafNodeSizes&&d.getChild()==null&&u.getChild()==null)o.updateLengthSimple();else if(o.updateLength(),o.isOverlapingSourceAndTarget)return;l=o.getLength(),l!=0&&(N=o.edgeElasticity*(l-e),c=N*(o.lengthX/l),E=N*(o.lengthY/l),d.springForceX+=c,d.springForceY+=E,u.springForceX-=c,u.springForceY-=E)},n.prototype.calcRepulsionForce=function(o,e){var d=o.getRect(),u=e.getRect(),l=new Array(2),N=new Array(4),c,E,_,L,P,z,V;if(d.intersects(u)){t.calcSeparationAmount(d,u,l,i.DEFAULT_EDGE_LENGTH/2),z=2*l[0],V=2*l[1];var B=o.noOfChildren*e.noOfChildren/(o.noOfChildren+e.noOfChildren);o.repulsionForceX-=B*z,o.repulsionForceY-=B*V,e.repulsionForceX+=B*z,e.repulsionForceY+=B*V}else this.uniformLeafNodeSizes&&o.getChild()==null&&e.getChild()==null?(c=u.getCenterX()-d.getCenterX(),E=u.getCenterY()-d.getCenterY()):(t.getIntersection(d,u,N),c=N[2]-N[0],E=N[3]-N[1]),Math.abs(c)<i.MIN_REPULSION_DIST&&(c=h.sign(c)*i.MIN_REPULSION_DIST),Math.abs(E)<i.MIN_REPULSION_DIST&&(E=h.sign(E)*i.MIN_REPULSION_DIST),_=c*c+E*E,L=Math.sqrt(_),P=(o.nodeRepulsion/2+e.nodeRepulsion/2)*o.noOfChildren*e.noOfChildren/_,z=P*c/L,V=P*E/L,o.repulsionForceX-=z,o.repulsionForceY-=V,e.repulsionForceX+=z,e.repulsionForceY+=V},n.prototype.calcGravitationalForce=function(o){var e,d,u,l,N,c,E,_;e=o.getOwner(),d=(e.getRight()+e.getLeft())/2,u=(e.getTop()+e.getBottom())/2,l=o.getCenterX()-d,N=o.getCenterY()-u,c=Math.abs(l)+o.getWidth()/2,E=Math.abs(N)+o.getHeight()/2,o.getOwner()==this.graphManager.getRoot()?(_=e.getEstimatedSize()*this.gravityRangeFactor,(c>_||E>_)&&(o.gravitationForceX=-this.gravityConstant*l,o.gravitationForceY=-this.gravityConstant*N)):(_=e.getEstimatedSize()*this.compoundGravityRangeFactor,(c>_||E>_)&&(o.gravitationForceX=-this.gravityConstant*l*this.compoundGravityConstant,o.gravitationForceY=-this.gravityConstant*N*this.compoundGravityConstant))},n.prototype.isConverged=function(){var o,e=!1;return this.totalIterations>this.maxIterations/3&&(e=Math.abs(this.totalDisplacement-this.oldTotalDisplacement)<2),o=this.totalDisplacement<this.totalDisplacementThreshold,this.oldTotalDisplacement=this.totalDisplacement,o||e},n.prototype.animate=function(){this.animationDuringLayout&&!this.isSubLayout&&(this.notAnimatedIterations==this.animationPeriod?(this.update(),this.notAnimatedIterations=0):this.notAnimatedIterations++)},n.prototype.calcNoOfChildrenForAllNodes=function(){for(var o,e=this.graphManager.getAllNodes(),d=0;d<e.length;d++)o=e[d],o.noOfChildren=o.getNoOfChildren()},n.prototype.calcGrid=function(o){var e=0,d=0;e=parseInt(Math.ceil((o.getRight()-o.getLeft())/this.repulsionRange)),d=parseInt(Math.ceil((o.getBottom()-o.getTop())/this.repulsionRange));for(var u=new Array(e),l=0;l<e;l++)u[l]=new Array(d);for(var l=0;l<e;l++)for(var N=0;N<d;N++)u[l][N]=new Array;return u},n.prototype.addNodeToGrid=function(o,e,d){var u=0,l=0,N=0,c=0;u=parseInt(Math.floor((o.getRect().x-e)/this.repulsionRange)),l=parseInt(Math.floor((o.getRect().width+o.getRect().x-e)/this.repulsionRange)),N=parseInt(Math.floor((o.getRect().y-d)/this.repulsionRange)),c=parseInt(Math.floor((o.getRect().height+o.getRect().y-d)/this.repulsionRange));for(var E=u;E<=l;E++)for(var _=N;_<=c;_++)this.grid[E][_].push(o),o.setGridCoordinates(u,l,N,c)},n.prototype.updateGrid=function(){var o,e,d=this.getAllNodes();for(this.grid=this.calcGrid(this.graphManager.getRoot()),o=0;o<d.length;o++)e=d[o],this.addNodeToGrid(e,this.graphManager.getRoot().getLeft(),this.graphManager.getRoot().getTop())},n.prototype.calculateRepulsionForceOfANode=function(o,e,d,u){if(this.totalIterations%i.GRID_CALCULATION_CHECK_PERIOD==1&&d||u){var l=new Set;o.surrounding=new Array;for(var N,c=this.grid,E=o.startX-1;E<o.finishX+2;E++)for(var _=o.startY-1;_<o.finishY+2;_++)if(!(E<0||_<0||E>=c.length||_>=c[0].length)){for(var L=0;L<c[E][_].length;L++)if(N=c[E][_][L],!(o.getOwner()!=N.getOwner()||o==N)&&!e.has(N)&&!l.has(N)){var P=Math.abs(o.getCenterX()-N.getCenterX())-(o.getWidth()/2+N.getWidth()/2),z=Math.abs(o.getCenterY()-N.getCenterY())-(o.getHeight()/2+N.getHeight()/2);P<=this.repulsionRange&&z<=this.repulsionRange&&l.add(N)}}o.surrounding=[].concat(g(l))}for(E=0;E<o.surrounding.length;E++)this.calcRepulsionForce(o,o.surrounding[E])},n.prototype.calcRepulsionRange=function(){return 0},C.exports=n},function(C,F,A){var g=A(1),s=A(4);function i(t,h,n){g.call(this,t,h,n),this.idealLength=s.DEFAULT_EDGE_LENGTH,this.edgeElasticity=s.DEFAULT_SPRING_STRENGTH}T(i,"FDLayoutEdge"),i.prototype=Object.create(g.prototype);for(var r in g)i[r]=g[r];C.exports=i},function(C,F,A){var g=A(3),s=A(4);function i(t,h,n,p){g.call(this,t,h,n,p),this.nodeRepulsion=s.DEFAULT_REPULSION_STRENGTH,this.springForceX=0,this.springForceY=0,this.repulsionForceX=0,this.repulsionForceY=0,this.gravitationForceX=0,this.gravitationForceY=0,this.displacementX=0,this.displacementY=0,this.startX=0,this.finishX=0,this.startY=0,this.finishY=0,this.surrounding=[]}T(i,"FDLayoutNode"),i.prototype=Object.create(g.prototype);for(var r in g)i[r]=g[r];i.prototype.setGridCoordinates=function(t,h,n,p){this.startX=t,this.finishX=h,this.startY=n,this.finishY=p},C.exports=i},function(C,F,A){function g(s,i){this.width=0,this.height=0,s!==null&&i!==null&&(this.height=i,this.width=s)}T(g,"DimensionD"),g.prototype.getWidth=function(){return this.width},g.prototype.setWidth=function(s){this.width=s},g.prototype.getHeight=function(){return this.height},g.prototype.setHeight=function(s){this.height=s},C.exports=g},function(C,F,A){var g=A(14);function s(){this.map={},this.keys=[]}T(s,"HashMap"),s.prototype.put=function(i,r){var t=g.createID(i);this.contains(t)||(this.map[t]=r,this.keys.push(i))},s.prototype.contains=function(i){return g.createID(i),this.map[i]!=null},s.prototype.get=function(i){var r=g.createID(i);return this.map[r]},s.prototype.keySet=function(){return this.keys},C.exports=s},function(C,F,A){var g=A(14);function s(){this.set={}}T(s,"HashSet"),s.prototype.add=function(i){var r=g.createID(i);this.contains(r)||(this.set[r]=i)},s.prototype.remove=function(i){delete this.set[g.createID(i)]},s.prototype.clear=function(){this.set={}},s.prototype.contains=function(i){return this.set[g.createID(i)]==i},s.prototype.isEmpty=function(){return this.size()===0},s.prototype.size=function(){return Object.keys(this.set).length},s.prototype.addAllTo=function(i){for(var r=Object.keys(this.set),t=r.length,h=0;h<t;h++)i.push(this.set[r[h]])},s.prototype.size=function(){return Object.keys(this.set).length},s.prototype.addAll=function(i){for(var r=i.length,t=0;t<r;t++){var h=i[t];this.add(h)}},C.exports=s},function(C,F,A){function g(){}T(g,"Matrix"),g.multMat=function(s,i){for(var r=[],t=0;t<s.length;t++){r[t]=[];for(var h=0;h<i[0].length;h++){r[t][h]=0;for(var n=0;n<s[0].length;n++)r[t][h]+=s[t][n]*i[n][h]}}return r},g.transpose=function(s){for(var i=[],r=0;r<s[0].length;r++){i[r]=[];for(var t=0;t<s.length;t++)i[r][t]=s[t][r]}return i},g.multCons=function(s,i){for(var r=[],t=0;t<s.length;t++)r[t]=s[t]*i;return r},g.minusOp=function(s,i){for(var r=[],t=0;t<s.length;t++)r[t]=s[t]-i[t];return r},g.dotProduct=function(s,i){for(var r=0,t=0;t<s.length;t++)r+=s[t]*i[t];return r},g.mag=function(s){return Math.sqrt(this.dotProduct(s,s))},g.normalize=function(s){for(var i=[],r=this.mag(s),t=0;t<s.length;t++)i[t]=s[t]/r;return i},g.multGamma=function(s){for(var i=[],r=0,t=0;t<s.length;t++)r+=s[t];r*=-1/s.length;for(var h=0;h<s.length;h++)i[h]=r+s[h];return i},g.multL=function(s,i,r){for(var t=[],h=[],n=[],p=0;p<i[0].length;p++){for(var o=0,e=0;e<i.length;e++)o+=-.5*i[e][p]*s[e];h[p]=o}for(var d=0;d<r.length;d++){for(var u=0,l=0;l<r.length;l++)u+=r[d][l]*h[l];n[d]=u}for(var N=0;N<i.length;N++){for(var c=0,E=0;E<i[0].length;E++)c+=i[N][E]*n[E];t[N]=c}return t},C.exports=g},function(C,F,A){var g=function(){function t(h,n){for(var p=0;p<n.length;p++){var o=n[p];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(h,o.key,o)}}return T(t,"defineProperties"),function(h,n,p){return n&&t(h.prototype,n),p&&t(h,p),h}}();function s(t,h){if(!(t instanceof h))throw new TypeError("Cannot call a class as a function")}T(s,"_classCallCheck");var i=A(11),r=function(){function t(h,n){s(this,t),(n!==null||n!==void 0)&&(this.compareFunction=this._defaultCompareFunction);var p=void 0;h instanceof i?p=h.size():p=h.length,this._quicksort(h,0,p-1)}return T(t,"Quicksort"),g(t,[{key:"_quicksort",value:T(function(h,n,p){if(n<p){var o=this._partition(h,n,p);this._quicksort(h,n,o),this._quicksort(h,o+1,p)}},"_quicksort")},{key:"_partition",value:T(function(h,n,p){for(var o=this._get(h,n),e=n,d=p;;){for(;this.compareFunction(o,this._get(h,d));)d--;for(;this.compareFunction(this._get(h,e),o);)e++;if(e<d)this._swap(h,e,d),e++,d--;else return d}},"_partition")},{key:"_get",value:T(function(h,n){return h instanceof i?h.get_object_at(n):h[n]},"_get")},{key:"_set",value:T(function(h,n,p){h instanceof i?h.set_object_at(n,p):h[n]=p},"_set")},{key:"_swap",value:T(function(h,n,p){var o=this._get(h,n);this._set(h,n,this._get(h,p)),this._set(h,p,o)},"_swap")},{key:"_defaultCompareFunction",value:T(function(h,n){return n>h},"_defaultCompareFunction")}]),t}();C.exports=r},function(C,F,A){function g(){}T(g,"SVD"),g.svd=function(s){this.U=null,this.V=null,this.s=null,this.m=0,this.n=0,this.m=s.length,this.n=s[0].length;var i=Math.min(this.m,this.n);this.s=function(At){for(var wt=[];At-- >0;)wt.push(0);return wt}(Math.min(this.m+1,this.n)),this.U=function(At){var wt=T(function Gt(Pt){if(Pt.length==0)return 0;for(var Bt=[],qt=0;qt<Pt[0];qt++)Bt.push(Gt(Pt.slice(1)));return Bt},"allocate");return wt(At)}([this.m,i]),this.V=function(At){var wt=T(function Gt(Pt){if(Pt.length==0)return 0;for(var Bt=[],qt=0;qt<Pt[0];qt++)Bt.push(Gt(Pt.slice(1)));return Bt},"allocate");return wt(At)}([this.n,this.n]);for(var r=function(At){for(var wt=[];At-- >0;)wt.push(0);return wt}(this.n),t=function(At){for(var wt=[];At-- >0;)wt.push(0);return wt}(this.m),h=!0,n=!0,p=Math.min(this.m-1,this.n),o=Math.max(0,Math.min(this.n-2,this.m)),e=0;e<Math.max(p,o);e++){if(e<p){this.s[e]=0;for(var d=e;d<this.m;d++)this.s[e]=g.hypot(this.s[e],s[d][e]);if(this.s[e]!==0){s[e][e]<0&&(this.s[e]=-this.s[e]);for(var u=e;u<this.m;u++)s[u][e]/=this.s[e];s[e][e]+=1}this.s[e]=-this.s[e]}for(var l=e+1;l<this.n;l++){if(function(At,wt){return At&&wt}(e<p,this.s[e]!==0)){for(var N=0,c=e;c<this.m;c++)N+=s[c][e]*s[c][l];N=-N/s[e][e];for(var E=e;E<this.m;E++)s[E][l]+=N*s[E][e]}r[l]=s[e][l]}if(function(At,wt){return At&&wt}(h,e<p))for(var _=e;_<this.m;_++)this.U[_][e]=s[_][e];if(e<o){r[e]=0;for(var L=e+1;L<this.n;L++)r[e]=g.hypot(r[e],r[L]);if(r[e]!==0){r[e+1]<0&&(r[e]=-r[e]);for(var P=e+1;P<this.n;P++)r[P]/=r[e];r[e+1]+=1}if(r[e]=-r[e],function(At,wt){return At&&wt}(e+1<this.m,r[e]!==0)){for(var z=e+1;z<this.m;z++)t[z]=0;for(var V=e+1;V<this.n;V++)for(var B=e+1;B<this.m;B++)t[B]+=r[V]*s[B][V];for(var q=e+1;q<this.n;q++)for(var x=-r[q]/r[e+1],st=e+1;st<this.m;st++)s[st][q]+=x*t[st]}if(n)for(var a=e+1;a<this.n;a++)this.V[a][e]=r[a]}}var y=Math.min(this.n,this.m+1);if(p<this.n&&(this.s[p]=s[p][p]),this.m<y&&(this.s[y-1]=0),o+1<y&&(r[o]=s[o][y-1]),r[y-1]=0,h){for(var v=p;v<i;v++){for(var m=0;m<this.m;m++)this.U[m][v]=0;this.U[v][v]=1}for(var f=p-1;f>=0;f--)if(this.s[f]!==0){for(var D=f+1;D<i;D++){for(var O=0,M=f;M<this.m;M++)O+=this.U[M][f]*this.U[M][D];O=-O/this.U[f][f];for(var U=f;U<this.m;U++)this.U[U][D]+=O*this.U[U][f]}for(var X=f;X<this.m;X++)this.U[X][f]=-this.U[X][f];this.U[f][f]=1+this.U[f][f];for(var W=0;W<f-1;W++)this.U[W][f]=0}else{for(var j=0;j<this.m;j++)this.U[j][f]=0;this.U[f][f]=1}}if(n)for(var Y=this.n-1;Y>=0;Y--){if(function(At,wt){return At&&wt}(Y<o,r[Y]!==0))for(var K=Y+1;K<i;K++){for(var k=0,b=Y+1;b<this.n;b++)k+=this.V[b][Y]*this.V[b][K];k=-k/this.V[Y+1][Y];for(var G=Y+1;G<this.n;G++)this.V[G][K]+=k*this.V[G][Y]}for(var Z=0;Z<this.n;Z++)this.V[Z][Y]=0;this.V[Y][Y]=1}for(var rt=y-1,ut=0,It=Math.pow(2,-52),Dt=Math.pow(2,-966);y>0;){var S=void 0,it=void 0;for(S=y-2;S>=-1&&S!==-1;S--)if(Math.abs(r[S])<=Dt+It*(Math.abs(this.s[S])+Math.abs(this.s[S+1]))){r[S]=0;break}if(S===y-2)it=4;else{var ht=void 0;for(ht=y-1;ht>=S&&ht!==S;ht--){var mt=(ht!==y?Math.abs(r[ht]):0)+(ht!==S+1?Math.abs(r[ht-1]):0);if(Math.abs(this.s[ht])<=Dt+It*mt){this.s[ht]=0;break}}ht===S?it=3:ht===y-1?it=1:(it=2,S=ht)}switch(S++,it){case 1:{var Ct=r[y-2];r[y-2]=0;for(var yt=y-2;yt>=S;yt--){var Et=g.hypot(this.s[yt],Ct),xt=this.s[yt]/Et,Vt=Ct/Et;if(this.s[yt]=Et,yt!==S&&(Ct=-Vt*r[yt-1],r[yt-1]=xt*r[yt-1]),n)for(var Ut=0;Ut<this.n;Ut++)Et=xt*this.V[Ut][yt]+Vt*this.V[Ut][y-1],this.V[Ut][y-1]=-Vt*this.V[Ut][yt]+xt*this.V[Ut][y-1],this.V[Ut][yt]=Et}}break;case 2:{var kt=r[S-1];r[S-1]=0;for(var Mt=S;Mt<y;Mt++){var Xt=g.hypot(this.s[Mt],kt),Yt=this.s[Mt]/Xt,$t=kt/Xt;if(this.s[Mt]=Xt,kt=-$t*r[Mt],r[Mt]=Yt*r[Mt],h)for(var lt=0;lt<this.m;lt++)Xt=Yt*this.U[lt][Mt]+$t*this.U[lt][S-1],this.U[lt][S-1]=-$t*this.U[lt][Mt]+Yt*this.U[lt][S-1],this.U[lt][Mt]=Xt}}break;case 3:{var I=Math.max(Math.max(Math.max(Math.max(Math.abs(this.s[y-1]),Math.abs(this.s[y-2])),Math.abs(r[y-2])),Math.abs(this.s[S])),Math.abs(r[S])),R=this.s[y-1]/I,$=this.s[y-2]/I,J=r[y-2]/I,Q=this.s[S]/I,pt=r[S]/I,dt=(($+R)*($-R)+J*J)/2,tt=R*J*(R*J),gt=0;(function(At,wt){return At||wt})(dt!==0,tt!==0)&&(gt=Math.sqrt(dt*dt+tt),dt<0&&(gt=-gt),gt=tt/(dt+gt));for(var Nt=(Q+R)*(Q-R)+gt,_t=Q*pt,et=S;et<y-1;et++){var Ot=g.hypot(Nt,_t),nt=Nt/Ot,at=_t/Ot;if(et!==S&&(r[et-1]=Ot),Nt=nt*this.s[et]+at*r[et],r[et]=nt*r[et]-at*this.s[et],_t=at*this.s[et+1],this.s[et+1]=nt*this.s[et+1],n)for(var ot=0;ot<this.n;ot++)Ot=nt*this.V[ot][et]+at*this.V[ot][et+1],this.V[ot][et+1]=-at*this.V[ot][et]+nt*this.V[ot][et+1],this.V[ot][et]=Ot;if(Ot=g.hypot(Nt,_t),nt=Nt/Ot,at=_t/Ot,this.s[et]=Ot,Nt=nt*r[et]+at*this.s[et+1],this.s[et+1]=-at*r[et]+nt*this.s[et+1],_t=at*r[et+1],r[et+1]=nt*r[et+1],h&&et<this.m-1)for(var Tt=0;Tt<this.m;Tt++)Ot=nt*this.U[Tt][et]+at*this.U[Tt][et+1],this.U[Tt][et+1]=-at*this.U[Tt][et]+nt*this.U[Tt][et+1],this.U[Tt][et]=Ot}r[y-2]=Nt,ut=ut+1}break;case 4:{if(this.s[S]<=0&&(this.s[S]=this.s[S]<0?-this.s[S]:0,n))for(var ft=0;ft<=rt;ft++)this.V[ft][S]=-this.V[ft][S];for(;S<rt&&!(this.s[S]>=this.s[S+1]);){var bt=this.s[S];if(this.s[S]=this.s[S+1],this.s[S+1]=bt,n&&S<this.n-1)for(var Rt=0;Rt<this.n;Rt++)bt=this.V[Rt][S+1],this.V[Rt][S+1]=this.V[Rt][S],this.V[Rt][S]=bt;if(h&&S<this.m-1)for(var Ft=0;Ft<this.m;Ft++)bt=this.U[Ft][S+1],this.U[Ft][S+1]=this.U[Ft][S],this.U[Ft][S]=bt;S++}ut=0,y--}break}}var jt={U:this.U,V:this.V,S:this.s};return jt},g.hypot=function(s,i){var r=void 0;return Math.abs(s)>Math.abs(i)?(r=i/s,r=Math.abs(s)*Math.sqrt(1+r*r)):i!=0?(r=s/i,r=Math.abs(i)*Math.sqrt(1+r*r)):r=0,r},C.exports=g},function(C,F,A){var g=function(){function r(t,h){for(var n=0;n<h.length;n++){var p=h[n];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(t,p.key,p)}}return T(r,"defineProperties"),function(t,h,n){return h&&r(t.prototype,h),n&&r(t,n),t}}();function s(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}T(s,"_classCallCheck");var i=function(){function r(t,h){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,p=arguments.length>3&&arguments[3]!==void 0?arguments[3]:-1,o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:-1;s(this,r),this.sequence1=t,this.sequence2=h,this.match_score=n,this.mismatch_penalty=p,this.gap_penalty=o,this.iMax=t.length+1,this.jMax=h.length+1,this.grid=new Array(this.iMax);for(var e=0;e<this.iMax;e++){this.grid[e]=new Array(this.jMax);for(var d=0;d<this.jMax;d++)this.grid[e][d]=0}this.tracebackGrid=new Array(this.iMax);for(var u=0;u<this.iMax;u++){this.tracebackGrid[u]=new Array(this.jMax);for(var l=0;l<this.jMax;l++)this.tracebackGrid[u][l]=[null,null,null]}this.alignments=[],this.score=-1,this.computeGrids()}return T(r,"NeedlemanWunsch"),g(r,[{key:"getScore",value:T(function(){return this.score},"getScore")},{key:"getAlignments",value:T(function(){return this.alignments},"getAlignments")},{key:"computeGrids",value:T(function(){for(var t=1;t<this.jMax;t++)this.grid[0][t]=this.grid[0][t-1]+this.gap_penalty,this.tracebackGrid[0][t]=[!1,!1,!0];for(var h=1;h<this.iMax;h++)this.grid[h][0]=this.grid[h-1][0]+this.gap_penalty,this.tracebackGrid[h][0]=[!1,!0,!1];for(var n=1;n<this.iMax;n++)for(var p=1;p<this.jMax;p++){var o=void 0;this.sequence1[n-1]===this.sequence2[p-1]?o=this.grid[n-1][p-1]+this.match_score:o=this.grid[n-1][p-1]+this.mismatch_penalty;var e=this.grid[n-1][p]+this.gap_penalty,d=this.grid[n][p-1]+this.gap_penalty,u=[o,e,d],l=this.arrayAllMaxIndexes(u);this.grid[n][p]=u[l[0]],this.tracebackGrid[n][p]=[l.includes(0),l.includes(1),l.includes(2)]}this.score=this.grid[this.iMax-1][this.jMax-1]},"computeGrids")},{key:"alignmentTraceback",value:T(function(){var t=[];for(t.push({pos:[this.sequence1.length,this.sequence2.length],seq1:"",seq2:""});t[0];){var h=t[0],n=this.tracebackGrid[h.pos[0]][h.pos[1]];n[0]&&t.push({pos:[h.pos[0]-1,h.pos[1]-1],seq1:this.sequence1[h.pos[0]-1]+h.seq1,seq2:this.sequence2[h.pos[1]-1]+h.seq2}),n[1]&&t.push({pos:[h.pos[0]-1,h.pos[1]],seq1:this.sequence1[h.pos[0]-1]+h.seq1,seq2:"-"+h.seq2}),n[2]&&t.push({pos:[h.pos[0],h.pos[1]-1],seq1:"-"+h.seq1,seq2:this.sequence2[h.pos[1]-1]+h.seq2}),h.pos[0]===0&&h.pos[1]===0&&this.alignments.push({sequence1:h.seq1,sequence2:h.seq2}),t.shift()}return this.alignments},"alignmentTraceback")},{key:"getAllIndexes",value:T(function(t,h){for(var n=[],p=-1;(p=t.indexOf(h,p+1))!==-1;)n.push(p);return n},"getAllIndexes")},{key:"arrayAllMaxIndexes",value:T(function(t){return this.getAllIndexes(t,Math.max.apply(null,t))},"arrayAllMaxIndexes")}]),r}();C.exports=i},function(C,F,A){var g=T(function(){},"layoutBase");g.FDLayout=A(18),g.FDLayoutConstants=A(4),g.FDLayoutEdge=A(19),g.FDLayoutNode=A(20),g.DimensionD=A(21),g.HashMap=A(22),g.HashSet=A(23),g.IGeometry=A(8),g.IMath=A(9),g.Integer=A(10),g.Point=A(12),g.PointD=A(5),g.RandomSeed=A(16),g.RectangleD=A(13),g.Transform=A(17),g.UniqueIDGeneretor=A(14),g.Quicksort=A(25),g.LinkedList=A(11),g.LGraphObject=A(2),g.LGraph=A(6),g.LEdge=A(1),g.LGraphManager=A(7),g.LNode=A(3),g.Layout=A(15),g.LayoutConstants=A(0),g.NeedlemanWunsch=A(27),g.Matrix=A(24),g.SVD=A(26),C.exports=g},function(C,F,A){function g(){this.listeners=[]}T(g,"Emitter");var s=g.prototype;s.addListener=function(i,r){this.listeners.push({event:i,callback:r})},s.removeListener=function(i,r){for(var t=this.listeners.length;t>=0;t--){var h=this.listeners[t];h.event===i&&h.callback===r&&this.listeners.splice(t,1)}},s.emit=function(i,r){for(var t=0;t<this.listeners.length;t++){var h=this.listeners[t];i===h.event&&h.callback(r)}},C.exports=g}])})}),Le=me((w,H)=>{T(function(C,F){typeof w=="object"&&typeof H=="object"?H.exports=F(_e()):typeof define=="function"&&define.amd?define(["layout-base"],F):typeof w=="object"?w.coseBase=F(_e()):C.coseBase=F(C.layoutBase)},"webpackUniversalModuleDefinition")(w,function(C){return(()=>{var F={45:(i,r,t)=>{var h={};h.layoutBase=t(551),h.CoSEConstants=t(806),h.CoSEEdge=t(767),h.CoSEGraph=t(880),h.CoSEGraphManager=t(578),h.CoSELayout=t(765),h.CoSENode=t(991),h.ConstraintHandler=t(902),i.exports=h},806:(i,r,t)=>{var h=t(551).FDLayoutConstants;function n(){}T(n,"CoSEConstants");for(var p in h)n[p]=h[p];n.DEFAULT_USE_MULTI_LEVEL_SCALING=!1,n.DEFAULT_RADIAL_SEPARATION=h.DEFAULT_EDGE_LENGTH,n.DEFAULT_COMPONENT_SEPERATION=60,n.TILE=!0,n.TILING_PADDING_VERTICAL=10,n.TILING_PADDING_HORIZONTAL=10,n.TRANSFORM_ON_CONSTRAINT_HANDLING=!0,n.ENFORCE_CONSTRAINTS=!0,n.APPLY_LAYOUT=!0,n.RELAX_MOVEMENT_ON_CONSTRAINTS=!0,n.TREE_REDUCTION_ON_INCREMENTAL=!0,n.PURE_INCREMENTAL=n.DEFAULT_INCREMENTAL,i.exports=n},767:(i,r,t)=>{var h=t(551).FDLayoutEdge;function n(o,e,d){h.call(this,o,e,d)}T(n,"CoSEEdge"),n.prototype=Object.create(h.prototype);for(var p in h)n[p]=h[p];i.exports=n},880:(i,r,t)=>{var h=t(551).LGraph;function n(o,e,d){h.call(this,o,e,d)}T(n,"CoSEGraph"),n.prototype=Object.create(h.prototype);for(var p in h)n[p]=h[p];i.exports=n},578:(i,r,t)=>{var h=t(551).LGraphManager;function n(o){h.call(this,o)}T(n,"CoSEGraphManager"),n.prototype=Object.create(h.prototype);for(var p in h)n[p]=h[p];i.exports=n},765:(i,r,t)=>{var h=t(551).FDLayout,n=t(578),p=t(880),o=t(991),e=t(767),d=t(806),u=t(902),l=t(551).FDLayoutConstants,N=t(551).LayoutConstants,c=t(551).Point,E=t(551).PointD,_=t(551).DimensionD,L=t(551).Layout,P=t(551).Integer,z=t(551).IGeometry,V=t(551).LGraph,B=t(551).Transform,q=t(551).LinkedList;function x(){h.call(this),this.toBeTiled={},this.constraints={}}T(x,"CoSELayout"),x.prototype=Object.create(h.prototype);for(var st in h)x[st]=h[st];x.prototype.newGraphManager=function(){var a=new n(this);return this.graphManager=a,a},x.prototype.newGraph=function(a){return new p(null,this.graphManager,a)},x.prototype.newNode=function(a){return new o(this.graphManager,a)},x.prototype.newEdge=function(a){return new e(null,null,a)},x.prototype.initParameters=function(){h.prototype.initParameters.call(this,arguments),this.isSubLayout||(d.DEFAULT_EDGE_LENGTH<10?this.idealEdgeLength=10:this.idealEdgeLength=d.DEFAULT_EDGE_LENGTH,this.useSmartIdealEdgeLengthCalculation=d.DEFAULT_USE_SMART_IDEAL_EDGE_LENGTH_CALCULATION,this.gravityConstant=l.DEFAULT_GRAVITY_STRENGTH,this.compoundGravityConstant=l.DEFAULT_COMPOUND_GRAVITY_STRENGTH,this.gravityRangeFactor=l.DEFAULT_GRAVITY_RANGE_FACTOR,this.compoundGravityRangeFactor=l.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR,this.prunedNodesAll=[],this.growTreeIterations=0,this.afterGrowthIterations=0,this.isTreeGrowing=!1,this.isGrowthFinished=!1)},x.prototype.initSpringEmbedder=function(){h.prototype.initSpringEmbedder.call(this),this.coolingCycle=0,this.maxCoolingCycle=this.maxIterations/l.CONVERGENCE_CHECK_PERIOD,this.finalTemperature=.04,this.coolingAdjuster=1},x.prototype.layout=function(){var a=N.DEFAULT_CREATE_BENDS_AS_NEEDED;return a&&(this.createBendpoints(),this.graphManager.resetAllEdges()),this.level=0,this.classicLayout()},x.prototype.classicLayout=function(){if(this.nodesWithGravity=this.calculateNodesToApplyGravitationTo(),this.graphManager.setAllNodesToApplyGravitation(this.nodesWithGravity),this.calcNoOfChildrenForAllNodes(),this.graphManager.calcLowestCommonAncestors(),this.graphManager.calcInclusionTreeDepths(),this.graphManager.getRoot().calcEstimatedSize(),this.calcIdealEdgeLengths(),this.incremental){if(d.TREE_REDUCTION_ON_INCREMENTAL){this.reduceTrees(),this.graphManager.resetAllNodesToApplyGravitation();var a=new Set(this.getAllNodes()),y=this.nodesWithGravity.filter(function(m){return a.has(m)});this.graphManager.setAllNodesToApplyGravitation(y)}}else{var v=this.getFlatForest();if(v.length>0)this.positionNodesRadially(v);else{this.reduceTrees(),this.graphManager.resetAllNodesToApplyGravitation();var a=new Set(this.getAllNodes()),y=this.nodesWithGravity.filter(function(D){return a.has(D)});this.graphManager.setAllNodesToApplyGravitation(y),this.positionNodesRandomly()}}return Object.keys(this.constraints).length>0&&(u.handleConstraints(this),this.initConstraintVariables()),this.initSpringEmbedder(),d.APPLY_LAYOUT&&this.runSpringEmbedder(),!0},x.prototype.tick=function(){if(this.totalIterations++,this.totalIterations===this.maxIterations&&!this.isTreeGrowing&&!this.isGrowthFinished)if(this.prunedNodesAll.length>0)this.isTreeGrowing=!0;else return!0;if(this.totalIterations%l.CONVERGENCE_CHECK_PERIOD==0&&!this.isTreeGrowing&&!this.isGrowthFinished){if(this.isConverged())if(this.prunedNodesAll.length>0)this.isTreeGrowing=!0;else return!0;this.coolingCycle++,this.layoutQuality==0?this.coolingAdjuster=this.coolingCycle:this.layoutQuality==1&&(this.coolingAdjuster=this.coolingCycle/3),this.coolingFactor=Math.max(this.initialCoolingFactor-Math.pow(this.coolingCycle,Math.log(100*(this.initialCoolingFactor-this.finalTemperature))/Math.log(this.maxCoolingCycle))/100*this.coolingAdjuster,this.finalTemperature),this.animationPeriod=Math.ceil(this.initialAnimationPeriod*Math.sqrt(this.coolingFactor))}if(this.isTreeGrowing){if(this.growTreeIterations%10==0)if(this.prunedNodesAll.length>0){this.graphManager.updateBounds(),this.updateGrid(),this.growTree(this.prunedNodesAll),this.graphManager.resetAllNodesToApplyGravitation();var a=new Set(this.getAllNodes()),y=this.nodesWithGravity.filter(function(f){return a.has(f)});this.graphManager.setAllNodesToApplyGravitation(y),this.graphManager.updateBounds(),this.updateGrid(),d.PURE_INCREMENTAL?this.coolingFactor=l.DEFAULT_COOLING_FACTOR_INCREMENTAL/2:this.coolingFactor=l.DEFAULT_COOLING_FACTOR_INCREMENTAL}else this.isTreeGrowing=!1,this.isGrowthFinished=!0;this.growTreeIterations++}if(this.isGrowthFinished){if(this.isConverged())return!0;this.afterGrowthIterations%10==0&&(this.graphManager.updateBounds(),this.updateGrid()),d.PURE_INCREMENTAL?this.coolingFactor=l.DEFAULT_COOLING_FACTOR_INCREMENTAL/2*((100-this.afterGrowthIterations)/100):this.coolingFactor=l.DEFAULT_COOLING_FACTOR_INCREMENTAL*((100-this.afterGrowthIterations)/100),this.afterGrowthIterations++}var v=!this.isTreeGrowing&&!this.isGrowthFinished,m=this.growTreeIterations%10==1&&this.isTreeGrowing||this.afterGrowthIterations%10==1&&this.isGrowthFinished;return this.totalDisplacement=0,this.graphManager.updateBounds(),this.calcSpringForces(),this.calcRepulsionForces(v,m),this.calcGravitationalForces(),this.moveNodes(),this.animate(),!1},x.prototype.getPositionsData=function(){for(var a=this.graphManager.getAllNodes(),y={},v=0;v<a.length;v++){var m=a[v].rect,f=a[v].id;y[f]={id:f,x:m.getCenterX(),y:m.getCenterY(),w:m.width,h:m.height}}return y},x.prototype.runSpringEmbedder=function(){this.initialAnimationPeriod=25,this.animationPeriod=this.initialAnimationPeriod;var a=!1;if(l.ANIMATE==="during")this.emit("layoutstarted");else{for(;!a;)a=this.tick();this.graphManager.updateBounds()}},x.prototype.moveNodes=function(){for(var a=this.getAllNodes(),y,v=0;v<a.length;v++)y=a[v],y.calculateDisplacement();Object.keys(this.constraints).length>0&&this.updateDisplacements();for(var v=0;v<a.length;v++)y=a[v],y.move()},x.prototype.initConstraintVariables=function(){var a=this;this.idToNodeMap=new Map,this.fixedNodeSet=new Set;for(var y=this.graphManager.getAllNodes(),v=0;v<y.length;v++){var m=y[v];this.idToNodeMap.set(m.id,m)}var f=T(function b(G){for(var Z=G.getChild().getNodes(),rt,ut=0,It=0;It<Z.length;It++)rt=Z[It],rt.getChild()==null?a.fixedNodeSet.has(rt.id)&&(ut+=100):ut+=b(rt);return ut},"calculateCompoundWeight");if(this.constraints.fixedNodeConstraint){this.constraints.fixedNodeConstraint.forEach(function(b){a.fixedNodeSet.add(b.nodeId)});for(var y=this.graphManager.getAllNodes(),m,v=0;v<y.length;v++)if(m=y[v],m.getChild()!=null){var D=f(m);D>0&&(m.fixedNodeWeight=D)}}if(this.constraints.relativePlacementConstraint){var O=new Map,M=new Map;if(this.dummyToNodeForVerticalAlignment=new Map,this.dummyToNodeForHorizontalAlignment=new Map,this.fixedNodesOnHorizontal=new Set,this.fixedNodesOnVertical=new Set,this.fixedNodeSet.forEach(function(b){a.fixedNodesOnHorizontal.add(b),a.fixedNodesOnVertical.add(b)}),this.constraints.alignmentConstraint){if(this.constraints.alignmentConstraint.vertical)for(var U=this.constraints.alignmentConstraint.vertical,v=0;v<U.length;v++)this.dummyToNodeForVerticalAlignment.set("dummy"+v,[]),U[v].forEach(function(G){O.set(G,"dummy"+v),a.dummyToNodeForVerticalAlignment.get("dummy"+v).push(G),a.fixedNodeSet.has(G)&&a.fixedNodesOnHorizontal.add("dummy"+v)});if(this.constraints.alignmentConstraint.horizontal)for(var X=this.constraints.alignmentConstraint.horizontal,v=0;v<X.length;v++)this.dummyToNodeForHorizontalAlignment.set("dummy"+v,[]),X[v].forEach(function(G){M.set(G,"dummy"+v),a.dummyToNodeForHorizontalAlignment.get("dummy"+v).push(G),a.fixedNodeSet.has(G)&&a.fixedNodesOnVertical.add("dummy"+v)})}if(d.RELAX_MOVEMENT_ON_CONSTRAINTS)this.shuffle=function(b){var G,Z,rt;for(rt=b.length-1;rt>=2*b.length/3;rt--)G=Math.floor(Math.random()*(rt+1)),Z=b[rt],b[rt]=b[G],b[G]=Z;return b},this.nodesInRelativeHorizontal=[],this.nodesInRelativeVertical=[],this.nodeToRelativeConstraintMapHorizontal=new Map,this.nodeToRelativeConstraintMapVertical=new Map,this.nodeToTempPositionMapHorizontal=new Map,this.nodeToTempPositionMapVertical=new Map,this.constraints.relativePlacementConstraint.forEach(function(b){if(b.left){var G=O.has(b.left)?O.get(b.left):b.left,Z=O.has(b.right)?O.get(b.right):b.right;a.nodesInRelativeHorizontal.includes(G)||(a.nodesInRelativeHorizontal.push(G),a.nodeToRelativeConstraintMapHorizontal.set(G,[]),a.dummyToNodeForVerticalAlignment.has(G)?a.nodeToTempPositionMapHorizontal.set(G,a.idToNodeMap.get(a.dummyToNodeForVerticalAlignment.get(G)[0]).getCenterX()):a.nodeToTempPositionMapHorizontal.set(G,a.idToNodeMap.get(G).getCenterX())),a.nodesInRelativeHorizontal.includes(Z)||(a.nodesInRelativeHorizontal.push(Z),a.nodeToRelativeConstraintMapHorizontal.set(Z,[]),a.dummyToNodeForVerticalAlignment.has(Z)?a.nodeToTempPositionMapHorizontal.set(Z,a.idToNodeMap.get(a.dummyToNodeForVerticalAlignment.get(Z)[0]).getCenterX()):a.nodeToTempPositionMapHorizontal.set(Z,a.idToNodeMap.get(Z).getCenterX())),a.nodeToRelativeConstraintMapHorizontal.get(G).push({right:Z,gap:b.gap}),a.nodeToRelativeConstraintMapHorizontal.get(Z).push({left:G,gap:b.gap})}else{var rt=M.has(b.top)?M.get(b.top):b.top,ut=M.has(b.bottom)?M.get(b.bottom):b.bottom;a.nodesInRelativeVertical.includes(rt)||(a.nodesInRelativeVertical.push(rt),a.nodeToRelativeConstraintMapVertical.set(rt,[]),a.dummyToNodeForHorizontalAlignment.has(rt)?a.nodeToTempPositionMapVertical.set(rt,a.idToNodeMap.get(a.dummyToNodeForHorizontalAlignment.get(rt)[0]).getCenterY()):a.nodeToTempPositionMapVertical.set(rt,a.idToNodeMap.get(rt).getCenterY())),a.nodesInRelativeVertical.includes(ut)||(a.nodesInRelativeVertical.push(ut),a.nodeToRelativeConstraintMapVertical.set(ut,[]),a.dummyToNodeForHorizontalAlignment.has(ut)?a.nodeToTempPositionMapVertical.set(ut,a.idToNodeMap.get(a.dummyToNodeForHorizontalAlignment.get(ut)[0]).getCenterY()):a.nodeToTempPositionMapVertical.set(ut,a.idToNodeMap.get(ut).getCenterY())),a.nodeToRelativeConstraintMapVertical.get(rt).push({bottom:ut,gap:b.gap}),a.nodeToRelativeConstraintMapVertical.get(ut).push({top:rt,gap:b.gap})}});else{var W=new Map,j=new Map;this.constraints.relativePlacementConstraint.forEach(function(b){if(b.left){var G=O.has(b.left)?O.get(b.left):b.left,Z=O.has(b.right)?O.get(b.right):b.right;W.has(G)?W.get(G).push(Z):W.set(G,[Z]),W.has(Z)?W.get(Z).push(G):W.set(Z,[G])}else{var rt=M.has(b.top)?M.get(b.top):b.top,ut=M.has(b.bottom)?M.get(b.bottom):b.bottom;j.has(rt)?j.get(rt).push(ut):j.set(rt,[ut]),j.has(ut)?j.get(ut).push(rt):j.set(ut,[rt])}});var Y=T(function(b,G){var Z=[],rt=[],ut=new q,It=new Set,Dt=0;return b.forEach(function(S,it){if(!It.has(it)){Z[Dt]=[],rt[Dt]=!1;var ht=it;for(ut.push(ht),It.add(ht),Z[Dt].push(ht);ut.length!=0;){ht=ut.shift(),G.has(ht)&&(rt[Dt]=!0);var mt=b.get(ht);mt.forEach(function(Ct){It.has(Ct)||(ut.push(Ct),It.add(Ct),Z[Dt].push(Ct))})}Dt++}}),{components:Z,isFixed:rt}},"constructComponents"),K=Y(W,a.fixedNodesOnHorizontal);this.componentsOnHorizontal=K.components,this.fixedComponentsOnHorizontal=K.isFixed;var k=Y(j,a.fixedNodesOnVertical);this.componentsOnVertical=k.components,this.fixedComponentsOnVertical=k.isFixed}}},x.prototype.updateDisplacements=function(){var a=this;if(this.constraints.fixedNodeConstraint&&this.constraints.fixedNodeConstraint.forEach(function(k){var b=a.idToNodeMap.get(k.nodeId);b.displacementX=0,b.displacementY=0}),this.constraints.alignmentConstraint){if(this.constraints.alignmentConstraint.vertical)for(var y=this.constraints.alignmentConstraint.vertical,v=0;v<y.length;v++){for(var m=0,f=0;f<y[v].length;f++){if(this.fixedNodeSet.has(y[v][f])){m=0;break}m+=this.idToNodeMap.get(y[v][f]).displacementX}for(var D=m/y[v].length,f=0;f<y[v].length;f++)this.idToNodeMap.get(y[v][f]).displacementX=D}if(this.constraints.alignmentConstraint.horizontal)for(var O=this.constraints.alignmentConstraint.horizontal,v=0;v<O.length;v++){for(var M=0,f=0;f<O[v].length;f++){if(this.fixedNodeSet.has(O[v][f])){M=0;break}M+=this.idToNodeMap.get(O[v][f]).displacementY}for(var U=M/O[v].length,f=0;f<O[v].length;f++)this.idToNodeMap.get(O[v][f]).displacementY=U}}if(this.constraints.relativePlacementConstraint)if(d.RELAX_MOVEMENT_ON_CONSTRAINTS)this.totalIterations%10==0&&(this.shuffle(this.nodesInRelativeHorizontal),this.shuffle(this.nodesInRelativeVertical)),this.nodesInRelativeHorizontal.forEach(function(k){if(!a.fixedNodesOnHorizontal.has(k)){var b=0;a.dummyToNodeForVerticalAlignment.has(k)?b=a.idToNodeMap.get(a.dummyToNodeForVerticalAlignment.get(k)[0]).displacementX:b=a.idToNodeMap.get(k).displacementX,a.nodeToRelativeConstraintMapHorizontal.get(k).forEach(function(G){if(G.right){var Z=a.nodeToTempPositionMapHorizontal.get(G.right)-a.nodeToTempPositionMapHorizontal.get(k)-b;Z<G.gap&&(b-=G.gap-Z)}else{var Z=a.nodeToTempPositionMapHorizontal.get(k)-a.nodeToTempPositionMapHorizontal.get(G.left)+b;Z<G.gap&&(b+=G.gap-Z)}}),a.nodeToTempPositionMapHorizontal.set(k,a.nodeToTempPositionMapHorizontal.get(k)+b),a.dummyToNodeForVerticalAlignment.has(k)?a.dummyToNodeForVerticalAlignment.get(k).forEach(function(G){a.idToNodeMap.get(G).displacementX=b}):a.idToNodeMap.get(k).displacementX=b}}),this.nodesInRelativeVertical.forEach(function(k){if(!a.fixedNodesOnHorizontal.has(k)){var b=0;a.dummyToNodeForHorizontalAlignment.has(k)?b=a.idToNodeMap.get(a.dummyToNodeForHorizontalAlignment.get(k)[0]).displacementY:b=a.idToNodeMap.get(k).displacementY,a.nodeToRelativeConstraintMapVertical.get(k).forEach(function(G){if(G.bottom){var Z=a.nodeToTempPositionMapVertical.get(G.bottom)-a.nodeToTempPositionMapVertical.get(k)-b;Z<G.gap&&(b-=G.gap-Z)}else{var Z=a.nodeToTempPositionMapVertical.get(k)-a.nodeToTempPositionMapVertical.get(G.top)+b;Z<G.gap&&(b+=G.gap-Z)}}),a.nodeToTempPositionMapVertical.set(k,a.nodeToTempPositionMapVertical.get(k)+b),a.dummyToNodeForHorizontalAlignment.has(k)?a.dummyToNodeForHorizontalAlignment.get(k).forEach(function(G){a.idToNodeMap.get(G).displacementY=b}):a.idToNodeMap.get(k).displacementY=b}});else{for(var v=0;v<this.componentsOnHorizontal.length;v++){var X=this.componentsOnHorizontal[v];if(this.fixedComponentsOnHorizontal[v])for(var f=0;f<X.length;f++)this.dummyToNodeForVerticalAlignment.has(X[f])?this.dummyToNodeForVerticalAlignment.get(X[f]).forEach(function(G){a.idToNodeMap.get(G).displacementX=0}):this.idToNodeMap.get(X[f]).displacementX=0;else{for(var W=0,j=0,f=0;f<X.length;f++)if(this.dummyToNodeForVerticalAlignment.has(X[f])){var Y=this.dummyToNodeForVerticalAlignment.get(X[f]);W+=Y.length*this.idToNodeMap.get(Y[0]).displacementX,j+=Y.length}else W+=this.idToNodeMap.get(X[f]).displacementX,j++;for(var K=W/j,f=0;f<X.length;f++)this.dummyToNodeForVerticalAlignment.has(X[f])?this.dummyToNodeForVerticalAlignment.get(X[f]).forEach(function(G){a.idToNodeMap.get(G).displacementX=K}):this.idToNodeMap.get(X[f]).displacementX=K}}for(var v=0;v<this.componentsOnVertical.length;v++){var X=this.componentsOnVertical[v];if(this.fixedComponentsOnVertical[v])for(var f=0;f<X.length;f++)this.dummyToNodeForHorizontalAlignment.has(X[f])?this.dummyToNodeForHorizontalAlignment.get(X[f]).forEach(function(Z){a.idToNodeMap.get(Z).displacementY=0}):this.idToNodeMap.get(X[f]).displacementY=0;else{for(var W=0,j=0,f=0;f<X.length;f++)if(this.dummyToNodeForHorizontalAlignment.has(X[f])){var Y=this.dummyToNodeForHorizontalAlignment.get(X[f]);W+=Y.length*this.idToNodeMap.get(Y[0]).displacementY,j+=Y.length}else W+=this.idToNodeMap.get(X[f]).displacementY,j++;for(var K=W/j,f=0;f<X.length;f++)this.dummyToNodeForHorizontalAlignment.has(X[f])?this.dummyToNodeForHorizontalAlignment.get(X[f]).forEach(function(rt){a.idToNodeMap.get(rt).displacementY=K}):this.idToNodeMap.get(X[f]).displacementY=K}}}},x.prototype.calculateNodesToApplyGravitationTo=function(){var a=[],y,v=this.graphManager.getGraphs(),m=v.length,f;for(f=0;f<m;f++)y=v[f],y.updateConnected(),y.isConnected||(a=a.concat(y.getNodes()));return a},x.prototype.createBendpoints=function(){var a=[];a=a.concat(this.graphManager.getAllEdges());var y=new Set,v;for(v=0;v<a.length;v++){var m=a[v];if(!y.has(m)){var f=m.getSource(),D=m.getTarget();if(f==D)m.getBendpoints().push(new E),m.getBendpoints().push(new E),this.createDummyNodesForBendpoints(m),y.add(m);else{var O=[];if(O=O.concat(f.getEdgeListToNode(D)),O=O.concat(D.getEdgeListToNode(f)),!y.has(O[0])){if(O.length>1){var M;for(M=0;M<O.length;M++){var U=O[M];U.getBendpoints().push(new E),this.createDummyNodesForBendpoints(U)}}O.forEach(function(X){y.add(X)})}}}if(y.size==a.length)break}},x.prototype.positionNodesRadially=function(a){for(var y=new c(0,0),v=Math.ceil(Math.sqrt(a.length)),m=0,f=0,D=0,O=new E(0,0),M=0;M<a.length;M++){M%v==0&&(D=0,f=m,M!=0&&(f+=d.DEFAULT_COMPONENT_SEPERATION),m=0);var U=a[M],X=L.findCenterOfTree(U);y.x=D,y.y=f,O=x.radialLayout(U,X,y),O.y>m&&(m=Math.floor(O.y)),D=Math.floor(O.x+d.DEFAULT_COMPONENT_SEPERATION)}this.transform(new E(N.WORLD_CENTER_X-O.x/2,N.WORLD_CENTER_Y-O.y/2))},x.radialLayout=function(a,y,v){var m=Math.max(this.maxDiagonalInTree(a),d.DEFAULT_RADIAL_SEPARATION);x.branchRadialLayout(y,null,0,359,0,m);var f=V.calculateBounds(a),D=new B;D.setDeviceOrgX(f.getMinX()),D.setDeviceOrgY(f.getMinY()),D.setWorldOrgX(v.x),D.setWorldOrgY(v.y);for(var O=0;O<a.length;O++){var M=a[O];M.transform(D)}var U=new E(f.getMaxX(),f.getMaxY());return D.inverseTransformPoint(U)},x.branchRadialLayout=function(a,y,v,m,f,D){var O=(m-v+1)/2;O<0&&(O+=180);var M=(O+v)%360,U=M*z.TWO_PI/360,X=f*Math.cos(U),W=f*Math.sin(U);a.setCenter(X,W);var j=[];j=j.concat(a.getEdges());var Y=j.length;y!=null&&Y--;for(var K=0,k=j.length,b,G=a.getEdgesBetween(y);G.length>1;){var Z=G[0];G.splice(0,1);var rt=j.indexOf(Z);rt>=0&&j.splice(rt,1),k--,Y--}y!=null?b=(j.indexOf(G[0])+1)%k:b=0;for(var ut=Math.abs(m-v)/Y,It=b;K!=Y;It=++It%k){var Dt=j[It].getOtherEnd(a);if(Dt!=y){var S=(v+K*ut)%360,it=(S+ut)%360;x.branchRadialLayout(Dt,a,S,it,f+D,D),K++}}},x.maxDiagonalInTree=function(a){for(var y=P.MIN_VALUE,v=0;v<a.length;v++){var m=a[v],f=m.getDiagonal();f>y&&(y=f)}return y},x.prototype.calcRepulsionRange=function(){return 2*(this.level+1)*this.idealEdgeLength},x.prototype.groupZeroDegreeMembers=function(){var a=this,y={};this.memberGroups={},this.idToDummyNode={};for(var v=[],m=this.graphManager.getAllNodes(),f=0;f<m.length;f++){var D=m[f],O=D.getParent();this.getNodeDegreeWithChildren(D)===0&&(O.id==null||!this.getToBeTiled(O))&&v.push(D)}for(var f=0;f<v.length;f++){var D=v[f],M=D.getParent().id;typeof y[M]>"u"&&(y[M]=[]),y[M]=y[M].concat(D)}Object.keys(y).forEach(function(U){if(y[U].length>1){var X="DummyCompound_"+U;a.memberGroups[X]=y[U];var W=y[U][0].getParent(),j=new o(a.graphManager);j.id=X,j.paddingLeft=W.paddingLeft||0,j.paddingRight=W.paddingRight||0,j.paddingBottom=W.paddingBottom||0,j.paddingTop=W.paddingTop||0,a.idToDummyNode[X]=j;var Y=a.getGraphManager().add(a.newGraph(),j),K=W.getChild();K.add(j);for(var k=0;k<y[U].length;k++){var b=y[U][k];K.remove(b),Y.add(b)}}})},x.prototype.clearCompounds=function(){var a={},y={};this.performDFSOnCompounds();for(var v=0;v<this.compoundOrder.length;v++)y[this.compoundOrder[v].id]=this.compoundOrder[v],a[this.compoundOrder[v].id]=[].concat(this.compoundOrder[v].getChild().getNodes()),this.graphManager.remove(this.compoundOrder[v].getChild()),this.compoundOrder[v].child=null;this.graphManager.resetAllNodes(),this.tileCompoundMembers(a,y)},x.prototype.clearZeroDegreeMembers=function(){var a=this,y=this.tiledZeroDegreePack=[];Object.keys(this.memberGroups).forEach(function(v){var m=a.idToDummyNode[v];if(y[v]=a.tileNodes(a.memberGroups[v],m.paddingLeft+m.paddingRight),m.rect.width=y[v].width,m.rect.height=y[v].height,m.setCenter(y[v].centerX,y[v].centerY),m.labelMarginLeft=0,m.labelMarginTop=0,d.NODE_DIMENSIONS_INCLUDE_LABELS){var f=m.rect.width,D=m.rect.height;m.labelWidth&&(m.labelPosHorizontal=="left"?(m.rect.x-=m.labelWidth,m.setWidth(f+m.labelWidth),m.labelMarginLeft=m.labelWidth):m.labelPosHorizontal=="center"&&m.labelWidth>f?(m.rect.x-=(m.labelWidth-f)/2,m.setWidth(m.labelWidth),m.labelMarginLeft=(m.labelWidth-f)/2):m.labelPosHorizontal=="right"&&m.setWidth(f+m.labelWidth)),m.labelHeight&&(m.labelPosVertical=="top"?(m.rect.y-=m.labelHeight,m.setHeight(D+m.labelHeight),m.labelMarginTop=m.labelHeight):m.labelPosVertical=="center"&&m.labelHeight>D?(m.rect.y-=(m.labelHeight-D)/2,m.setHeight(m.labelHeight),m.labelMarginTop=(m.labelHeight-D)/2):m.labelPosVertical=="bottom"&&m.setHeight(D+m.labelHeight))}})},x.prototype.repopulateCompounds=function(){for(var a=this.compoundOrder.length-1;a>=0;a--){var y=this.compoundOrder[a],v=y.id,m=y.paddingLeft,f=y.paddingTop,D=y.labelMarginLeft,O=y.labelMarginTop;this.adjustLocations(this.tiledMemberPack[v],y.rect.x,y.rect.y,m,f,D,O)}},x.prototype.repopulateZeroDegreeMembers=function(){var a=this,y=this.tiledZeroDegreePack;Object.keys(y).forEach(function(v){var m=a.idToDummyNode[v],f=m.paddingLeft,D=m.paddingTop,O=m.labelMarginLeft,M=m.labelMarginTop;a.adjustLocations(y[v],m.rect.x,m.rect.y,f,D,O,M)})},x.prototype.getToBeTiled=function(a){var y=a.id;if(this.toBeTiled[y]!=null)return this.toBeTiled[y];var v=a.getChild();if(v==null)return this.toBeTiled[y]=!1,!1;for(var m=v.getNodes(),f=0;f<m.length;f++){var D=m[f];if(this.getNodeDegree(D)>0)return this.toBeTiled[y]=!1,!1;if(D.getChild()==null){this.toBeTiled[D.id]=!1;continue}if(!this.getToBeTiled(D))return this.toBeTiled[y]=!1,!1}return this.toBeTiled[y]=!0,!0},x.prototype.getNodeDegree=function(a){for(var y=a.id,v=a.getEdges(),m=0,f=0;f<v.length;f++){var D=v[f];D.getSource().id!==D.getTarget().id&&(m=m+1)}return m},x.prototype.getNodeDegreeWithChildren=function(a){var y=this.getNodeDegree(a);if(a.getChild()==null)return y;for(var v=a.getChild().getNodes(),m=0;m<v.length;m++){var f=v[m];y+=this.getNodeDegreeWithChildren(f)}return y},x.prototype.performDFSOnCompounds=function(){this.compoundOrder=[],this.fillCompexOrderByDFS(this.graphManager.getRoot().getNodes())},x.prototype.fillCompexOrderByDFS=function(a){for(var y=0;y<a.length;y++){var v=a[y];v.getChild()!=null&&this.fillCompexOrderByDFS(v.getChild().getNodes()),this.getToBeTiled(v)&&this.compoundOrder.push(v)}},x.prototype.adjustLocations=function(a,y,v,m,f,D,O){y+=m+D,v+=f+O;for(var M=y,U=0;U<a.rows.length;U++){var X=a.rows[U];y=M;for(var W=0,j=0;j<X.length;j++){var Y=X[j];Y.rect.x=y,Y.rect.y=v,y+=Y.rect.width+a.horizontalPadding,Y.rect.height>W&&(W=Y.rect.height)}v+=W+a.verticalPadding}},x.prototype.tileCompoundMembers=function(a,y){var v=this;this.tiledMemberPack=[],Object.keys(a).forEach(function(m){var f=y[m];if(v.tiledMemberPack[m]=v.tileNodes(a[m],f.paddingLeft+f.paddingRight),f.rect.width=v.tiledMemberPack[m].width,f.rect.height=v.tiledMemberPack[m].height,f.setCenter(v.tiledMemberPack[m].centerX,v.tiledMemberPack[m].centerY),f.labelMarginLeft=0,f.labelMarginTop=0,d.NODE_DIMENSIONS_INCLUDE_LABELS){var D=f.rect.width,O=f.rect.height;f.labelWidth&&(f.labelPosHorizontal=="left"?(f.rect.x-=f.labelWidth,f.setWidth(D+f.labelWidth),f.labelMarginLeft=f.labelWidth):f.labelPosHorizontal=="center"&&f.labelWidth>D?(f.rect.x-=(f.labelWidth-D)/2,f.setWidth(f.labelWidth),f.labelMarginLeft=(f.labelWidth-D)/2):f.labelPosHorizontal=="right"&&f.setWidth(D+f.labelWidth)),f.labelHeight&&(f.labelPosVertical=="top"?(f.rect.y-=f.labelHeight,f.setHeight(O+f.labelHeight),f.labelMarginTop=f.labelHeight):f.labelPosVertical=="center"&&f.labelHeight>O?(f.rect.y-=(f.labelHeight-O)/2,f.setHeight(f.labelHeight),f.labelMarginTop=(f.labelHeight-O)/2):f.labelPosVertical=="bottom"&&f.setHeight(O+f.labelHeight))}})},x.prototype.tileNodes=function(a,y){var v=this.tileNodesByFavoringDim(a,y,!0),m=this.tileNodesByFavoringDim(a,y,!1),f=this.getOrgRatio(v),D=this.getOrgRatio(m),O;return D<f?O=m:O=v,O},x.prototype.getOrgRatio=function(a){var y=a.width,v=a.height,m=y/v;return m<1&&(m=1/m),m},x.prototype.calcIdealRowWidth=function(a,y){var v=d.TILING_PADDING_VERTICAL,m=d.TILING_PADDING_HORIZONTAL,f=a.length,D=0,O=0,M=0;a.forEach(function(k){D+=k.getWidth(),O+=k.getHeight(),k.getWidth()>M&&(M=k.getWidth())});var U=D/f,X=O/f,W=Math.pow(v-m,2)+4*(U+m)*(X+v)*f,j=(m-v+Math.sqrt(W))/(2*(U+m)),Y;y?(Y=Math.ceil(j),Y==j&&Y++):Y=Math.floor(j);var K=Y*(U+m)-m;return M>K&&(K=M),K+=m*2,K},x.prototype.tileNodesByFavoringDim=function(a,y,v){var m=d.TILING_PADDING_VERTICAL,f=d.TILING_PADDING_HORIZONTAL,D=d.TILING_COMPARE_BY,O={rows:[],rowWidth:[],rowHeight:[],width:0,height:y,verticalPadding:m,horizontalPadding:f,centerX:0,centerY:0};D&&(O.idealRowWidth=this.calcIdealRowWidth(a,v));var M=T(function(k){return k.rect.width*k.rect.height},"getNodeArea"),U=T(function(k,b){return M(b)-M(k)},"areaCompareFcn");a.sort(function(k,b){var G=U;return O.idealRowWidth?(G=D,G(k.id,b.id)):G(k,b)});for(var X=0,W=0,j=0;j<a.length;j++){var Y=a[j];X+=Y.getCenterX(),W+=Y.getCenterY()}O.centerX=X/a.length,O.centerY=W/a.length;for(var j=0;j<a.length;j++){var Y=a[j];if(O.rows.length==0)this.insertNodeToRow(O,Y,0,y);else if(this.canAddHorizontal(O,Y.rect.width,Y.rect.height)){var K=O.rows.length-1;O.idealRowWidth||(K=this.getShortestRowIndex(O)),this.insertNodeToRow(O,Y,K,y)}else this.insertNodeToRow(O,Y,O.rows.length,y);this.shiftToLastRow(O)}return O},x.prototype.insertNodeToRow=function(a,y,v,m){var f=m;if(v==a.rows.length){var D=[];a.rows.push(D),a.rowWidth.push(f),a.rowHeight.push(0)}var O=a.rowWidth[v]+y.rect.width;a.rows[v].length>0&&(O+=a.horizontalPadding),a.rowWidth[v]=O,a.width<O&&(a.width=O);var M=y.rect.height;v>0&&(M+=a.verticalPadding);var U=0;M>a.rowHeight[v]&&(U=a.rowHeight[v],a.rowHeight[v]=M,U=a.rowHeight[v]-U),a.height+=U,a.rows[v].push(y)},x.prototype.getShortestRowIndex=function(a){for(var y=-1,v=Number.MAX_VALUE,m=0;m<a.rows.length;m++)a.rowWidth[m]<v&&(y=m,v=a.rowWidth[m]);return y},x.prototype.getLongestRowIndex=function(a){for(var y=-1,v=Number.MIN_VALUE,m=0;m<a.rows.length;m++)a.rowWidth[m]>v&&(y=m,v=a.rowWidth[m]);return y},x.prototype.canAddHorizontal=function(a,y,v){if(a.idealRowWidth){var m=a.rows.length-1,f=a.rowWidth[m];return f+y+a.horizontalPadding<=a.idealRowWidth}var D=this.getShortestRowIndex(a);if(D<0)return!0;var O=a.rowWidth[D];if(O+a.horizontalPadding+y<=a.width)return!0;var M=0;a.rowHeight[D]<v&&D>0&&(M=v+a.verticalPadding-a.rowHeight[D]);var U;a.width-O>=y+a.horizontalPadding?U=(a.height+M)/(O+y+a.horizontalPadding):U=(a.height+M)/a.width,M=v+a.verticalPadding;var X;return a.width<y?X=(a.height+M)/y:X=(a.height+M)/a.width,X<1&&(X=1/X),U<1&&(U=1/U),U<X},x.prototype.shiftToLastRow=function(a){var y=this.getLongestRowIndex(a),v=a.rowWidth.length-1,m=a.rows[y],f=m[m.length-1],D=f.width+a.horizontalPadding;if(a.width-a.rowWidth[v]>D&&y!=v){m.splice(-1,1),a.rows[v].push(f),a.rowWidth[y]=a.rowWidth[y]-D,a.rowWidth[v]=a.rowWidth[v]+D,a.width=a.rowWidth[instance.getLongestRowIndex(a)];for(var O=Number.MIN_VALUE,M=0;M<m.length;M++)m[M].height>O&&(O=m[M].height);y>0&&(O+=a.verticalPadding);var U=a.rowHeight[y]+a.rowHeight[v];a.rowHeight[y]=O,a.rowHeight[v]<f.height+a.verticalPadding&&(a.rowHeight[v]=f.height+a.verticalPadding);var X=a.rowHeight[y]+a.rowHeight[v];a.height+=X-U,this.shiftToLastRow(a)}},x.prototype.tilingPreLayout=function(){d.TILE&&(this.groupZeroDegreeMembers(),this.clearCompounds(),this.clearZeroDegreeMembers())},x.prototype.tilingPostLayout=function(){d.TILE&&(this.repopulateZeroDegreeMembers(),this.repopulateCompounds())},x.prototype.reduceTrees=function(){for(var a=[],y=!0,v;y;){var m=this.graphManager.getAllNodes(),f=[];y=!1;for(var D=0;D<m.length;D++)if(v=m[D],v.getEdges().length==1&&!v.getEdges()[0].isInterGraph&&v.getChild()==null){if(d.PURE_INCREMENTAL){var O=v.getEdges()[0].getOtherEnd(v),M=new _(v.getCenterX()-O.getCenterX(),v.getCenterY()-O.getCenterY());f.push([v,v.getEdges()[0],v.getOwner(),M])}else f.push([v,v.getEdges()[0],v.getOwner()]);y=!0}if(y==!0){for(var U=[],X=0;X<f.length;X++)f[X][0].getEdges().length==1&&(U.push(f[X]),f[X][0].getOwner().remove(f[X][0]));a.push(U),this.graphManager.resetAllNodes(),this.graphManager.resetAllEdges()}}this.prunedNodesAll=a},x.prototype.growTree=function(a){for(var y=a.length,v=a[y-1],m,f=0;f<v.length;f++)m=v[f],this.findPlaceforPrunedNode(m),m[2].add(m[0]),m[2].add(m[1],m[1].source,m[1].target);a.splice(a.length-1,1),this.graphManager.resetAllNodes(),this.graphManager.resetAllEdges()},x.prototype.findPlaceforPrunedNode=function(a){var y,v,m=a[0];if(m==a[1].source?v=a[1].target:v=a[1].source,d.PURE_INCREMENTAL)m.setCenter(v.getCenterX()+a[3].getWidth(),v.getCenterY()+a[3].getHeight());else{var f=v.startX,D=v.finishX,O=v.startY,M=v.finishY,U=0,X=0,W=0,j=0,Y=[U,W,X,j];if(O>0)for(var K=f;K<=D;K++)Y[0]+=this.grid[K][O-1].length+this.grid[K][O].length-1;if(D<this.grid.length-1)for(var K=O;K<=M;K++)Y[1]+=this.grid[D+1][K].length+this.grid[D][K].length-1;if(M<this.grid[0].length-1)for(var K=f;K<=D;K++)Y[2]+=this.grid[K][M+1].length+this.grid[K][M].length-1;if(f>0)for(var K=O;K<=M;K++)Y[3]+=this.grid[f-1][K].length+this.grid[f][K].length-1;for(var k=P.MAX_VALUE,b,G,Z=0;Z<Y.length;Z++)Y[Z]<k?(k=Y[Z],b=1,G=Z):Y[Z]==k&&b++;if(b==3&&k==0)Y[0]==0&&Y[1]==0&&Y[2]==0?y=1:Y[0]==0&&Y[1]==0&&Y[3]==0?y=0:Y[0]==0&&Y[2]==0&&Y[3]==0?y=3:Y[1]==0&&Y[2]==0&&Y[3]==0&&(y=2);else if(b==2&&k==0){var rt=Math.floor(Math.random()*2);Y[0]==0&&Y[1]==0?rt==0?y=0:y=1:Y[0]==0&&Y[2]==0?rt==0?y=0:y=2:Y[0]==0&&Y[3]==0?rt==0?y=0:y=3:Y[1]==0&&Y[2]==0?rt==0?y=1:y=2:Y[1]==0&&Y[3]==0?rt==0?y=1:y=3:rt==0?y=2:y=3}else if(b==4&&k==0){var rt=Math.floor(Math.random()*4);y=rt}else y=G;y==0?m.setCenter(v.getCenterX(),v.getCenterY()-v.getHeight()/2-l.DEFAULT_EDGE_LENGTH-m.getHeight()/2):y==1?m.setCenter(v.getCenterX()+v.getWidth()/2+l.DEFAULT_EDGE_LENGTH+m.getWidth()/2,v.getCenterY()):y==2?m.setCenter(v.getCenterX(),v.getCenterY()+v.getHeight()/2+l.DEFAULT_EDGE_LENGTH+m.getHeight()/2):m.setCenter(v.getCenterX()-v.getWidth()/2-l.DEFAULT_EDGE_LENGTH-m.getWidth()/2,v.getCenterY())}},i.exports=x},991:(i,r,t)=>{var h=t(551).FDLayoutNode,n=t(551).IMath;function p(e,d,u,l){h.call(this,e,d,u,l)}T(p,"CoSENode"),p.prototype=Object.create(h.prototype);for(var o in h)p[o]=h[o];p.prototype.calculateDisplacement=function(){var e=this.graphManager.getLayout();this.getChild()!=null&&this.fixedNodeWeight?(this.displacementX+=e.coolingFactor*(this.springForceX+this.repulsionForceX+this.gravitationForceX)/this.fixedNodeWeight,this.displacementY+=e.coolingFactor*(this.springForceY+this.repulsionForceY+this.gravitationForceY)/this.fixedNodeWeight):(this.displacementX+=e.coolingFactor*(this.springForceX+this.repulsionForceX+this.gravitationForceX)/this.noOfChildren,this.displacementY+=e.coolingFactor*(this.springForceY+this.repulsionForceY+this.gravitationForceY)/this.noOfChildren),Math.abs(this.displacementX)>e.coolingFactor*e.maxNodeDisplacement&&(this.displacementX=e.coolingFactor*e.maxNodeDisplacement*n.sign(this.displacementX)),Math.abs(this.displacementY)>e.coolingFactor*e.maxNodeDisplacement&&(this.displacementY=e.coolingFactor*e.maxNodeDisplacement*n.sign(this.displacementY)),this.child&&this.child.getNodes().length>0&&this.propogateDisplacementToChildren(this.displacementX,this.displacementY)},p.prototype.propogateDisplacementToChildren=function(e,d){for(var u=this.getChild().getNodes(),l,N=0;N<u.length;N++)l=u[N],l.getChild()==null?(l.displacementX+=e,l.displacementY+=d):l.propogateDisplacementToChildren(e,d)},p.prototype.move=function(){var e=this.graphManager.getLayout();(this.child==null||this.child.getNodes().length==0)&&(this.moveBy(this.displacementX,this.displacementY),e.totalDisplacement+=Math.abs(this.displacementX)+Math.abs(this.displacementY)),this.springForceX=0,this.springForceY=0,this.repulsionForceX=0,this.repulsionForceY=0,this.gravitationForceX=0,this.gravitationForceY=0,this.displacementX=0,this.displacementY=0},p.prototype.setPred1=function(e){this.pred1=e},p.prototype.getPred1=function(){return pred1},p.prototype.getPred2=function(){return pred2},p.prototype.setNext=function(e){this.next=e},p.prototype.getNext=function(){return next},p.prototype.setProcessed=function(e){this.processed=e},p.prototype.isProcessed=function(){return processed},i.exports=p},902:(i,r,t)=>{function h(u){if(Array.isArray(u)){for(var l=0,N=Array(u.length);l<u.length;l++)N[l]=u[l];return N}else return Array.from(u)}T(h,"_toConsumableArray");var n=t(806),p=t(551).LinkedList,o=t(551).Matrix,e=t(551).SVD;function d(){}T(d,"ConstraintHandler"),d.handleConstraints=function(u){var l={};l.fixedNodeConstraint=u.constraints.fixedNodeConstraint,l.alignmentConstraint=u.constraints.alignmentConstraint,l.relativePlacementConstraint=u.constraints.relativePlacementConstraint;for(var N=new Map,c=new Map,E=[],_=[],L=u.getAllNodes(),P=0,z=0;z<L.length;z++){var V=L[z];V.getChild()==null&&(c.set(V.id,P++),E.push(V.getCenterX()),_.push(V.getCenterY()),N.set(V.id,V))}l.relativePlacementConstraint&&l.relativePlacementConstraint.forEach(function(I){!I.gap&&I.gap!=0&&(I.left?I.gap=n.DEFAULT_EDGE_LENGTH+N.get(I.left).getWidth()/2+N.get(I.right).getWidth()/2:I.gap=n.DEFAULT_EDGE_LENGTH+N.get(I.top).getHeight()/2+N.get(I.bottom).getHeight()/2)});var B=T(function(I,R){return{x:I.x-R.x,y:I.y-R.y}},"calculatePositionDiff"),q=T(function(I){var R=0,$=0;return I.forEach(function(J){R+=E[c.get(J)],$+=_[c.get(J)]}),{x:R/I.size,y:$/I.size}},"calculateAvgPosition"),x=T(function(I,R,$,J,Q){function pt(nt,at){var ot=new Set(nt),Tt=!0,ft=!1,bt=void 0;try{for(var Rt=at[Symbol.iterator](),Ft;!(Tt=(Ft=Rt.next()).done);Tt=!0){var jt=Ft.value;ot.add(jt)}}catch(At){ft=!0,bt=At}finally{try{!Tt&&Rt.return&&Rt.return()}finally{if(ft)throw bt}}return ot}T(pt,"setUnion");var dt=new Map;I.forEach(function(nt,at){dt.set(at,0)}),I.forEach(function(nt,at){nt.forEach(function(ot){dt.set(ot.id,dt.get(ot.id)+1)})});var tt=new Map,gt=new Map,Nt=new p;dt.forEach(function(nt,at){nt==0?(Nt.push(at),$||(R=="horizontal"?tt.set(at,c.has(at)?E[c.get(at)]:J.get(at)):tt.set(at,c.has(at)?_[c.get(at)]:J.get(at)))):tt.set(at,Number.NEGATIVE_INFINITY),$&&gt.set(at,new Set([at]))}),$&&Q.forEach(function(nt){var at=[];if(nt.forEach(function(ft){$.has(ft)&&at.push(ft)}),at.length>0){var ot=0;at.forEach(function(ft){R=="horizontal"?(tt.set(ft,c.has(ft)?E[c.get(ft)]:J.get(ft)),ot+=tt.get(ft)):(tt.set(ft,c.has(ft)?_[c.get(ft)]:J.get(ft)),ot+=tt.get(ft))}),ot=ot/at.length,nt.forEach(function(ft){$.has(ft)||tt.set(ft,ot)})}else{var Tt=0;nt.forEach(function(ft){R=="horizontal"?Tt+=c.has(ft)?E[c.get(ft)]:J.get(ft):Tt+=c.has(ft)?_[c.get(ft)]:J.get(ft)}),Tt=Tt/nt.length,nt.forEach(function(ft){tt.set(ft,Tt)})}});for(var _t=T(function(){var nt=Nt.shift(),at=I.get(nt);at.forEach(function(ot){if(tt.get(ot.id)<tt.get(nt)+ot.gap)if($&&$.has(ot.id)){var Tt=void 0;if(R=="horizontal"?Tt=c.has(ot.id)?E[c.get(ot.id)]:J.get(ot.id):Tt=c.has(ot.id)?_[c.get(ot.id)]:J.get(ot.id),tt.set(ot.id,Tt),Tt<tt.get(nt)+ot.gap){var ft=tt.get(nt)+ot.gap-Tt;gt.get(nt).forEach(function(bt){tt.set(bt,tt.get(bt)-ft)})}}else tt.set(ot.id,tt.get(nt)+ot.gap);dt.set(ot.id,dt.get(ot.id)-1),dt.get(ot.id)==0&&Nt.push(ot.id),$&&gt.set(ot.id,pt(gt.get(nt),gt.get(ot.id)))})},"_loop");Nt.length!=0;)_t();if($){var et=new Set;I.forEach(function(nt,at){nt.length==0&&et.add(at)});var Ot=[];gt.forEach(function(nt,at){if(et.has(at)){var ot=!1,Tt=!0,ft=!1,bt=void 0;try{for(var Rt=nt[Symbol.iterator](),Ft;!(Tt=(Ft=Rt.next()).done);Tt=!0){var jt=Ft.value;$.has(jt)&&(ot=!0)}}catch(Gt){ft=!0,bt=Gt}finally{try{!Tt&&Rt.return&&Rt.return()}finally{if(ft)throw bt}}if(!ot){var At=!1,wt=void 0;Ot.forEach(function(Gt,Pt){Gt.has([].concat(h(nt))[0])&&(At=!0,wt=Pt)}),At?nt.forEach(function(Gt){Ot[wt].add(Gt)}):Ot.push(new Set(nt))}}}),Ot.forEach(function(nt,at){var ot=Number.POSITIVE_INFINITY,Tt=Number.POSITIVE_INFINITY,ft=Number.NEGATIVE_INFINITY,bt=Number.NEGATIVE_INFINITY,Rt=!0,Ft=!1,jt=void 0;try{for(var At=nt[Symbol.iterator](),wt;!(Rt=(wt=At.next()).done);Rt=!0){var Gt=wt.value,Pt=void 0;R=="horizontal"?Pt=c.has(Gt)?E[c.get(Gt)]:J.get(Gt):Pt=c.has(Gt)?_[c.get(Gt)]:J.get(Gt);var Bt=tt.get(Gt);Pt<ot&&(ot=Pt),Pt>ft&&(ft=Pt),Bt<Tt&&(Tt=Bt),Bt>bt&&(bt=Bt)}}catch(Kt){Ft=!0,jt=Kt}finally{try{!Rt&&At.return&&At.return()}finally{if(Ft)throw jt}}var qt=(ot+ft)/2-(Tt+bt)/2,ne=!0,Qt=!1,te=void 0;try{for(var Jt=nt[Symbol.iterator](),ee;!(ne=(ee=Jt.next()).done);ne=!0){var ae=ee.value;tt.set(ae,tt.get(ae)+qt)}}catch(Kt){Qt=!0,te=Kt}finally{try{!ne&&Jt.return&&Jt.return()}finally{if(Qt)throw te}}})}return tt},"findAppropriatePositionForRelativePlacement"),st=T(function(I){var R=0,$=0,J=0,Q=0;if(I.forEach(function(gt){gt.left?E[c.get(gt.left)]-E[c.get(gt.right)]>=0?R++:$++:_[c.get(gt.top)]-_[c.get(gt.bottom)]>=0?J++:Q++}),R>$&&J>Q)for(var pt=0;pt<c.size;pt++)E[pt]=-1*E[pt],_[pt]=-1*_[pt];else if(R>$)for(var dt=0;dt<c.size;dt++)E[dt]=-1*E[dt];else if(J>Q)for(var tt=0;tt<c.size;tt++)_[tt]=-1*_[tt]},"applyReflectionForRelativePlacement"),a=T(function(I){var R=[],$=new p,J=new Set,Q=0;return I.forEach(function(pt,dt){if(!J.has(dt)){R[Q]=[];var tt=dt;for($.push(tt),J.add(tt),R[Q].push(tt);$.length!=0;){tt=$.shift();var gt=I.get(tt);gt.forEach(function(Nt){J.has(Nt.id)||($.push(Nt.id),J.add(Nt.id),R[Q].push(Nt.id))})}Q++}}),R},"findComponents"),y=T(function(I){var R=new Map;return I.forEach(function($,J){R.set(J,[])}),I.forEach(function($,J){$.forEach(function(Q){R.get(J).push(Q),R.get(Q.id).push({id:J,gap:Q.gap,direction:Q.direction})})}),R},"dagToUndirected"),v=T(function(I){var R=new Map;return I.forEach(function($,J){R.set(J,[])}),I.forEach(function($,J){$.forEach(function(Q){R.get(Q.id).push({id:J,gap:Q.gap,direction:Q.direction})})}),R},"dagToReversed"),m=[],f=[],D=!1,O=!1,M=new Set,U=new Map,X=new Map,W=[];if(l.fixedNodeConstraint&&l.fixedNodeConstraint.forEach(function(I){M.add(I.nodeId)}),l.relativePlacementConstraint&&(l.relativePlacementConstraint.forEach(function(I){I.left?(U.has(I.left)?U.get(I.left).push({id:I.right,gap:I.gap,direction:"horizontal"}):U.set(I.left,[{id:I.right,gap:I.gap,direction:"horizontal"}]),U.has(I.right)||U.set(I.right,[])):(U.has(I.top)?U.get(I.top).push({id:I.bottom,gap:I.gap,direction:"vertical"}):U.set(I.top,[{id:I.bottom,gap:I.gap,direction:"vertical"}]),U.has(I.bottom)||U.set(I.bottom,[]))}),X=y(U),W=a(X)),n.TRANSFORM_ON_CONSTRAINT_HANDLING){if(l.fixedNodeConstraint&&l.fixedNodeConstraint.length>1)l.fixedNodeConstraint.forEach(function(I,R){m[R]=[I.position.x,I.position.y],f[R]=[E[c.get(I.nodeId)],_[c.get(I.nodeId)]]}),D=!0;else if(l.alignmentConstraint)(function(){var I=0;if(l.alignmentConstraint.vertical){for(var R=l.alignmentConstraint.vertical,$=T(function(tt){var gt=new Set;R[tt].forEach(function(et){gt.add(et)});var Nt=new Set([].concat(h(gt)).filter(function(et){return M.has(et)})),_t=void 0;Nt.size>0?_t=E[c.get(Nt.values().next().value)]:_t=q(gt).x,R[tt].forEach(function(et){m[I]=[_t,_[c.get(et)]],f[I]=[E[c.get(et)],_[c.get(et)]],I++})},"_loop2"),J=0;J<R.length;J++)$(J);D=!0}if(l.alignmentConstraint.horizontal){for(var Q=l.alignmentConstraint.horizontal,pt=T(function(tt){var gt=new Set;Q[tt].forEach(function(et){gt.add(et)});var Nt=new Set([].concat(h(gt)).filter(function(et){return M.has(et)})),_t=void 0;Nt.size>0?_t=E[c.get(Nt.values().next().value)]:_t=q(gt).y,Q[tt].forEach(function(et){m[I]=[E[c.get(et)],_t],f[I]=[E[c.get(et)],_[c.get(et)]],I++})},"_loop3"),dt=0;dt<Q.length;dt++)pt(dt);D=!0}l.relativePlacementConstraint&&(O=!0)})();else if(l.relativePlacementConstraint){for(var j=0,Y=0,K=0;K<W.length;K++)W[K].length>j&&(j=W[K].length,Y=K);if(j<X.size/2)st(l.relativePlacementConstraint),D=!1,O=!1;else{var k=new Map,b=new Map,G=[];W[Y].forEach(function(I){U.get(I).forEach(function(R){R.direction=="horizontal"?(k.has(I)?k.get(I).push(R):k.set(I,[R]),k.has(R.id)||k.set(R.id,[]),G.push({left:I,right:R.id})):(b.has(I)?b.get(I).push(R):b.set(I,[R]),b.has(R.id)||b.set(R.id,[]),G.push({top:I,bottom:R.id}))})}),st(G),O=!1;var Z=x(k,"horizontal"),rt=x(b,"vertical");W[Y].forEach(function(I,R){f[R]=[E[c.get(I)],_[c.get(I)]],m[R]=[],Z.has(I)?m[R][0]=Z.get(I):m[R][0]=E[c.get(I)],rt.has(I)?m[R][1]=rt.get(I):m[R][1]=_[c.get(I)]}),D=!0}}if(D){for(var ut=void 0,It=o.transpose(m),Dt=o.transpose(f),S=0;S<It.length;S++)It[S]=o.multGamma(It[S]),Dt[S]=o.multGamma(Dt[S]);var it=o.multMat(It,o.transpose(Dt)),ht=e.svd(it);ut=o.multMat(ht.V,o.transpose(ht.U));for(var mt=0;mt<c.size;mt++){var Ct=[E[mt],_[mt]],yt=[ut[0][0],ut[1][0]],Et=[ut[0][1],ut[1][1]];E[mt]=o.dotProduct(Ct,yt),_[mt]=o.dotProduct(Ct,Et)}O&&st(l.relativePlacementConstraint)}}if(n.ENFORCE_CONSTRAINTS){if(l.fixedNodeConstraint&&l.fixedNodeConstraint.length>0){var xt={x:0,y:0};l.fixedNodeConstraint.forEach(function(I,R){var $={x:E[c.get(I.nodeId)],y:_[c.get(I.nodeId)]},J=I.position,Q=B(J,$);xt.x+=Q.x,xt.y+=Q.y}),xt.x/=l.fixedNodeConstraint.length,xt.y/=l.fixedNodeConstraint.length,E.forEach(function(I,R){E[R]+=xt.x}),_.forEach(function(I,R){_[R]+=xt.y}),l.fixedNodeConstraint.forEach(function(I){E[c.get(I.nodeId)]=I.position.x,_[c.get(I.nodeId)]=I.position.y})}if(l.alignmentConstraint){if(l.alignmentConstraint.vertical)for(var Vt=l.alignmentConstraint.vertical,Ut=T(function(I){var R=new Set;Vt[I].forEach(function(Q){R.add(Q)});var $=new Set([].concat(h(R)).filter(function(Q){return M.has(Q)})),J=void 0;$.size>0?J=E[c.get($.values().next().value)]:J=q(R).x,R.forEach(function(Q){M.has(Q)||(E[c.get(Q)]=J)})},"_loop4"),kt=0;kt<Vt.length;kt++)Ut(kt);if(l.alignmentConstraint.horizontal)for(var Mt=l.alignmentConstraint.horizontal,Xt=T(function(I){var R=new Set;Mt[I].forEach(function(Q){R.add(Q)});var $=new Set([].concat(h(R)).filter(function(Q){return M.has(Q)})),J=void 0;$.size>0?J=_[c.get($.values().next().value)]:J=q(R).y,R.forEach(function(Q){M.has(Q)||(_[c.get(Q)]=J)})},"_loop5"),Yt=0;Yt<Mt.length;Yt++)Xt(Yt)}l.relativePlacementConstraint&&function(){var I=new Map,R=new Map,$=new Map,J=new Map,Q=new Map,pt=new Map,dt=new Set,tt=new Set;if(M.forEach(function(ct){dt.add(ct),tt.add(ct)}),l.alignmentConstraint){if(l.alignmentConstraint.vertical)for(var gt=l.alignmentConstraint.vertical,Nt=T(function(ct){$.set("dummy"+ct,[]),gt[ct].forEach(function(Lt){I.set(Lt,"dummy"+ct),$.get("dummy"+ct).push(Lt),M.has(Lt)&&dt.add("dummy"+ct)}),Q.set("dummy"+ct,E[c.get(gt[ct][0])])},"_loop6"),_t=0;_t<gt.length;_t++)Nt(_t);if(l.alignmentConstraint.horizontal)for(var et=l.alignmentConstraint.horizontal,Ot=T(function(ct){J.set("dummy"+ct,[]),et[ct].forEach(function(Lt){R.set(Lt,"dummy"+ct),J.get("dummy"+ct).push(Lt),M.has(Lt)&&tt.add("dummy"+ct)}),pt.set("dummy"+ct,_[c.get(et[ct][0])])},"_loop7"),nt=0;nt<et.length;nt++)Ot(nt)}var at=new Map,ot=new Map,Tt=T(function(ct){U.get(ct).forEach(function(Lt){var zt=void 0,Wt=void 0;Lt.direction=="horizontal"?(zt=I.get(ct)?I.get(ct):ct,I.get(Lt.id)?Wt={id:I.get(Lt.id),gap:Lt.gap,direction:Lt.direction}:Wt=Lt,at.has(zt)?at.get(zt).push(Wt):at.set(zt,[Wt]),at.has(Wt.id)||at.set(Wt.id,[])):(zt=R.get(ct)?R.get(ct):ct,R.get(Lt.id)?Wt={id:R.get(Lt.id),gap:Lt.gap,direction:Lt.direction}:Wt=Lt,ot.has(zt)?ot.get(zt).push(Wt):ot.set(zt,[Wt]),ot.has(Wt.id)||ot.set(Wt.id,[]))})},"_loop8"),ft=!0,bt=!1,Rt=void 0;try{for(var Ft=U.keys()[Symbol.iterator](),jt;!(ft=(jt=Ft.next()).done);ft=!0){var At=jt.value;Tt(At)}}catch(ct){bt=!0,Rt=ct}finally{try{!ft&&Ft.return&&Ft.return()}finally{if(bt)throw Rt}}var wt=y(at),Gt=y(ot),Pt=a(wt),Bt=a(Gt),qt=v(at),ne=v(ot),Qt=[],te=[];Pt.forEach(function(ct,Lt){Qt[Lt]=[],ct.forEach(function(zt){qt.get(zt).length==0&&Qt[Lt].push(zt)})}),Bt.forEach(function(ct,Lt){te[Lt]=[],ct.forEach(function(zt){ne.get(zt).length==0&&te[Lt].push(zt)})});var Jt=x(at,"horizontal",dt,Q,Qt),ee=x(ot,"vertical",tt,pt,te),ae=T(function(ct){$.get(ct)?$.get(ct).forEach(function(Lt){E[c.get(Lt)]=Jt.get(ct)}):E[c.get(ct)]=Jt.get(ct)},"_loop9"),Kt=!0,ye=!1,Ee=void 0;try{for(var de=Jt.keys()[Symbol.iterator](),Ne;!(Kt=(Ne=de.next()).done);Kt=!0){var ce=Ne.value;ae(ce)}}catch(ct){ye=!0,Ee=ct}finally{try{!Kt&&de.return&&de.return()}finally{if(ye)throw Ee}}var ze=T(function(ct){J.get(ct)?J.get(ct).forEach(function(Lt){_[c.get(Lt)]=ee.get(ct)}):_[c.get(ct)]=ee.get(ct)},"_loop10"),ge=!0,Te=!1,Ae=void 0;try{for(var ue=ee.keys()[Symbol.iterator](),we;!(ge=(we=ue.next()).done);ge=!0){var ce=we.value;ze(ce)}}catch(ct){Te=!0,Ae=ct}finally{try{!ge&&ue.return&&ue.return()}finally{if(Te)throw Ae}}}()}for(var $t=0;$t<L.length;$t++){var lt=L[$t];lt.getChild()==null&&lt.setCenter(E[c.get(lt.id)],_[c.get(lt.id)])}},i.exports=d},551:i=>{i.exports=C}},A={};function g(i){var r=A[i];if(r!==void 0)return r.exports;var t=A[i]={exports:{}};return F[i](t,t.exports,g),t.exports}T(g,"__webpack_require__");var s=g(45);return s})()})}),ar=me((w,H)=>{T(function(C,F){typeof w=="object"&&typeof H=="object"?H.exports=F(Le()):typeof define=="function"&&define.amd?define(["cose-base"],F):typeof w=="object"?w.cytoscapeFcose=F(Le()):C.cytoscapeFcose=F(C.coseBase)},"webpackUniversalModuleDefinition")(w,function(C){return(()=>{var F={658:i=>{i.exports=Object.assign!=null?Object.assign.bind(Object):function(r){for(var t=arguments.length,h=Array(t>1?t-1:0),n=1;n<t;n++)h[n-1]=arguments[n];return h.forEach(function(p){Object.keys(p).forEach(function(o){return r[o]=p[o]})}),r}},548:(i,r,t)=>{var h=function(){function o(e,d){var u=[],l=!0,N=!1,c=void 0;try{for(var E=e[Symbol.iterator](),_;!(l=(_=E.next()).done)&&(u.push(_.value),!(d&&u.length===d));l=!0);}catch(L){N=!0,c=L}finally{try{!l&&E.return&&E.return()}finally{if(N)throw c}}return u}return T(o,"sliceIterator"),function(e,d){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return o(e,d);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),n=t(140).layoutBase.LinkedList,p={};p.getTopMostNodes=function(o){for(var e={},d=0;d<o.length;d++)e[o[d].id()]=!0;var u=o.filter(function(l,N){typeof l=="number"&&(l=N);for(var c=l.parent()[0];c!=null;){if(e[c.id()])return!1;c=c.parent()[0]}return!0});return u},p.connectComponents=function(o,e,d,u){var l=new n,N=new Set,c=[],E=void 0,_=void 0,L=void 0,P=!1,z=1,V=[],B=[],q=T(function(){var x=o.collection();B.push(x);var st=d[0],a=o.collection();a.merge(st).merge(st.descendants().intersection(e)),c.push(st),a.forEach(function(m){l.push(m),N.add(m),x.merge(m)});for(var y=T(function(){st=l.shift();var m=o.collection();st.neighborhood().nodes().forEach(function(M){e.intersection(st.edgesWith(M)).length>0&&m.merge(M)});for(var f=0;f<m.length;f++){var D=m[f];if(E=d.intersection(D.union(D.ancestors())),E!=null&&!N.has(E[0])){var O=E.union(E.descendants());O.forEach(function(M){l.push(M),N.add(M),x.merge(M),d.has(M)&&c.push(M)})}}},"_loop2");l.length!=0;)y();if(x.forEach(function(m){e.intersection(m.connectedEdges()).forEach(function(f){x.has(f.source())&&x.has(f.target())&&x.merge(f)})}),c.length==d.length&&(P=!0),!P||P&&z>1){_=c[0],L=_.connectedEdges().length,c.forEach(function(m){m.connectedEdges().length<L&&(L=m.connectedEdges().length,_=m)}),V.push(_.id());var v=o.collection();v.merge(c[0]),c.forEach(function(m){v.merge(m)}),c=[],d=d.difference(v),z++}},"_loop");do q();while(!P);return u&&V.length>0&&u.set("dummy"+(u.size+1),V),B},p.relocateComponent=function(o,e,d){if(!d.fixedNodeConstraint){var u=Number.POSITIVE_INFINITY,l=Number.NEGATIVE_INFINITY,N=Number.POSITIVE_INFINITY,c=Number.NEGATIVE_INFINITY;if(d.quality=="draft"){var E=!0,_=!1,L=void 0;try{for(var P=e.nodeIndexes[Symbol.iterator](),z;!(E=(z=P.next()).done);E=!0){var V=z.value,B=h(V,2),q=B[0],x=B[1],st=d.cy.getElementById(q);if(st){var a=st.boundingBox(),y=e.xCoords[x]-a.w/2,v=e.xCoords[x]+a.w/2,m=e.yCoords[x]-a.h/2,f=e.yCoords[x]+a.h/2;y<u&&(u=y),v>l&&(l=v),m<N&&(N=m),f>c&&(c=f)}}}catch(X){_=!0,L=X}finally{try{!E&&P.return&&P.return()}finally{if(_)throw L}}var D=o.x-(l+u)/2,O=o.y-(c+N)/2;e.xCoords=e.xCoords.map(function(X){return X+D}),e.yCoords=e.yCoords.map(function(X){return X+O})}else{Object.keys(e).forEach(function(X){var W=e[X],j=W.getRect().x,Y=W.getRect().x+W.getRect().width,K=W.getRect().y,k=W.getRect().y+W.getRect().height;j<u&&(u=j),Y>l&&(l=Y),K<N&&(N=K),k>c&&(c=k)});var M=o.x-(l+u)/2,U=o.y-(c+N)/2;Object.keys(e).forEach(function(X){var W=e[X];W.setCenter(W.getCenterX()+M,W.getCenterY()+U)})}}},p.calcBoundingBox=function(o,e,d,u){for(var l=Number.MAX_SAFE_INTEGER,N=Number.MIN_SAFE_INTEGER,c=Number.MAX_SAFE_INTEGER,E=Number.MIN_SAFE_INTEGER,_=void 0,L=void 0,P=void 0,z=void 0,V=o.descendants().not(":parent"),B=V.length,q=0;q<B;q++){var x=V[q];_=e[u.get(x.id())]-x.width()/2,L=e[u.get(x.id())]+x.width()/2,P=d[u.get(x.id())]-x.height()/2,z=d[u.get(x.id())]+x.height()/2,l>_&&(l=_),N<L&&(N=L),c>P&&(c=P),E<z&&(E=z)}var st={};return st.topLeftX=l,st.topLeftY=c,st.width=N-l,st.height=E-c,st},p.calcParentsWithoutChildren=function(o,e){var d=o.collection();return e.nodes(":parent").forEach(function(u){var l=!1;u.children().forEach(function(N){N.css("display")!="none"&&(l=!0)}),l||d.merge(u)}),d},i.exports=p},816:(i,r,t)=>{var h=t(548),n=t(140).CoSELayout,p=t(140).CoSENode,o=t(140).layoutBase.PointD,e=t(140).layoutBase.DimensionD,d=t(140).layoutBase.LayoutConstants,u=t(140).layoutBase.FDLayoutConstants,l=t(140).CoSEConstants,N=T(function(c,E){var _=c.cy,L=c.eles,P=L.nodes(),z=L.edges(),V=void 0,B=void 0,q=void 0,x={};c.randomize&&(V=E.nodeIndexes,B=E.xCoords,q=E.yCoords);var st=T(function(M){return typeof M=="function"},"isFn"),a=T(function(M,U){return st(M)?M(U):M},"optFn"),y=h.calcParentsWithoutChildren(_,L),v=T(function M(U,X,W,j){for(var Y=X.length,K=0;K<Y;K++){var k=X[K],b=null;k.intersection(y).length==0&&(b=k.children());var G=void 0,Z=k.layoutDimensions({nodeDimensionsIncludeLabels:j.nodeDimensionsIncludeLabels});if(k.outerWidth()!=null&&k.outerHeight()!=null)if(j.randomize)if(!k.isParent())G=U.add(new p(W.graphManager,new o(B[V.get(k.id())]-Z.w/2,q[V.get(k.id())]-Z.h/2),new e(parseFloat(Z.w),parseFloat(Z.h))));else{var rt=h.calcBoundingBox(k,B,q,V);k.intersection(y).length==0?G=U.add(new p(W.graphManager,new o(rt.topLeftX,rt.topLeftY),new e(rt.width,rt.height))):G=U.add(new p(W.graphManager,new o(rt.topLeftX,rt.topLeftY),new e(parseFloat(Z.w),parseFloat(Z.h))))}else G=U.add(new p(W.graphManager,new o(k.position("x")-Z.w/2,k.position("y")-Z.h/2),new e(parseFloat(Z.w),parseFloat(Z.h))));else G=U.add(new p(this.graphManager));if(G.id=k.data("id"),G.nodeRepulsion=a(j.nodeRepulsion,k),G.paddingLeft=parseInt(k.css("padding")),G.paddingTop=parseInt(k.css("padding")),G.paddingRight=parseInt(k.css("padding")),G.paddingBottom=parseInt(k.css("padding")),j.nodeDimensionsIncludeLabels&&(G.labelWidth=k.boundingBox({includeLabels:!0,includeNodes:!1,includeOverlays:!1}).w,G.labelHeight=k.boundingBox({includeLabels:!0,includeNodes:!1,includeOverlays:!1}).h,G.labelPosVertical=k.css("text-valign"),G.labelPosHorizontal=k.css("text-halign")),x[k.data("id")]=G,isNaN(G.rect.x)&&(G.rect.x=0),isNaN(G.rect.y)&&(G.rect.y=0),b!=null&&b.length>0){var ut=void 0;ut=W.getGraphManager().add(W.newGraph(),G),M(ut,b,W,j)}}},"processChildrenList"),m=T(function(M,U,X){for(var W=0,j=0,Y=0;Y<X.length;Y++){var K=X[Y],k=x[K.data("source")],b=x[K.data("target")];if(k&&b&&k!==b&&k.getEdgesBetween(b).length==0){var G=U.add(M.newEdge(),k,b);G.id=K.id(),G.idealLength=a(c.idealEdgeLength,K),G.edgeElasticity=a(c.edgeElasticity,K),W+=G.idealLength,j++}}c.idealEdgeLength!=null&&(j>0?l.DEFAULT_EDGE_LENGTH=u.DEFAULT_EDGE_LENGTH=W/j:st(c.idealEdgeLength)?l.DEFAULT_EDGE_LENGTH=u.DEFAULT_EDGE_LENGTH=50:l.DEFAULT_EDGE_LENGTH=u.DEFAULT_EDGE_LENGTH=c.idealEdgeLength,l.MIN_REPULSION_DIST=u.MIN_REPULSION_DIST=u.DEFAULT_EDGE_LENGTH/10,l.DEFAULT_RADIAL_SEPARATION=u.DEFAULT_EDGE_LENGTH)},"processEdges"),f=T(function(M,U){U.fixedNodeConstraint&&(M.constraints.fixedNodeConstraint=U.fixedNodeConstraint),U.alignmentConstraint&&(M.constraints.alignmentConstraint=U.alignmentConstraint),U.relativePlacementConstraint&&(M.constraints.relativePlacementConstraint=U.relativePlacementConstraint)},"processConstraints");c.nestingFactor!=null&&(l.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR=u.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR=c.nestingFactor),c.gravity!=null&&(l.DEFAULT_GRAVITY_STRENGTH=u.DEFAULT_GRAVITY_STRENGTH=c.gravity),c.numIter!=null&&(l.MAX_ITERATIONS=u.MAX_ITERATIONS=c.numIter),c.gravityRange!=null&&(l.DEFAULT_GRAVITY_RANGE_FACTOR=u.DEFAULT_GRAVITY_RANGE_FACTOR=c.gravityRange),c.gravityCompound!=null&&(l.DEFAULT_COMPOUND_GRAVITY_STRENGTH=u.DEFAULT_COMPOUND_GRAVITY_STRENGTH=c.gravityCompound),c.gravityRangeCompound!=null&&(l.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR=u.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR=c.gravityRangeCompound),c.initialEnergyOnIncremental!=null&&(l.DEFAULT_COOLING_FACTOR_INCREMENTAL=u.DEFAULT_COOLING_FACTOR_INCREMENTAL=c.initialEnergyOnIncremental),c.tilingCompareBy!=null&&(l.TILING_COMPARE_BY=c.tilingCompareBy),c.quality=="proof"?d.QUALITY=2:d.QUALITY=0,l.NODE_DIMENSIONS_INCLUDE_LABELS=u.NODE_DIMENSIONS_INCLUDE_LABELS=d.NODE_DIMENSIONS_INCLUDE_LABELS=c.nodeDimensionsIncludeLabels,l.DEFAULT_INCREMENTAL=u.DEFAULT_INCREMENTAL=d.DEFAULT_INCREMENTAL=!c.randomize,l.ANIMATE=u.ANIMATE=d.ANIMATE=c.animate,l.TILE=c.tile,l.TILING_PADDING_VERTICAL=typeof c.tilingPaddingVertical=="function"?c.tilingPaddingVertical.call():c.tilingPaddingVertical,l.TILING_PADDING_HORIZONTAL=typeof c.tilingPaddingHorizontal=="function"?c.tilingPaddingHorizontal.call():c.tilingPaddingHorizontal,l.DEFAULT_INCREMENTAL=u.DEFAULT_INCREMENTAL=d.DEFAULT_INCREMENTAL=!0,l.PURE_INCREMENTAL=!c.randomize,d.DEFAULT_UNIFORM_LEAF_NODE_SIZES=c.uniformNodeDimensions,c.step=="transformed"&&(l.TRANSFORM_ON_CONSTRAINT_HANDLING=!0,l.ENFORCE_CONSTRAINTS=!1,l.APPLY_LAYOUT=!1),c.step=="enforced"&&(l.TRANSFORM_ON_CONSTRAINT_HANDLING=!1,l.ENFORCE_CONSTRAINTS=!0,l.APPLY_LAYOUT=!1),c.step=="cose"&&(l.TRANSFORM_ON_CONSTRAINT_HANDLING=!1,l.ENFORCE_CONSTRAINTS=!1,l.APPLY_LAYOUT=!0),c.step=="all"&&(c.randomize?l.TRANSFORM_ON_CONSTRAINT_HANDLING=!0:l.TRANSFORM_ON_CONSTRAINT_HANDLING=!1,l.ENFORCE_CONSTRAINTS=!0,l.APPLY_LAYOUT=!0),c.fixedNodeConstraint||c.alignmentConstraint||c.relativePlacementConstraint?l.TREE_REDUCTION_ON_INCREMENTAL=!1:l.TREE_REDUCTION_ON_INCREMENTAL=!0;var D=new n,O=D.newGraphManager();return v(O.addRoot(),h.getTopMostNodes(P),D,c),m(D,O,z),f(D,c),D.runLayout(),x},"coseLayout");i.exports={coseLayout:N}},212:(i,r,t)=>{var h=function(){function E(_,L){for(var P=0;P<L.length;P++){var z=L[P];z.enumerable=z.enumerable||!1,z.configurable=!0,"value"in z&&(z.writable=!0),Object.defineProperty(_,z.key,z)}}return T(E,"defineProperties"),function(_,L,P){return L&&E(_.prototype,L),P&&E(_,P),_}}();function n(E,_){if(!(E instanceof _))throw new TypeError("Cannot call a class as a function")}T(n,"_classCallCheck");var p=t(658),o=t(548),e=t(657),d=e.spectralLayout,u=t(816),l=u.coseLayout,N=Object.freeze({quality:"default",randomize:!0,animate:!0,animationDuration:1e3,animationEasing:void 0,fit:!0,padding:30,nodeDimensionsIncludeLabels:!1,uniformNodeDimensions:!1,packComponents:!0,step:"all",samplingType:!0,sampleSize:25,nodeSeparation:75,piTol:1e-7,nodeRepulsion:T(function(E){return 4500},"nodeRepulsion"),idealEdgeLength:T(function(E){return 50},"idealEdgeLength"),edgeElasticity:T(function(E){return .45},"edgeElasticity"),nestingFactor:.1,gravity:.25,numIter:2500,tile:!0,tilingCompareBy:void 0,tilingPaddingVertical:10,tilingPaddingHorizontal:10,gravityRangeCompound:1.5,gravityCompound:1,gravityRange:3.8,initialEnergyOnIncremental:.3,fixedNodeConstraint:void 0,alignmentConstraint:void 0,relativePlacementConstraint:void 0,ready:T(function(){},"ready"),stop:T(function(){},"stop")}),c=function(){function E(_){n(this,E),this.options=p({},N,_)}return T(E,"Layout"),h(E,[{key:"run",value:T(function(){var _=this,L=this.options,P=L.cy,z=L.eles,V=[],B=[],q=void 0,x=[];L.fixedNodeConstraint&&(!Array.isArray(L.fixedNodeConstraint)||L.fixedNodeConstraint.length==0)&&(L.fixedNodeConstraint=void 0),L.alignmentConstraint&&(L.alignmentConstraint.vertical&&(!Array.isArray(L.alignmentConstraint.vertical)||L.alignmentConstraint.vertical.length==0)&&(L.alignmentConstraint.vertical=void 0),L.alignmentConstraint.horizontal&&(!Array.isArray(L.alignmentConstraint.horizontal)||L.alignmentConstraint.horizontal.length==0)&&(L.alignmentConstraint.horizontal=void 0)),L.relativePlacementConstraint&&(!Array.isArray(L.relativePlacementConstraint)||L.relativePlacementConstraint.length==0)&&(L.relativePlacementConstraint=void 0);var st=L.fixedNodeConstraint||L.alignmentConstraint||L.relativePlacementConstraint;st&&(L.tile=!1,L.packComponents=!1);var a=void 0,y=!1;if(P.layoutUtilities&&L.packComponents&&(a=P.layoutUtilities("get"),a||(a=P.layoutUtilities()),y=!0),z.nodes().length>0)if(y){var v=o.getTopMostNodes(L.eles.nodes());if(q=o.connectComponents(P,L.eles,v),q.forEach(function(S){var it=S.boundingBox();x.push({x:it.x1+it.w/2,y:it.y1+it.h/2})}),L.randomize&&q.forEach(function(S){L.eles=S,V.push(d(L))}),L.quality=="default"||L.quality=="proof"){var m=P.collection();if(L.tile){var f=new Map,D=[],O=[],M=0,U={nodeIndexes:f,xCoords:D,yCoords:O},X=[];if(q.forEach(function(S,it){S.edges().length==0&&(S.nodes().forEach(function(ht,mt){m.merge(S.nodes()[mt]),ht.isParent()||(U.nodeIndexes.set(S.nodes()[mt].id(),M++),U.xCoords.push(S.nodes()[0].position().x),U.yCoords.push(S.nodes()[0].position().y))}),X.push(it))}),m.length>1){var W=m.boundingBox();x.push({x:W.x1+W.w/2,y:W.y1+W.h/2}),q.push(m),V.push(U);for(var j=X.length-1;j>=0;j--)q.splice(X[j],1),V.splice(X[j],1),x.splice(X[j],1)}}q.forEach(function(S,it){L.eles=S,B.push(l(L,V[it])),o.relocateComponent(x[it],B[it],L)})}else q.forEach(function(S,it){o.relocateComponent(x[it],V[it],L)});var Y=new Set;if(q.length>1){var K=[],k=z.filter(function(S){return S.css("display")=="none"});q.forEach(function(S,it){var ht=void 0;if(L.quality=="draft"&&(ht=V[it].nodeIndexes),S.nodes().not(k).length>0){var mt={};mt.edges=[],mt.nodes=[];var Ct=void 0;S.nodes().not(k).forEach(function(yt){if(L.quality=="draft")if(!yt.isParent())Ct=ht.get(yt.id()),mt.nodes.push({x:V[it].xCoords[Ct]-yt.boundingbox().w/2,y:V[it].yCoords[Ct]-yt.boundingbox().h/2,width:yt.boundingbox().w,height:yt.boundingbox().h});else{var Et=o.calcBoundingBox(yt,V[it].xCoords,V[it].yCoords,ht);mt.nodes.push({x:Et.topLeftX,y:Et.topLeftY,width:Et.width,height:Et.height})}else B[it][yt.id()]&&mt.nodes.push({x:B[it][yt.id()].getLeft(),y:B[it][yt.id()].getTop(),width:B[it][yt.id()].getWidth(),height:B[it][yt.id()].getHeight()})}),S.edges().forEach(function(yt){var Et=yt.source(),xt=yt.target();if(Et.css("display")!="none"&&xt.css("display")!="none")if(L.quality=="draft"){var Vt=ht.get(Et.id()),Ut=ht.get(xt.id()),kt=[],Mt=[];if(Et.isParent()){var Xt=o.calcBoundingBox(Et,V[it].xCoords,V[it].yCoords,ht);kt.push(Xt.topLeftX+Xt.width/2),kt.push(Xt.topLeftY+Xt.height/2)}else kt.push(V[it].xCoords[Vt]),kt.push(V[it].yCoords[Vt]);if(xt.isParent()){var Yt=o.calcBoundingBox(xt,V[it].xCoords,V[it].yCoords,ht);Mt.push(Yt.topLeftX+Yt.width/2),Mt.push(Yt.topLeftY+Yt.height/2)}else Mt.push(V[it].xCoords[Ut]),Mt.push(V[it].yCoords[Ut]);mt.edges.push({startX:kt[0],startY:kt[1],endX:Mt[0],endY:Mt[1]})}else B[it][Et.id()]&&B[it][xt.id()]&&mt.edges.push({startX:B[it][Et.id()].getCenterX(),startY:B[it][Et.id()].getCenterY(),endX:B[it][xt.id()].getCenterX(),endY:B[it][xt.id()].getCenterY()})}),mt.nodes.length>0&&(K.push(mt),Y.add(it))}});var b=a.packComponents(K,L.randomize).shifts;if(L.quality=="draft")V.forEach(function(S,it){var ht=S.xCoords.map(function(Ct){return Ct+b[it].dx}),mt=S.yCoords.map(function(Ct){return Ct+b[it].dy});S.xCoords=ht,S.yCoords=mt});else{var G=0;Y.forEach(function(S){Object.keys(B[S]).forEach(function(it){var ht=B[S][it];ht.setCenter(ht.getCenterX()+b[G].dx,ht.getCenterY()+b[G].dy)}),G++})}}}else{var Z=L.eles.boundingBox();if(x.push({x:Z.x1+Z.w/2,y:Z.y1+Z.h/2}),L.randomize){var rt=d(L);V.push(rt)}L.quality=="default"||L.quality=="proof"?(B.push(l(L,V[0])),o.relocateComponent(x[0],B[0],L)):o.relocateComponent(x[0],V[0],L)}var ut=T(function(S,it){if(L.quality=="default"||L.quality=="proof"){typeof S=="number"&&(S=it);var ht=void 0,mt=void 0,Ct=S.data("id");return B.forEach(function(Et){Ct in Et&&(ht={x:Et[Ct].getRect().getCenterX(),y:Et[Ct].getRect().getCenterY()},mt=Et[Ct])}),L.nodeDimensionsIncludeLabels&&(mt.labelWidth&&(mt.labelPosHorizontal=="left"?ht.x+=mt.labelWidth/2:mt.labelPosHorizontal=="right"&&(ht.x-=mt.labelWidth/2)),mt.labelHeight&&(mt.labelPosVertical=="top"?ht.y+=mt.labelHeight/2:mt.labelPosVertical=="bottom"&&(ht.y-=mt.labelHeight/2))),ht==null&&(ht={x:S.position("x"),y:S.position("y")}),{x:ht.x,y:ht.y}}else{var yt=void 0;return V.forEach(function(Et){var xt=Et.nodeIndexes.get(S.id());xt!=null&&(yt={x:Et.xCoords[xt],y:Et.yCoords[xt]})}),yt==null&&(yt={x:S.position("x"),y:S.position("y")}),{x:yt.x,y:yt.y}}},"getPositions");if(L.quality=="default"||L.quality=="proof"||L.randomize){var It=o.calcParentsWithoutChildren(P,z),Dt=z.filter(function(S){return S.css("display")=="none"});L.eles=z.not(Dt),z.nodes().not(":parent").not(Dt).layoutPositions(_,L,ut),It.length>0&&It.forEach(function(S){S.position(ut(S))})}else console.log("If randomize option is set to false, then quality option must be 'default' or 'proof'.")},"run")}]),E}();i.exports=c},657:(i,r,t)=>{var h=t(548),n=t(140).layoutBase.Matrix,p=t(140).layoutBase.SVD,o=T(function(e){var d=e.cy,u=e.eles,l=u.nodes(),N=u.nodes(":parent"),c=new Map,E=new Map,_=new Map,L=[],P=[],z=[],V=[],B=[],q=[],x=[],st=[],a=void 0,y=1e8,v=1e-9,m=e.piTol,f=e.samplingType,D=e.nodeSeparation,O=void 0,M=T(function(){for(var lt=0,I=0,R=!1;I<O;){lt=Math.floor(Math.random()*a),R=!1;for(var $=0;$<I;$++)if(V[$]==lt){R=!0;break}if(!R)V[I]=lt,I++;else continue}},"randomSampleCR"),U=T(function(lt,I,R){for(var $=[],J=0,Q=0,pt=0,dt=void 0,tt=[],gt=0,Nt=1,_t=0;_t<a;_t++)tt[_t]=y;for($[Q]=lt,tt[lt]=0;Q>=J;){pt=$[J++];for(var et=L[pt],Ot=0;Ot<et.length;Ot++)dt=E.get(et[Ot]),tt[dt]==y&&(tt[dt]=tt[pt]+1,$[++Q]=dt);q[pt][I]=tt[pt]*D}if(R){for(var nt=0;nt<a;nt++)q[nt][I]<B[nt]&&(B[nt]=q[nt][I]);for(var at=0;at<a;at++)B[at]>gt&&(gt=B[at],Nt=at)}return Nt},"BFS"),X=T(function(lt){var I=void 0;if(lt){I=Math.floor(Math.random()*a);for(var R=0;R<a;R++)B[R]=y;for(var $=0;$<O;$++)V[$]=I,I=U(I,$,lt)}else{M();for(var J=0;J<O;J++)U(V[J],J,lt,!1)}for(var Q=0;Q<a;Q++)for(var pt=0;pt<O;pt++)q[Q][pt]*=q[Q][pt];for(var dt=0;dt<O;dt++)x[dt]=[];for(var tt=0;tt<O;tt++)for(var gt=0;gt<O;gt++)x[tt][gt]=q[V[gt]][tt]},"allBFS"),W=T(function(){for(var lt=p.svd(x),I=lt.S,R=lt.U,$=lt.V,J=I[0]*I[0]*I[0],Q=[],pt=0;pt<O;pt++){Q[pt]=[];for(var dt=0;dt<O;dt++)Q[pt][dt]=0,pt==dt&&(Q[pt][dt]=I[pt]/(I[pt]*I[pt]+J/(I[pt]*I[pt])))}st=n.multMat(n.multMat($,Q),n.transpose(R))},"sample"),j=T(function(){for(var lt=void 0,I=void 0,R=[],$=[],J=[],Q=[],pt=0;pt<a;pt++)R[pt]=Math.random(),$[pt]=Math.random();R=n.normalize(R),$=n.normalize($);for(var dt=0,tt=v,gt=v,Nt=void 0;;){dt++;for(var _t=0;_t<a;_t++)J[_t]=R[_t];if(R=n.multGamma(n.multL(n.multGamma(J),q,st)),lt=n.dotProduct(J,R),R=n.normalize(R),tt=n.dotProduct(J,R),Nt=Math.abs(tt/gt),Nt<=1+m&&Nt>=1)break;gt=tt}for(var et=0;et<a;et++)J[et]=R[et];for(dt=0,gt=v;;){dt++;for(var Ot=0;Ot<a;Ot++)Q[Ot]=$[Ot];if(Q=n.minusOp(Q,n.multCons(J,n.dotProduct(J,Q))),$=n.multGamma(n.multL(n.multGamma(Q),q,st)),I=n.dotProduct(Q,$),$=n.normalize($),tt=n.dotProduct(Q,$),Nt=Math.abs(tt/gt),Nt<=1+m&&Nt>=1)break;gt=tt}for(var nt=0;nt<a;nt++)Q[nt]=$[nt];P=n.multCons(J,Math.sqrt(Math.abs(lt))),z=n.multCons(Q,Math.sqrt(Math.abs(I)))},"powerIteration");h.connectComponents(d,u,h.getTopMostNodes(l),c),N.forEach(function(lt){h.connectComponents(d,u,h.getTopMostNodes(lt.descendants().intersection(u)),c)});for(var Y=0,K=0;K<l.length;K++)l[K].isParent()||E.set(l[K].id(),Y++);var k=!0,b=!1,G=void 0;try{for(var Z=c.keys()[Symbol.iterator](),rt;!(k=(rt=Z.next()).done);k=!0){var ut=rt.value;E.set(ut,Y++)}}catch(lt){b=!0,G=lt}finally{try{!k&&Z.return&&Z.return()}finally{if(b)throw G}}for(var It=0;It<E.size;It++)L[It]=[];N.forEach(function(lt){for(var I=lt.children().intersection(u);I.nodes(":childless").length==0;)I=I.nodes()[0].children().intersection(u);var R=0,$=I.nodes(":childless")[0].connectedEdges().length;I.nodes(":childless").forEach(function(J,Q){J.connectedEdges().length<$&&($=J.connectedEdges().length,R=Q)}),_.set(lt.id(),I.nodes(":childless")[R].id())}),l.forEach(function(lt){var I=void 0;lt.isParent()?I=E.get(_.get(lt.id())):I=E.get(lt.id()),lt.neighborhood().nodes().forEach(function(R){u.intersection(lt.edgesWith(R)).length>0&&(R.isParent()?L[I].push(_.get(R.id())):L[I].push(R.id()))})});var Dt=T(function(lt){var I=E.get(lt),R=void 0;c.get(lt).forEach(function($){d.getElementById($).isParent()?R=_.get($):R=$,L[I].push(R),L[E.get(R)].push(lt)})},"_loop"),S=!0,it=!1,ht=void 0;try{for(var mt=c.keys()[Symbol.iterator](),Ct;!(S=(Ct=mt.next()).done);S=!0){var yt=Ct.value;Dt(yt)}}catch(lt){it=!0,ht=lt}finally{try{!S&&mt.return&&mt.return()}finally{if(it)throw ht}}a=E.size;var Et=void 0;if(a>2){O=a<e.sampleSize?a:e.sampleSize;for(var xt=0;xt<a;xt++)q[xt]=[];for(var Vt=0;Vt<O;Vt++)st[Vt]=[];return e.quality=="draft"||e.step=="all"?(X(f),W(),j(),Et={nodeIndexes:E,xCoords:P,yCoords:z}):(E.forEach(function(lt,I){P.push(d.getElementById(I).position("x")),z.push(d.getElementById(I).position("y"))}),Et={nodeIndexes:E,xCoords:P,yCoords:z}),Et}else{var Ut=E.keys(),kt=d.getElementById(Ut.next().value),Mt=kt.position(),Xt=kt.outerWidth();if(P.push(Mt.x),z.push(Mt.y),a==2){var Yt=d.getElementById(Ut.next().value),$t=Yt.outerWidth();P.push(Mt.x+Xt/2+$t/2+e.idealEdgeLength),z.push(Mt.y)}return Et={nodeIndexes:E,xCoords:P,yCoords:z},Et}},"spectralLayout");i.exports={spectralLayout:o}},579:(i,r,t)=>{var h=t(212),n=T(function(p){p&&p("layout","fcose",h)},"register");typeof cytoscape<"u"&&n(cytoscape),i.exports=n},140:i=>{i.exports=C}},A={};function g(i){var r=A[i];if(r!==void 0)return r.exports;var t=A[i]={exports:{}};return F[i](t,t.exports,g),t.exports}T(g,"__webpack_require__");var s=g(579);return s})()})}),Ie={L:"left",R:"right",T:"top",B:"bottom"},Ce={L:T(w=>`${w},${w/2} 0,${w} 0,0`,"L"),R:T(w=>`0,${w/2} ${w},0 ${w},${w}`,"R"),T:T(w=>`0,0 ${w},0 ${w/2},${w}`,"T"),B:T(w=>`${w/2},0 ${w},${w} 0,${w}`,"B")},se={L:T((w,H)=>w-H+2,"L"),R:T((w,H)=>w-2,"R"),T:T((w,H)=>w-H+2,"T"),B:T((w,H)=>w-2,"B")},sr=T(function(w){return Ht(w)?w==="L"?"R":"L":w==="T"?"B":"T"},"getOppositeArchitectureDirection"),Oe=T(function(w){let H=w;return H==="L"||H==="R"||H==="T"||H==="B"},"isArchitectureDirection"),Ht=T(function(w){let H=w;return H==="L"||H==="R"},"isArchitectureDirectionX"),Zt=T(function(w){let H=w;return H==="T"||H==="B"},"isArchitectureDirectionY"),De=T(function(w,H){let C=Ht(w)&&Zt(H),F=Zt(w)&&Ht(H);return C||F},"isArchitectureDirectionXY"),hr=T(function(w){let H=w[0],C=w[1],F=Ht(H)&&Zt(C),A=Zt(H)&&Ht(C);return F||A},"isArchitecturePairXY"),lr=T(function(w){return w!=="LL"&&w!=="RR"&&w!=="TT"&&w!=="BB"},"isValidArchitectureDirectionPair"),pe=T(function(w,H){let C=`${w}${H}`;return lr(C)?C:void 0},"getArchitectureDirectionPair"),dr=T(function([w,H],C){let F=C[0],A=C[1];return Ht(F)?Zt(A)?[w+(F==="L"?-1:1),H+(A==="T"?1:-1)]:[w+(F==="L"?-1:1),H]:Ht(A)?[w+(A==="L"?1:-1),H+(F==="T"?1:-1)]:[w,H+(F==="T"?1:-1)]},"shiftPositionByArchitectureDirectionPair"),cr=T(function(w){return w==="LT"||w==="TL"?[1,1]:w==="BL"||w==="LB"?[1,-1]:w==="BR"||w==="RB"?[-1,-1]:[-1,1]},"getArchitectureDirectionXYFactors"),gr=T(function(w){return w.type==="service"},"isArchitectureService"),ur=T(function(w){return w.type==="junction"},"isArchitectureJunction"),be=T(w=>w.data(),"edgeData"),ie=T(w=>w.data(),"nodeData"),Re=rr.architecture,vt=new He(()=>({nodes:{},groups:{},edges:[],registeredIds:{},config:Re,dataStructures:void 0,elements:{}})),fr=T(()=>{vt.reset(),tr()},"clear"),pr=T(function({id:w,icon:H,in:C,title:F,iconText:A}){if(vt.records.registeredIds[w]!==void 0)throw new Error(`The service id [${w}] is already in use by another ${vt.records.registeredIds[w]}`);if(C!==void 0){if(w===C)throw new Error(`The service [${w}] cannot be placed within itself`);if(vt.records.registeredIds[C]===void 0)throw new Error(`The service [${w}]'s parent does not exist. Please make sure the parent is created before this service`);if(vt.records.registeredIds[C]==="node")throw new Error(`The service [${w}]'s parent is not a group`)}vt.records.registeredIds[w]="node",vt.records.nodes[w]={id:w,type:"service",icon:H,iconText:A,title:F,edges:[],in:C}},"addService"),vr=T(()=>Object.values(vt.records.nodes).filter(gr),"getServices"),mr=T(function({id:w,in:H}){vt.records.registeredIds[w]="node",vt.records.nodes[w]={id:w,type:"junction",edges:[],in:H}},"addJunction"),yr=T(()=>Object.values(vt.records.nodes).filter(ur),"getJunctions"),Er=T(()=>Object.values(vt.records.nodes),"getNodes"),Nr=T(w=>vt.records.nodes[w],"getNode"),Tr=T(function({id:w,icon:H,in:C,title:F}){if(vt.records.registeredIds[w]!==void 0)throw new Error(`The group id [${w}] is already in use by another ${vt.records.registeredIds[w]}`);if(C!==void 0){if(w===C)throw new Error(`The group [${w}] cannot be placed within itself`);if(vt.records.registeredIds[C]===void 0)throw new Error(`The group [${w}]'s parent does not exist. Please make sure the parent is created before this group`);if(vt.records.registeredIds[C]==="node")throw new Error(`The group [${w}]'s parent is not a group`)}vt.records.registeredIds[w]="group",vt.records.groups[w]={id:w,icon:H,title:F,in:C}},"addGroup"),Ar=T(()=>Object.values(vt.records.groups),"getGroups"),wr=T(function({lhsId:w,rhsId:H,lhsDir:C,rhsDir:F,lhsInto:A,rhsInto:g,lhsGroup:s,rhsGroup:i,title:r}){if(!Oe(C))throw new Error(`Invalid direction given for left hand side of edge ${w}--${H}. Expected (L,R,T,B) got ${C}`);if(!Oe(F))throw new Error(`Invalid direction given for right hand side of edge ${w}--${H}. Expected (L,R,T,B) got ${F}`);if(vt.records.nodes[w]===void 0&&vt.records.groups[w]===void 0)throw new Error(`The left-hand id [${w}] does not yet exist. Please create the service/group before declaring an edge to it.`);if(vt.records.nodes[H]===void 0&&vt.records.groups[w]===void 0)throw new Error(`The right-hand id [${H}] does not yet exist. Please create the service/group before declaring an edge to it.`);let t=vt.records.nodes[w].in,h=vt.records.nodes[H].in;if(s&&t&&h&&t==h)throw new Error(`The left-hand id [${w}] is modified to traverse the group boundary, but the edge does not pass through two groups.`);if(i&&t&&h&&t==h)throw new Error(`The right-hand id [${H}] is modified to traverse the group boundary, but the edge does not pass through two groups.`);let n={lhsId:w,lhsDir:C,lhsInto:A,lhsGroup:s,rhsId:H,rhsDir:F,rhsInto:g,rhsGroup:i,title:r};vt.records.edges.push(n),vt.records.nodes[w]&&vt.records.nodes[H]&&(vt.records.nodes[w].edges.push(vt.records.edges[vt.records.edges.length-1]),vt.records.nodes[H].edges.push(vt.records.edges[vt.records.edges.length-1]))},"addEdge"),_r=T(()=>vt.records.edges,"getEdges"),Lr=T(()=>{if(vt.records.dataStructures===void 0){let w=Object.entries(vt.records.nodes).reduce((s,[i,r])=>(s[i]=r.edges.reduce((t,h)=>{if(h.lhsId===i){let n=pe(h.lhsDir,h.rhsDir);n&&(t[n]=h.rhsId)}else{let n=pe(h.rhsDir,h.lhsDir);n&&(t[n]=h.lhsId)}return t},{}),s),{}),H=Object.keys(w)[0],C={[H]:1},F=Object.keys(w).reduce((s,i)=>i===H?s:{...s,[i]:1},{}),A=T(s=>{let i={[s]:[0,0]},r=[s];for(;r.length>0;){let t=r.shift();if(t){C[t]=1,delete F[t];let h=w[t],[n,p]=i[t];Object.entries(h).forEach(([o,e])=>{C[e]||(i[e]=dr([n,p],o),r.push(e))})}}return i},"BFS"),g=[A(H)];for(;Object.keys(F).length>0;)g.push(A(Object.keys(F)[0]));vt.records.dataStructures={adjList:w,spatialMaps:g}}return vt.records.dataStructures},"getDataStructures"),Ir=T((w,H)=>{vt.records.elements[w]=H},"setElementForId"),Cr=T(w=>vt.records.elements[w],"getElementById"),he={clear:fr,setDiagramTitle:Je,getDiagramTitle:Ze,setAccTitle:qe,getAccTitle:$e,setAccDescription:je,getAccDescription:We,addService:pr,getServices:vr,addJunction:mr,getJunctions:yr,getNodes:Er,getNode:Nr,addGroup:Tr,getGroups:Ar,addEdge:wr,getEdges:_r,setElementForId:Ir,getElementById:Cr,getDataStructures:Lr};function St(w){let H=le().architecture;return H?.[w]?H[w]:Re[w]}T(St,"getConfigField");var Or=T((w,H)=>{Ve(w,H),w.groups.map(H.addGroup),w.services.map(C=>H.addService({...C,type:"service"})),w.junctions.map(C=>H.addJunction({...C,type:"junction"})),w.edges.map(H.addEdge)},"populateDb"),xr={parse:T(async w=>{let H=await Be("architecture",w);Me.debug(H),Or(H,he)},"parse")},Mr=T(w=>`
  .edge {
    stroke-width: ${w.archEdgeWidth};
    stroke: ${w.archEdgeColor};
    fill: none;
  }

  .arrow {
    fill: ${w.archEdgeArrowColor};
  }

  .node-bkg {
    fill: none;
    stroke: ${w.archGroupBorderColor};
    stroke-width: ${w.archGroupBorderWidth};
    stroke-dasharray: 8;
  }
  .node-icon-text {
    display: flex; 
    align-items: center;
  }
  
  .node-icon-text > div {
    color: #fff;
    margin: 1px;
    height: fit-content;
    text-align: center;
    overflow: hidden;
    display: -webkit-box;
    -webkit-box-orient: vertical;
  }
`,"getStyles"),Dr=Mr,br=ir(ar()),re=T(w=>`<g><rect width="80" height="80" style="fill: #087ebf; stroke-width: 0px;"/>${w}</g>`,"wrapIcon"),oe={prefix:"mermaid-architecture",height:80,width:80,icons:{database:{body:re('<path id="b" data-name="4" d="m20,57.86c0,3.94,8.95,7.14,20,7.14s20-3.2,20-7.14" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><path id="c" data-name="3" d="m20,45.95c0,3.94,8.95,7.14,20,7.14s20-3.2,20-7.14" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><path id="d" data-name="2" d="m20,34.05c0,3.94,8.95,7.14,20,7.14s20-3.2,20-7.14" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><ellipse id="e" data-name="1" cx="40" cy="22.14" rx="20" ry="7.14" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><line x1="20" y1="57.86" x2="20" y2="22.14" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><line x1="60" y1="57.86" x2="60" y2="22.14" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/>')},server:{body:re('<rect x="17.5" y="17.5" width="45" height="45" rx="2" ry="2" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><line x1="17.5" y1="32.5" x2="62.5" y2="32.5" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><line x1="17.5" y1="47.5" x2="62.5" y2="47.5" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><g><path d="m56.25,25c0,.27-.45.5-1,.5h-10.5c-.55,0-1-.23-1-.5s.45-.5,1-.5h10.5c.55,0,1,.23,1,.5Z" style="fill: #fff; stroke-width: 0px;"/><path d="m56.25,25c0,.27-.45.5-1,.5h-10.5c-.55,0-1-.23-1-.5s.45-.5,1-.5h10.5c.55,0,1,.23,1,.5Z" style="fill: none; stroke: #fff; stroke-miterlimit: 10;"/></g><g><path d="m56.25,40c0,.27-.45.5-1,.5h-10.5c-.55,0-1-.23-1-.5s.45-.5,1-.5h10.5c.55,0,1,.23,1,.5Z" style="fill: #fff; stroke-width: 0px;"/><path d="m56.25,40c0,.27-.45.5-1,.5h-10.5c-.55,0-1-.23-1-.5s.45-.5,1-.5h10.5c.55,0,1,.23,1,.5Z" style="fill: none; stroke: #fff; stroke-miterlimit: 10;"/></g><g><path d="m56.25,55c0,.27-.45.5-1,.5h-10.5c-.55,0-1-.23-1-.5s.45-.5,1-.5h10.5c.55,0,1,.23,1,.5Z" style="fill: #fff; stroke-width: 0px;"/><path d="m56.25,55c0,.27-.45.5-1,.5h-10.5c-.55,0-1-.23-1-.5s.45-.5,1-.5h10.5c.55,0,1,.23,1,.5Z" style="fill: none; stroke: #fff; stroke-miterlimit: 10;"/></g><g><circle cx="32.5" cy="25" r=".75" style="fill: #fff; stroke: #fff; stroke-miterlimit: 10;"/><circle cx="27.5" cy="25" r=".75" style="fill: #fff; stroke: #fff; stroke-miterlimit: 10;"/><circle cx="22.5" cy="25" r=".75" style="fill: #fff; stroke: #fff; stroke-miterlimit: 10;"/></g><g><circle cx="32.5" cy="40" r=".75" style="fill: #fff; stroke: #fff; stroke-miterlimit: 10;"/><circle cx="27.5" cy="40" r=".75" style="fill: #fff; stroke: #fff; stroke-miterlimit: 10;"/><circle cx="22.5" cy="40" r=".75" style="fill: #fff; stroke: #fff; stroke-miterlimit: 10;"/></g><g><circle cx="32.5" cy="55" r=".75" style="fill: #fff; stroke: #fff; stroke-miterlimit: 10;"/><circle cx="27.5" cy="55" r=".75" style="fill: #fff; stroke: #fff; stroke-miterlimit: 10;"/><circle cx="22.5" cy="55" r=".75" style="fill: #fff; stroke: #fff; stroke-miterlimit: 10;"/></g>')},disk:{body:re('<rect x="20" y="15" width="40" height="50" rx="1" ry="1" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><ellipse cx="24" cy="19.17" rx=".8" ry=".83" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><ellipse cx="56" cy="19.17" rx=".8" ry=".83" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><ellipse cx="24" cy="60.83" rx=".8" ry=".83" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><ellipse cx="56" cy="60.83" rx=".8" ry=".83" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><ellipse cx="40" cy="33.75" rx="14" ry="14.58" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><ellipse cx="40" cy="33.75" rx="4" ry="4.17" style="fill: #fff; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><path d="m37.51,42.52l-4.83,13.22c-.26.71-1.1,1.02-1.76.64l-4.18-2.42c-.66-.38-.81-1.26-.33-1.84l9.01-10.8c.88-1.05,2.56-.08,2.09,1.2Z" style="fill: #fff; stroke-width: 0px;"/>')},internet:{body:re('<circle cx="40" cy="40" r="22.5" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><line x1="40" y1="17.5" x2="40" y2="62.5" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><line x1="17.5" y1="40" x2="62.5" y2="40" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><path d="m39.99,17.51c-15.28,11.1-15.28,33.88,0,44.98" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><path d="m40.01,17.51c15.28,11.1,15.28,33.88,0,44.98" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><line x1="19.75" y1="30.1" x2="60.25" y2="30.1" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/><line x1="19.75" y1="49.9" x2="60.25" y2="49.9" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/>')},cloud:{body:re('<path d="m65,47.5c0,2.76-2.24,5-5,5H20c-2.76,0-5-2.24-5-5,0-1.87,1.03-3.51,2.56-4.36-.04-.21-.06-.42-.06-.64,0-2.6,2.48-4.74,5.65-4.97,1.65-4.51,6.34-7.76,11.85-7.76.86,0,1.69.08,2.5.23,2.09-1.57,4.69-2.5,7.5-2.5,6.1,0,11.19,4.38,12.28,10.17,2.14.56,3.72,2.51,3.72,4.83,0,.03,0,.07-.01.1,2.29.46,4.01,2.48,4.01,4.9Z" style="fill: none; stroke: #fff; stroke-miterlimit: 10; stroke-width: 2px;"/>')},unknown:or,blank:{body:re("")}}},Rr=T(async function(w,H){let C=St("padding"),F=St("iconSize"),A=F/2,g=F/6,s=g/2;await Promise.all(H.edges().map(async i=>{let{source:r,sourceDir:t,sourceArrow:h,sourceGroup:n,target:p,targetDir:o,targetArrow:e,targetGroup:d,label:u}=be(i),{x:l,y:N}=i[0].sourceEndpoint(),{x:c,y:E}=i[0].midpoint(),{x:_,y:L}=i[0].targetEndpoint(),P=C+4;if(n&&(Ht(t)?l+=t==="L"?-P:P:N+=t==="T"?-P:P+18),d&&(Ht(o)?_+=o==="L"?-P:P:L+=o==="T"?-P:P+18),!n&&he.getNode(r)?.type==="junction"&&(Ht(t)?l+=t==="L"?A:-A:N+=t==="T"?A:-A),!d&&he.getNode(p)?.type==="junction"&&(Ht(o)?_+=o==="L"?A:-A:L+=o==="T"?A:-A),i[0]._private.rscratch){let z=w.insert("g");if(z.insert("path").attr("d",`M ${l},${N} L ${c},${E} L${_},${L} `).attr("class","edge"),h){let V=Ht(t)?se[t](l,g):l-s,B=Zt(t)?se[t](N,g):N-s;z.insert("polygon").attr("points",Ce[t](g)).attr("transform",`translate(${V},${B})`).attr("class","arrow")}if(e){let V=Ht(o)?se[o](_,g):_-s,B=Zt(o)?se[o](L,g):L-s;z.insert("polygon").attr("points",Ce[o](g)).attr("transform",`translate(${V},${B})`).attr("class","arrow")}if(u){let V=De(t,o)?"XY":Ht(t)?"X":"Y",B=0;V==="X"?B=Math.abs(l-_):V==="Y"?B=Math.abs(N-L)/1.5:B=Math.abs(l-_)/2;let q=z.append("g");if(await ve(q,u,{useHtmlLabels:!1,width:B,classes:"architecture-service-label"},le()),q.attr("dy","1em").attr("alignment-baseline","middle").attr("dominant-baseline","middle").attr("text-anchor","middle"),V==="X")q.attr("transform","translate("+c+", "+E+")");else if(V==="Y")q.attr("transform","translate("+c+", "+E+") rotate(-90)");else if(V==="XY"){let x=pe(t,o);if(x&&hr(x)){let st=q.node().getBoundingClientRect(),[a,y]=cr(x);q.attr("dominant-baseline","auto").attr("transform",`rotate(${-1*a*y*45})`);let v=q.node().getBoundingClientRect();q.attr("transform",`
                translate(${c}, ${E-st.height/2})
                translate(${a*v.width/2}, ${y*v.height/2})
                rotate(${-1*a*y*45}, 0, ${st.height/2})
              `)}}}}}))},"drawEdges"),Fr=T(async function(w,H){let C=St("padding")*.75,F=St("fontSize"),A=St("iconSize")/2;await Promise.all(H.nodes().map(async g=>{let s=ie(g);if(s.type==="group"){let{h:i,w:r,x1:t,y1:h}=g.boundingBox();w.append("rect").attr("x",t+A).attr("y",h+A).attr("width",r).attr("height",i).attr("class","node-bkg");let n=w.append("g"),p=t,o=h;if(s.icon){let e=n.append("g");e.html(`<g>${await fe(s.icon,{height:C,width:C,fallbackPrefix:oe.prefix})}</g>`),e.attr("transform","translate("+(p+A+1)+", "+(o+A+1)+")"),p+=C,o+=F/2-1-2}if(s.label){let e=n.append("g");await ve(e,s.label,{useHtmlLabels:!1,width:r,classes:"architecture-service-label"},le()),e.attr("dy","1em").attr("alignment-baseline","middle").attr("dominant-baseline","start").attr("text-anchor","start"),e.attr("transform","translate("+(p+A+4)+", "+(o+A+2)+")")}}}))},"drawGroups"),Gr=T(async function(w,H,C){for(let F of C){let A=H.append("g"),g=St("iconSize");if(F.title){let t=A.append("g");await ve(t,F.title,{useHtmlLabels:!1,width:g*1.5,classes:"architecture-service-label"},le()),t.attr("dy","1em").attr("alignment-baseline","middle").attr("dominant-baseline","middle").attr("text-anchor","middle"),t.attr("transform","translate("+g/2+", "+g+")")}let s=A.append("g");if(F.icon)s.html(`<g>${await fe(F.icon,{height:g,width:g,fallbackPrefix:oe.prefix})}</g>`);else if(F.iconText){s.html(`<g>${await fe("blank",{height:g,width:g,fallbackPrefix:oe.prefix})}</g>`);let t=s.append("g").append("foreignObject").attr("width",g).attr("height",g).append("div").attr("class","node-icon-text").attr("style",`height: ${g}px;`).append("div").html(F.iconText),h=parseInt(window.getComputedStyle(t.node(),null).getPropertyValue("font-size").replace(/\D/g,""))??16;t.attr("style",`-webkit-line-clamp: ${Math.floor((g-2)/h)};`)}else s.append("path").attr("class","node-bkg").attr("id","node-"+F.id).attr("d",`M0 ${g} v${-g} q0,-5 5,-5 h${g} q5,0 5,5 v${g} H0 Z`);A.attr("class","architecture-service");let{width:i,height:r}=A._groups[0][0].getBBox();F.width=i,F.height=r,w.setElementForId(F.id,A)}return 0},"drawServices"),Sr=T(function(w,H,C){C.forEach(F=>{let A=H.append("g"),g=St("iconSize");A.append("g").append("rect").attr("id","node-"+F.id).attr("fill-opacity","0").attr("width",g).attr("height",g),A.attr("class","architecture-junction");let{width:s,height:i}=A._groups[0][0].getBBox();A.width=s,A.height=i,w.setElementForId(F.id,A)})},"drawJunctions");nr([{name:oe.prefix,icons:oe}]);xe.use(br.default);function Fe(w,H){w.forEach(C=>{H.add({group:"nodes",data:{type:"service",id:C.id,icon:C.icon,label:C.title,parent:C.in,width:St("iconSize"),height:St("iconSize")},classes:"node-service"})})}T(Fe,"addServices");function Ge(w,H){w.forEach(C=>{H.add({group:"nodes",data:{type:"junction",id:C.id,parent:C.in,width:St("iconSize"),height:St("iconSize")},classes:"node-junction"})})}T(Ge,"addJunctions");function Se(w,H){H.nodes().map(C=>{let F=ie(C);F.type!=="group"&&(F.x=C.position().x,F.y=C.position().y,w.getElementById(F.id).attr("transform","translate("+(F.x||0)+","+(F.y||0)+")"))})}T(Se,"positionNodes");function Pe(w,H){w.forEach(C=>{H.add({group:"nodes",data:{type:"group",id:C.id,icon:C.icon,label:C.title,parent:C.in},classes:"node-group"})})}T(Pe,"addGroups");function ke(w,H){w.forEach(C=>{let{lhsId:F,rhsId:A,lhsInto:g,lhsGroup:s,rhsInto:i,lhsDir:r,rhsDir:t,rhsGroup:h,title:n}=C,p=De(C.lhsDir,C.rhsDir)?"segments":"straight",o={id:`${F}-${A}`,label:n,source:F,sourceDir:r,sourceArrow:g,sourceGroup:s,sourceEndpoint:r==="L"?"0 50%":r==="R"?"100% 50%":r==="T"?"50% 0":"50% 100%",target:A,targetDir:t,targetArrow:i,targetGroup:h,targetEndpoint:t==="L"?"0 50%":t==="R"?"100% 50%":t==="T"?"50% 0":"50% 100%"};H.add({group:"edges",data:o,classes:p})})}T(ke,"addEdges");function Ue(w){let H=w.map(A=>{let g={},s={};return Object.entries(A).forEach(([i,[r,t]])=>{g[t]||(g[t]=[]),s[r]||(s[r]=[]),g[t].push(i),s[r].push(i)}),{horiz:Object.values(g).filter(i=>i.length>1),vert:Object.values(s).filter(i=>i.length>1)}}),[C,F]=H.reduce(([A,g],{horiz:s,vert:i})=>[[...A,...s],[...g,...i]],[[],[]]);return{horizontal:C,vertical:F}}T(Ue,"getAlignments");function Xe(w){let H=[],C=T(A=>`${A[0]},${A[1]}`,"posToStr"),F=T(A=>A.split(",").map(g=>parseInt(g)),"strToPos");return w.forEach(A=>{let g=Object.fromEntries(Object.entries(A).map(([t,h])=>[C(h),t])),s=[C([0,0])],i={},r={L:[-1,0],R:[1,0],T:[0,1],B:[0,-1]};for(;s.length>0;){let t=s.shift();if(t){i[t]=1;let h=g[t];if(h){let n=F(t);Object.entries(r).forEach(([p,o])=>{let e=C([n[0]+o[0],n[1]+o[1]]),d=g[e];d&&!i[e]&&(s.push(e),H.push({[Ie[p]]:d,[Ie[sr(p)]]:h,gap:1.5*St("iconSize")}))})}}}}),H}T(Xe,"getRelativeConstraints");function Ye(w,H,C,F,{spatialMaps:A}){return new Promise(g=>{let s=er("body").append("div").attr("id","cy").attr("style","display:none"),i=xe({container:document.getElementById("cy"),style:[{selector:"edge",style:{"curve-style":"straight",label:"data(label)","source-endpoint":"data(sourceEndpoint)","target-endpoint":"data(targetEndpoint)"}},{selector:"edge.segments",style:{"curve-style":"segments","segment-weights":"0","segment-distances":[.5],"edge-distances":"endpoints","source-endpoint":"data(sourceEndpoint)","target-endpoint":"data(targetEndpoint)"}},{selector:"node",style:{"compound-sizing-wrt-labels":"include"}},{selector:"node[label]",style:{"text-valign":"bottom","text-halign":"center","font-size":`${St("fontSize")}px`}},{selector:".node-service",style:{label:"data(label)",width:"data(width)",height:"data(height)"}},{selector:".node-junction",style:{width:"data(width)",height:"data(height)"}},{selector:".node-group",style:{padding:`${St("padding")}px`}}]});s.remove(),Pe(C,i),Fe(w,i),Ge(H,i),ke(F,i);let r=Ue(A),t=Xe(A),h=i.layout({name:"fcose",quality:"proof",styleEnabled:!1,animate:!1,nodeDimensionsIncludeLabels:!1,idealEdgeLength(n){let[p,o]=n.connectedNodes(),{parent:e}=ie(p),{parent:d}=ie(o);return e===d?1.5*St("iconSize"):.5*St("iconSize")},edgeElasticity(n){let[p,o]=n.connectedNodes(),{parent:e}=ie(p),{parent:d}=ie(o);return e===d?.45:.001},alignmentConstraint:r,relativePlacementConstraint:t});h.one("layoutstop",()=>{function n(p,o,e,d){let u,l,{x:N,y:c}=p,{x:E,y:_}=o;l=(d-c+(N-e)*(c-_)/(N-E))/Math.sqrt(1+Math.pow((c-_)/(N-E),2)),u=Math.sqrt(Math.pow(d-c,2)+Math.pow(e-N,2)-Math.pow(l,2));let L=Math.sqrt(Math.pow(E-N,2)+Math.pow(_-c,2));u=u/L;let P=(E-N)*(d-c)-(_-c)*(e-N);switch(!0){case P>=0:P=1;break;case P<0:P=-1;break}let z=(E-N)*(e-N)+(_-c)*(d-c);switch(!0){case z>=0:z=1;break;case z<0:z=-1;break}return l=Math.abs(l)*P,u=u*z,{distances:l,weights:u}}T(n,"getSegmentWeights"),i.startBatch();for(let p of Object.values(i.edges()))if(p.data?.()){let{x:o,y:e}=p.source().position(),{x:d,y:u}=p.target().position();if(o!==d&&e!==u){let l=p.sourceEndpoint(),N=p.targetEndpoint(),{sourceDir:c}=be(p),[E,_]=Zt(c)?[l.x,N.y]:[N.x,l.y],{weights:L,distances:P}=n(l,N,E,_);p.style("segment-distances",P),p.style("segment-weights",L)}}i.endBatch(),h.run()}),h.run(),i.ready(n=>{Me.info("Ready",n),g(i)})})}T(Ye,"layoutArchitecture");var Pr=T(async(w,H,C,F)=>{let A=F.db,g=A.getServices(),s=A.getJunctions(),i=A.getGroups(),r=A.getEdges(),t=A.getDataStructures(),h=Ke(H),n=h.append("g");n.attr("class","architecture-edges");let p=h.append("g");p.attr("class","architecture-services");let o=h.append("g");o.attr("class","architecture-groups"),await Gr(A,p,g),Sr(A,p,s);let e=await Ye(g,s,i,r,t);await Rr(n,e),await Fr(o,e),Se(A,e),Qe(void 0,h,St("padding"),St("useMaxWidth"))},"draw"),kr={draw:Pr},Wr={parser:xr,db:he,renderer:kr,styles:Dr};export{Wr as diagram};
