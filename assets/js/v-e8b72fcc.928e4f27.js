"use strict";(self.webpackChunkZeblog=self.webpackChunkZeblog||[]).push([[7137],{65948:(s,a,n)=>{n.r(a),n.d(a,{default:()=>l});var e=n(66252);const t=[(0,e.uE)('<h1 id="openssl一键自签证书" tabindex="-1"><a class="header-anchor" href="#openssl一键自签证书" aria-hidden="true">#</a> Openssl一键自签证书</h1><p><code>vim openssl.sh</code></p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token shebang important">#!/bin/bash</span>\n<span class="token keyword">while</span> <span class="token punctuation">[</span><span class="token punctuation">[</span> -z <span class="token string">&quot;<span class="token variable">$domain</span>&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">do</span>\n    <span class="token builtin class-name">read</span> -p <span class="token string">&quot;输入域名/IP(必填,如 *.haoduck.com): &quot;</span> domain\n<span class="token keyword">done</span>\n<span class="token builtin class-name">read</span> -p <span class="token string">&quot;输入邮箱(选填,默认admin@haoduck.com): &quot;</span> mail\n<span class="token punctuation">[</span><span class="token punctuation">[</span> -z <span class="token string">&quot;<span class="token variable">$mail</span>&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> <span class="token assign-left variable">mail</span><span class="token operator">=</span>admin@haoduck.com\n<span class="token builtin class-name">read</span> -p <span class="token string">&quot;输入日期(选填,默认3650): &quot;</span> day\n<span class="token punctuation">[</span><span class="token punctuation">[</span> -z <span class="token string">&quot;<span class="token variable">$day</span>&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> <span class="token assign-left variable">day</span><span class="token operator">=</span><span class="token number">3650</span>\n<span class="token assign-left variable">dir</span><span class="token operator">=</span><span class="token variable">$domain</span> <span class="token operator">&amp;&amp;</span> <span class="token function">mkdir</span> -p <span class="token variable">$dir</span>\n<span class="token assign-left variable">crt_file</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable">$dir</span>/<span class="token variable">${domain}</span>.crt&quot;</span>\n<span class="token assign-left variable">key_file</span><span class="token operator">=</span><span class="token string">&quot;<span class="token variable">$dir</span>/<span class="token variable">${domain}</span>.key&quot;</span>\n<span class="token keyword">if</span> <span class="token punctuation">[</span><span class="token punctuation">[</span> <span class="token string">&quot;<span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">command</span> -v openssl<span class="token variable">)</span></span>&quot;</span> <span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">then</span>\n    openssl req -x509 -nodes -newkey rsa:2048 -days <span class="token variable">$day</span> -keyout <span class="token variable">$key_file</span> -out <span class="token variable">$crt_file</span> -subj <span class="token string">&quot;/C=US/ST=California/L=Los Angeles/O=Haoduck/OU=Aoao/CN=<span class="token variable">${domain}</span>/emailAddress=<span class="token variable">${mail}</span>&quot;</span>\n    <span class="token builtin class-name">echo</span> -e <span class="token string">&quot;<span class="token entity" title="\\t">\\t</span>证书：<span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">pwd</span><span class="token variable">)</span></span>/<span class="token variable">$crt_file</span><span class="token entity" title="\\n">\\n</span><span class="token entity" title="\\t">\\t</span>私钥：<span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">pwd</span><span class="token variable">)</span></span>/<span class="token variable">$key_file</span>&quot;</span>\n<span class="token keyword">else</span>\n    <span class="token builtin class-name">echo</span> <span class="token string">&quot;openssl 未安装&quot;</span>\n<span class="token keyword">fi</span>\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>bash openssl.sh</code></p>',4)],p={},l=(0,n(83744).Z)(p,[["render",function(s,a){return(0,e.wg)(),(0,e.iD)("div",null,t)}]])},83744:(s,a)=>{a.Z=(s,a)=>{const n=s.__vccOpts||s;for(const[s,e]of a)n[s]=e;return n}},78337:(s,a,n)=>{n.r(a),n.d(a,{data:()=>e});const e=JSON.parse('{"key":"v-e8b72fcc","path":"/others/openssl%E4%B8%80%E9%94%AE%E8%87%AA%E7%AD%BE%E8%AF%81%E4%B9%A6.html","title":"Openssl一键自签证书","lang":"zh-CN","frontmatter":{"author":"jiange1236","title":"Openssl一键自签证书","description":"Openssl一键自签证书","date":"2022-01-18T00:00:00.000Z","category":"other","tag":"other","article":true,"timeline":true,"icon":null,"password":null},"excerpt":"","headers":[{"level":1,"title":"Openssl一键自签证书","slug":"openssl一键自签证书","children":[]}],"git":{"updatedTime":1652532191000,"contributors":[{"name":"jiange1236","email":"183465355@qq.com","commits":4}]},"filePathRelative":"others/openssl一键自签证书.md"}')}}]);