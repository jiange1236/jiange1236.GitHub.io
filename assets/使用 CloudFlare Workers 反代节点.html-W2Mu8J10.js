import{_ as e}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as a,o as r,a as t}from"./app-Cd448FTx.js";const s={},n=t('<h1 id="使用-cloudflare-workers-反代节点-misakano-の-小破站" tabindex="-1"><a class="header-anchor" href="#使用-cloudflare-workers-反代节点-misakano-の-小破站"><span>使用 CloudFlare Workers 反代节点 | MisakaNo の 小破站</span></a></h1><blockquote><h2 id="excerpt" tabindex="-1"><a class="header-anchor" href="#excerpt"><span>Excerpt</span></a></h2><p>在我们使用一些VPS或者容器云的节点的时候，我们或多或少会出现IP/域名被墙的一种情况。但是有些提供商特别鸡贼不能够自定义域名。这时候我们可以使用CloudFlare的Workers来反代节点IP/域名，一起复活被墙的节点。 准备材料 一枚域名（因为默认的wkr域名被墙了） 一个CloudFlare账号 部署步骤 注册并登录CloudFlare账号 打开CF的控制台，转到“W</p></blockquote><hr><p>在我们使用一些VPS或者容器云的节点的时候，我们或多或少会出现IP/域名被墙的一种情况。但是有些提供商特别鸡贼不能够自定义域名。这时候我们可以使用CloudFlare的Workers来反代节点IP/域名，一起复活被墙的节点。</p><h2 id="准备材料" tabindex="-1"><a class="header-anchor" href="#准备材料"><span><a href="https://blog.misaka.rest/2023/01/22/cf-wkrs-node/?highlight=%E5%8F%8D%E4%BB%A3#%E5%87%86%E5%A4%87%E6%9D%90%E6%96%99" title="准备材料" target="_blank" rel="noopener noreferrer"></a>准备材料</span></a></h2><ul><li>一枚域名（因为默认的wkr域名被墙了）</li><li>一个CloudFlare账号</li></ul><h2 id="部署步骤" tabindex="-1"><a class="header-anchor" href="#部署步骤"><span><a href="https://blog.misaka.rest/2023/01/22/cf-wkrs-node/?highlight=%E5%8F%8D%E4%BB%A3#%E9%83%A8%E7%BD%B2%E6%AD%A5%E9%AA%A4" title="部署步骤" target="_blank" rel="noopener noreferrer"></a>部署步骤</span></a></h2><ol><li>注册并登录CloudFlare账号</li><li>打开CF的控制台，转到“Workers &amp; Pages”页面，点击“Create Application”按钮</li></ol><figure><a href="https://imgs.misaka.cloudns.biz/20230526085011.png" target="_blank" rel="noopener noreferrer"><img src="https://imgs.misaka.cloudns.biz/20230526085011.png" alt="" tabindex="0" loading="lazy"></a><figcaption></figcaption></figure><ol start="3"><li>点击“Create Worker”按钮</li></ol><figure><a href="https://imgs.misaka.cloudns.biz/20230526085110.png" target="_blank" rel="noopener noreferrer"><img src="https://imgs.misaka.cloudns.biz/20230526085110.png" alt="" tabindex="0" loading="lazy"></a><figcaption></figcaption></figure><ol start="4"><li>设置workers的名称，点击“Deploy”按钮</li></ol><figure><a href="https://imgs.misaka.cloudns.biz/20230526085144.png" target="_blank" rel="noopener noreferrer"><img src="https://imgs.misaka.cloudns.biz/20230526085144.png" alt="" tabindex="0" loading="lazy"></a><figcaption></figcaption></figure><ol start="5"><li>点击“Configure Worker”按钮</li></ol><figure><a href="https://imgs.misaka.cloudns.biz/20230526085249.png" target="_blank" rel="noopener noreferrer"><img src="https://imgs.misaka.cloudns.biz/20230526085249.png" alt="" tabindex="0" loading="lazy"></a><figcaption></figcaption></figure><ol start="6"><li>点击“Quick Edit”按钮，修改代码</li></ol><figure><a href="https://imgs.misaka.cloudns.biz/20230526085331.png" target="_blank" rel="noopener noreferrer"><img src="https://imgs.misaka.cloudns.biz/20230526085331.png" alt="" tabindex="0" loading="lazy"></a><figcaption></figcaption></figure><ol start="7"><li>复制粘贴以下代码（记得将示例域名切换成自己的IP/域名），然后点击“保存并部署”</li></ol><table><tbody><tr><td><pre><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br></pre></td><td><pre><span><span>addEventListener</span>(</span><br><span>  <span>&quot;fetch&quot;</span>,<span><span>event</span> =&gt;</span> {</span><br><span>     <span>let</span> url=<span>new</span> <span>URL</span>(event.<span>request</span>.<span>url</span>);</span><br><span>     url.<span>hostname</span>=<span>&quot;abc.def.xyz&quot;</span>; </span><br><span>     url.<span>protocol</span>=<span>&#39;https&#39;</span>; </span><br><span>     <span>let</span> request=<span>new</span> <span>Request</span>(url,event.<span>request</span>);</span><br><span>     event. <span>respondWith</span>(</span><br><span>       <span>fetch</span>(request)</span><br><span>     )</span><br><span>  }</span><br><span>)</span><br></pre></td></tr></tbody></table><figure><a href="https://imgs.misaka.cloudns.biz/20230122132347.png" target="_blank" rel="noopener noreferrer"><img src="https://imgs.misaka.cloudns.biz/20230122132347.png" alt="" tabindex="0" loading="lazy"></a><figcaption></figcaption></figure><ol start="8"><li>转到“触发器”，点击“添加自定义域”</li></ol><figure><a href="https://imgs.misaka.cloudns.biz/20230122132504.png" target="_blank" rel="noopener noreferrer"><img src="https://imgs.misaka.cloudns.biz/20230122132504.png" alt="" tabindex="0" loading="lazy"></a><figcaption></figcaption></figure><ol start="9"><li>输入你想要绑定的二级域名（备注：一级域名需要在CloudFlare账号里面）</li></ol><figure><a href="https://imgs.misaka.cloudns.biz/20230122132539.png" target="_blank" rel="noopener noreferrer"><img src="https://imgs.misaka.cloudns.biz/20230122132539.png" alt="" tabindex="0" loading="lazy"></a><figcaption></figcaption></figure><ol start="10"><li>替换被墙的IP/域名为workers的自定义域名，如使用workers.dev二级域名的话可以关闭TLS，再使用CF的HTTP端口</li></ol><p>版权声明: 本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank" rel="noopener noreferrer">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://blog.misaka.rest/" target="_blank" rel="noopener noreferrer">MisakaNo の 小破站</a>！</p><hr>',27),i=[n];function o(l,p){return r(),a("div",null,i)}const d=e(s,[["render",o],["__file","使用 CloudFlare Workers 反代节点.html.vue"]]),m=JSON.parse('{"path":"/tech/Cloudflare/%E4%BD%BF%E7%94%A8%20CloudFlare%20Workers%20%E5%8F%8D%E4%BB%A3%E8%8A%82%E7%82%B9.html","title":"使用 CloudFlare Workers 反代节点 | MisakaNo の 小破站","lang":"zh-CN","frontmatter":{"date":"2024-06-01T00:00:00.000Z","created":"2024-03-07T00:00:00.000Z","tags":[],"source":"https://blog.misaka.rest/2023/01/22/cf-wkrs-node/?highlight=%E5%8F%8D%E4%BB%A3","description":"使用 CloudFlare Workers 反代节点 | MisakaNo の 小破站 Excerpt 在我们使用一些VPS或者容器云的节点的时候，我们或多或少会出现IP/域名被墙的一种情况。但是有些提供商特别鸡贼不能够自定义域名。这时候我们可以使用CloudFlare的Workers来反代节点IP/域名，一起复活被墙的节点。 准备材料 一枚域名（因为...","head":[["meta",{"property":"og:url","content":"https://jiange1236.github.io/tech/Cloudflare/%E4%BD%BF%E7%94%A8%20CloudFlare%20Workers%20%E5%8F%8D%E4%BB%A3%E8%8A%82%E7%82%B9.html"}],["meta",{"property":"og:site_name","content":"Zeblog"}],["meta",{"property":"og:title","content":"使用 CloudFlare Workers 反代节点 | MisakaNo の 小破站"}],["meta",{"property":"og:description","content":"使用 CloudFlare Workers 反代节点 | MisakaNo の 小破站 Excerpt 在我们使用一些VPS或者容器云的节点的时候，我们或多或少会出现IP/域名被墙的一种情况。但是有些提供商特别鸡贼不能够自定义域名。这时候我们可以使用CloudFlare的Workers来反代节点IP/域名，一起复活被墙的节点。 准备材料 一枚域名（因为..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:image","content":"https://imgs.misaka.cloudns.biz/20230526085011.png"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2024-06-09T09:47:21.000Z"}],["meta",{"property":"article:author","content":"Zine⁶"}],["meta",{"property":"article:published_time","content":"2024-06-01T00:00:00.000Z"}],["meta",{"property":"article:modified_time","content":"2024-06-09T09:47:21.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"使用 CloudFlare Workers 反代节点 | MisakaNo の 小破站\\",\\"image\\":[\\"https://imgs.misaka.cloudns.biz/20230526085011.png\\",\\"https://imgs.misaka.cloudns.biz/20230526085110.png\\",\\"https://imgs.misaka.cloudns.biz/20230526085144.png\\",\\"https://imgs.misaka.cloudns.biz/20230526085249.png\\",\\"https://imgs.misaka.cloudns.biz/20230526085331.png\\",\\"https://imgs.misaka.cloudns.biz/20230122132347.png\\",\\"https://imgs.misaka.cloudns.biz/20230122132504.png\\",\\"https://imgs.misaka.cloudns.biz/20230122132539.png\\"],\\"datePublished\\":\\"2024-06-01T00:00:00.000Z\\",\\"dateModified\\":\\"2024-06-09T09:47:21.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"Zine⁶\\",\\"url\\":\\"https://zecdn.top\\"}]}"],["link",{"rel":"alternate","type":"application/atom+xml","href":"https://jiange1236.github.io/atom.xml","title":"Zeblog Atom Feed"}],["link",{"rel":"alternate","type":"application/json","href":"https://jiange1236.github.io/feed.json","title":"Zeblog JSON Feed"}],["link",{"rel":"alternate","type":"application/rss+xml","href":"https://jiange1236.github.io/rss.xml","title":"Zeblog RSS Feed"}]]},"headers":[{"level":1,"title":"使用 CloudFlare Workers 反代节点 | MisakaNo の 小破站","slug":"使用-cloudflare-workers-反代节点-misakano-の-小破站","link":"#使用-cloudflare-workers-反代节点-misakano-の-小破站","children":[{"level":2,"title":"准备材料","slug":"准备材料","link":"#准备材料","children":[]},{"level":2,"title":"部署步骤","slug":"部署步骤","link":"#部署步骤","children":[]}]}],"git":{"createdTime":1717256416000,"updatedTime":1717926441000,"contributors":[{"name":"周子健","email":"183465355@qq.com","commits":4}]},"readingTime":{"minutes":2.51,"words":752},"filePathRelative":"tech/Cloudflare/使用 CloudFlare Workers 反代节点.md","localizedDate":"2024年6月1日","excerpt":"","autoDesc":true}');export{d as comp,m as data};
